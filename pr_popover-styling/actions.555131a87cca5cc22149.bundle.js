(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{3627:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return goBack}));__webpack_require__(1072),__webpack_require__(49),__webpack_require__(143);var goBack=function(url){for(var amount=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,normalizedUrl=url.replace(/\/$/,""),i=0;i<amount;i++)normalizedUrl=normalizedUrl.substring(0,normalizedUrl.lastIndexOf("/"));return normalizedUrl}},3638:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var tocco_input_edit_src_main__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(618);__webpack_require__.d(__webpack_exports__,"default",(function(){return tocco_input_edit_src_main__WEBPACK_IMPORTED_MODULE_0__.a}))},3639:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var tocco_delete_src_main__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3635);__webpack_require__.d(__webpack_exports__,"default",(function(){return tocco_delete_src_main__WEBPACK_IMPORTED_MODULE_0__.a}))},3685:function(module,exports,__webpack_require__){var baseAssignValue=__webpack_require__(379),createAggregator=__webpack_require__(3686),hasOwnProperty=Object.prototype.hasOwnProperty,groupBy=createAggregator((function(result,value,key){hasOwnProperty.call(result,key)?result[key].push(value):baseAssignValue(result,key,[value])}));module.exports=groupBy},3686:function(module,exports,__webpack_require__){var arrayAggregator=__webpack_require__(3687),baseAggregator=__webpack_require__(3688),baseIteratee=__webpack_require__(376),isArray=__webpack_require__(146);module.exports=function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,baseIteratee(iteratee,2),accumulator)}}},3687:function(module,exports){module.exports=function arrayAggregator(array,setter,iteratee,accumulator){for(var index=-1,length=null==array?0:array.length;++index<length;){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}},3688:function(module,exports,__webpack_require__){var baseEach=__webpack_require__(1080);module.exports=function baseAggregator(collection,setter,iteratee,accumulator){return baseEach(collection,(function(value,key,collection){setter(accumulator,value,iteratee(value),collection)})),accumulator}},3689:function(module,exports,__webpack_require__){var baseSet=__webpack_require__(624);module.exports=function setWith(object,path,value,customizer){return customizer="function"==typeof customizer?customizer:void 0,null==object?object:baseSet(object,path,value,customizer)}},3696:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var tocco_input_edit_src_main__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(618);__webpack_require__.d(__webpack_exports__,"default",(function(){return tocco_input_edit_src_main__WEBPACK_IMPORTED_MODULE_0__.a}))},3697:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(21),__webpack_require__(49),__webpack_require__(164);var react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__),tocco_resource_scheduler_src_main__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1002),_utils_routing__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__(1070),__webpack_require__(616),__webpack_require__(3627)),ResourceScheduler=function(_ref){var match=_ref.match,selection=_ref.selection,actionProperties=_ref.actionProperties,history=_ref.history,entityBaseUrl=Object(_utils_routing__WEBPACK_IMPORTED_MODULE_7__.a)(match.url,2);return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(tocco_resource_scheduler_src_main__WEBPACK_IMPORTED_MODULE_4__.b,{onEventClick:function onEventClick(_ref2){var model=_ref2.model,key=_ref2.key,url=history.createHref({pathname:"".concat(entityBaseUrl,"/").concat(model,"/").concat(key)});window.open(url,"_blank")},selection:selection,actionProperties:actionProperties})};ResourceScheduler.displayName="ResourceScheduler",ResourceScheduler.__docgenInfo={description:"",methods:[],displayName:"ResourceScheduler",props:{match:{type:{name:"shape",value:{url:{name:"string",required:!1}}},required:!0,description:""},selection:{type:{name:"custom",raw:"selectionPropType.propType"},required:!1,description:""},actionProperties:{type:{name:"shape",value:{calendarType:{name:"string",required:!1}}},required:!1,description:""},history:{type:{name:"shape",value:{createHref:{name:"func",required:!0}}},required:!0,description:""}}},__webpack_exports__.default=ResourceScheduler,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/admin/src/routes/entities/components/Action/actions/ResourceScheduler.js"]={name:"ResourceScheduler",docgenInfo:ResourceScheduler.__docgenInfo,path:"packages/admin/src/routes/entities/components/Action/actions/ResourceScheduler.js"})},3698:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_router_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(112),ShowOutputJobsAction=(__webpack_require__(1070),function(props){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_1__.b,{to:{pathname:"/e/Output_job/list",search:"tql=".concat(encodeURIComponent('entity=="'.concat(props.selection.entityName,'"')))}})});ShowOutputJobsAction.displayName="ShowOutputJobsAction",ShowOutputJobsAction.__docgenInfo={description:"",methods:[],displayName:"ShowOutputJobsAction",props:{selection:{type:{name:"shape",value:{entityName:{name:"string",required:!0}}},required:!0,description:""}}},__webpack_exports__.default=ShowOutputJobsAction,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/admin/src/routes/entities/components/Action/actions/ShowOutputJobsAction.js"]={name:"ShowOutputJobsAction",docgenInfo:ShowOutputJobsAction.__docgenInfo,path:"packages/admin/src/routes/entities/components/Action/actions/ShowOutputJobsAction.js"})},3699:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var tocco_delete_src_main__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3635);__webpack_require__.d(__webpack_exports__,"default",(function(){return tocco_delete_src_main__WEBPACK_IMPORTED_MODULE_0__.a}))},3700:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_router_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(112),Documents=function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_1__.b,{to:{pathname:"/docs"}})};Documents.displayName="Documents",Documents.__docgenInfo={description:"",methods:[],displayName:"Documents"},__webpack_exports__.default=Documents,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/admin/src/routes/entities/components/Action/actions/Documents.js"]={name:"Documents",docgenInfo:Documents.__docgenInfo,path:"packages/admin/src/routes/entities/components/Action/actions/Documents.js"})},3709:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return main}));__webpack_require__(65);var defineProperty=__webpack_require__(5),defineProperty_default=__webpack_require__.n(defineProperty),react=__webpack_require__(0),react_default=__webpack_require__.n(react),reducer=__webpack_require__(18),appFactory=__webpack_require__(63),externalEvents=__webpack_require__(59),prop_types=__webpack_require__(11),prop_types_default=__webpack_require__.n(prop_types),es=__webpack_require__(25),index_es=__webpack_require__(12),src=__webpack_require__(6),helpers_extends=(__webpack_require__(21),__webpack_require__(80),__webpack_require__(161),__webpack_require__(283),__webpack_require__(97),__webpack_require__(53),__webpack_require__(22),__webpack_require__(165),__webpack_require__(69),__webpack_require__(155),__webpack_require__(29),__webpack_require__(32),__webpack_require__(619),__webpack_require__(113),__webpack_require__(83),__webpack_require__(57),__webpack_require__(28)),extends_default=__webpack_require__.n(helpers_extends),slicedToArray=__webpack_require__(48),slicedToArray_default=__webpack_require__.n(slicedToArray),toConsumableArray=__webpack_require__(26),toConsumableArray_default=__webpack_require__.n(toConsumableArray);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}var getAllPaths=function(sourceData){return Object.keys(sourceData.entities[0].paths)},getAllRelations=function(sourceData){return toConsumableArray_default()(new Set(sourceData.relations.map((function(r){return r.relationName}))))},getSortedPathsAndRelations=function(sourceData){var counters=Object.entries(sourceData.entities[0].paths).filter((function(_ref){var _ref2=slicedToArray_default()(_ref,2);_ref2[0];return"counter"===_ref2[1].type})).map((function(_ref3){var _ref4=slicedToArray_default()(_ref3,2),name=_ref4[0];_ref4[1];return name})),other=function(sourceData){return[].concat(toConsumableArray_default()(getAllPaths(sourceData)),toConsumableArray_default()(getAllRelations(sourceData)))}(sourceData).filter((function(name){return!counters.includes(name)})),sortByLabel=function(list){return list.map((function(name){return{name:name,label:sourceData.labels[name]}})).sort((function(a,b){return a.label<b.label?-1:1})).map((function(o){return o.name}))};return[].concat(toConsumableArray_default()(sortByLabel(counters)),toConsumableArray_default()(sortByLabel(other)))},setSourceData=(prop_types_default.a.shape({entities:prop_types_default.a.arrayOf(prop_types_default.a.shape({key:prop_types_default.a.string.isRequired,model:prop_types_default.a.string.isRequired,paths:prop_types_default.a.objectOf(prop_types_default.a.shape({type:prop_types_default.a.string,writable:prop_types_default.a.bool,value:prop_types_default.a.any}))})).isRequired,relations:prop_types_default.a.arrayOf(prop_types_default.a.shape({entityKey:prop_types_default.a.string.isRequired,relationName:prop_types_default.a.string.isRequired,keys:prop_types_default.a.arrayOf(prop_types_default.a.string).isRequired,totalKeys:prop_types_default.a.number.isRequired})).isRequired,displays:prop_types_default.a.arrayOf(prop_types_default.a.shape({model:prop_types_default.a.string.isRequired,values:prop_types_default.a.arrayOf(prop_types_default.a.shape({key:prop_types_default.a.string.isRequired,display:prop_types_default.a.string.isRequired}))})).isRequired,labels:prop_types_default.a.objectOf(prop_types_default.a.string).isRequired,mergeStragegy:prop_types_default.a.shape({display:prop_types_default.a.string})}),function(sourceData){return{type:"merge/SET_SOURCE_DATA",payload:{sourceData:sourceData}}}),actions_setTargetEntity=function(entityKey){return{type:"merge/SET_TARGET_ENTITY",payload:{entityKey:entityKey}}},setMergeError=function(errorMsg,validationErrors){return{type:"merge/SET_MERGE_ERROR",payload:{errorMsg:errorMsg,validationErrors:validationErrors}}},get=(__webpack_require__(1071),__webpack_require__(24)),get_default=__webpack_require__.n(get),field=(__webpack_require__(73),__webpack_require__(74),__webpack_require__(230)),js=__webpack_require__(140),ManyRelationEntityCount=(__webpack_require__(125),function(_ref){var model=_ref.model,keys=_ref.keys,totalKeys=_ref.totalKeys,navigationStrategy=_ref.navigationStrategy;return 0===totalKeys?react_default.a.createElement(src.M.Span,null,totalKeys):react_default.a.createElement(navigationStrategy.ListLink,{entityName:model,entityKeys:keys.slice(0,100)},"(",totalKeys,")")});ManyRelationEntityCount.__docgenInfo={description:"",methods:[],displayName:"ManyRelationEntityCount",props:{model:{type:{name:"string"},required:!0,description:""},keys:{type:{name:"arrayOf",value:{name:"string"}},required:!1,description:""},totalKeys:{type:{name:"number"},required:!0,description:""},navigationStrategy:{type:{name:"custom",raw:"navigationStrategy.propTypes"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/merge/src/util/manyRelationEntityCount.js"]={name:"ManyRelationEntityCount",docgenInfo:ManyRelationEntityCount.__docgenInfo,path:"packages/merge/src/util/manyRelationEntityCount.js"});var taggedTemplateLiteral=__webpack_require__(17),taggedTemplateLiteral_default=__webpack_require__.n(taggedTemplateLiteral),styled_components_browser_esm=__webpack_require__(7);function _templateObject3(){var data=taggedTemplateLiteral_default()(["\n  color: ",";\n"]);return _templateObject3=function(){return data},data}function _templateObject2(){var data=taggedTemplateLiteral_default()(["\n  flex: 1;\n"]);return _templateObject2=function(){return data},data}function _templateObject(){var data=taggedTemplateLiteral_default()(["\n  display: flex;\n  align-items: center;\n\n  label {\n    vertical-align: bottom;\n  }\n"]);return _templateObject=function(){return data},data}var StyledLabelWrapper=styled_components_browser_esm.default.div(_templateObject()),StyledTableWrapper=styled_components_browser_esm.default.div(_templateObject2()),StyledStatusWrapper=styled_components_browser_esm.default.span(_templateObject3(),(function(_ref){return _ref.isChecked?src.R.color("signal.success.text"):src.R.color("signal.danger.text")})),areEqual=function(prevProps,nextProps){return 0===Object.keys(js.a.difference(prevProps,nextProps)).length},Selection_ref2=react_default.a.createElement(index_es.FormattedMessage,{id:"client.merge.allRelations"}),ManyRelationsCheckBox=react_default.a.memo((function(_ref){var entityData=_ref.entityData,entityKey=_ref.entityKey,name=_ref.name,setSelectedMultipleAll=_ref.setSelectedMultipleAll,isSelected=_ref.isSelected,navigationStrategy=_ref.navigationStrategy;return 0===entityData.value.totalKeys?null:react_default.a.createElement(StyledLabelWrapper,null,react_default.a.createElement("input",{type:"checkbox",onChange:function onChange(e){return setSelectedMultipleAll(name,entityKey,e.target.checked)},checked:isSelected,id:"".concat(name).concat(entityKey)}),react_default.a.createElement(src.M.Label,{for:"".concat(name).concat(entityKey)},Selection_ref2," ",react_default.a.createElement(ManyRelationEntityCount,{model:entityData.value.relationEntity,keys:entityData.value.keys,totalKeys:entityData.value.totalKeys,navigationStrategy:navigationStrategy})))}),areEqual),Selection_ref4=react_default.a.createElement(src.M.B,null,react_default.a.createElement(index_es.FormattedMessage,{id:"client.merge.allRelations"})),RelationsCheckBoxes=react_default.a.memo((function(_ref3){var entityData=_ref3.entityData,entityKey=_ref3.entityKey,name=_ref3.name,setSelectedMultiple=_ref3.setSelectedMultiple,selectedMultiple=_ref3.selectedMultiple,isSelected=function(key){return get_default()(selectedMultiple,[name,key])===entityKey},setSelected=function(key,checked){return setSelectedMultiple(name,entityKey,key,checked)},numberTotal=entityData.value.length,numberSelected=entityData.value.filter((function(relationEntity){return isSelected(relationEntity.key)})).length,allRowsSelectionState=numberTotal===numberSelected?"checked":0<numberSelected?"indeterminate":"unchecked";return react_default.a.createElement(react_default.a.Fragment,null,0<entityData.value.length&&react_default.a.createElement(StyledLabelWrapper,null,react_default.a.createElement(src.s,{value:allRowsSelectionState,onChange:function allRowsSelectionChange(v){entityData.value.forEach((function(relationEntity){var checked="checked"===v;isSelected(relationEntity.key)!==checked&&setSelected(relationEntity.key,checked)}))},id:"".concat(name).concat(entityKey)}),react_default.a.createElement(src.M.Label,{for:"".concat(name).concat(entityKey)},Selection_ref4)),entityData.value.map((function(relationEntity){return react_default.a.createElement(StyledLabelWrapper,{key:"relation-checkbox-".concat(relationEntity.key)},react_default.a.createElement("input",{type:"checkbox",onChange:function onChange(e){return setSelected(relationEntity.key,e.target.checked)},checked:isSelected(relationEntity.key),id:"".concat(name).concat(entityKey,"-").concat(relationEntity.key)}),react_default.a.createElement(src.M.Label,{for:"".concat(name).concat(entityKey,"-").concat(relationEntity.key)},react_default.a.createElement(src.k,{type:"single-select",value:relationEntity})))})))}),areEqual),FormattedValueRadio=react_default.a.memo((function(_ref5){var entityData=_ref5.entityData,entityKey=_ref5.entityKey,name=_ref5.name,setSelectedSingle=_ref5.setSelectedSingle,isSelected=_ref5.isSelected,type=entityData.type,writable=entityData.writable,mappedType={entity:"single-select-box"}[type]||type,Field=field.a.factory("list",mappedType);return react_default.a.createElement(StyledLabelWrapper,null,react_default.a.createElement("input",{type:"radio",name:name,onChange:function onChange(){setSelectedSingle(name,entityKey)},checked:isSelected,id:"".concat(name).concat(entityKey),disabled:!writable}),react_default.a.createElement(src.M.Label,{for:"".concat(name).concat(entityKey)},react_default.a.createElement(Field,{formField:{dataType:mappedType},value:entityData.value})))}),areEqual),CellRender_CellRenderer=function(_ref){var rowData=_ref.rowData,column=_ref.column,setSelectedSingle=_ref.setSelectedSingle,selectedSingle=_ref.selectedSingle,setSelectedMultiple=_ref.setSelectedMultiple,selectedMultiple=_ref.selectedMultiple,setSelectedMultipleAll=_ref.setSelectedMultipleAll,selectedMultipleAll=_ref.selectedMultipleAll,navigationStrategy=_ref.navigationStrategy,entityKey=column.entityKey,entityData=rowData[entityKey],type=entityData.type,name=rowData.__key;return"relations"===type?react_default.a.createElement(ManyRelationsCheckBox,{entityData:entityData,entityKey:entityKey,name:name,setSelectedMultipleAll:setSelectedMultipleAll,isSelected:get_default()(selectedMultipleAll,[name],[]).includes(entityKey),navigationStrategy:navigationStrategy}):"entity-list"===type?react_default.a.createElement(RelationsCheckBoxes,{entityData:entityData,entityKey:entityKey,name:name,setSelectedMultiple:setSelectedMultiple,selectedMultiple:selectedMultiple}):react_default.a.createElement(FormattedValueRadio,{entityData:entityData,entityKey:entityKey,name:name,setSelectedSingle:setSelectedSingle,isSelected:selectedSingle[name]===entityKey})};CellRender_CellRenderer.displayName="CellRenderer";var mapActionCreatorsCell={setSelectedSingle:function(name,entityKey){return{type:"merge/SET_SELECTED_SINGLE",payload:{name:name,entityKey:entityKey}}},setSelectedMultiple:function(name,entityKey,relatedEntityKey,isSelected){return{type:"merge/SET_SELECTED_MULTIPLE",payload:{name:name,entityKey:entityKey,relatedEntityKey:relatedEntityKey,isSelected:isSelected}}},setSelectedMultipleAll:function(name,entityKey,isSelected){return{type:"merge/SET_SELECTED_MULTIPLE_ALL",payload:{name:name,entityKey:entityKey,isSelected:isSelected}}}},CellRendererContainer=Object(es.connect)((function(state){return{selectedSingle:state.merge.selected.single,selectedMultiple:state.merge.selected.multiple,selectedMultipleAll:state.merge.selected.multipleAll,navigationStrategy:state.input.navigationStrategy}}),mapActionCreatorsCell)(Object(index_es.injectIntl)(CellRender_CellRenderer));CellRender_CellRenderer.__docgenInfo={description:"",methods:[],displayName:"CellRenderer",props:{rowData:{type:{name:"objectOf",value:{name:"union",value:[{name:"shape",value:{value:{name:"any",required:!1},type:{name:"string",required:!1}}},{name:"string"}]}},required:!1,description:""},column:{type:{name:"shape",value:{entityKey:{name:"string",required:!0}}},required:!1,description:""},setSelectedSingle:{type:{name:"func"},required:!0,description:""},selectedSingle:{type:{name:"objectOf",value:{name:"string"}},required:!1,description:""},setSelectedMultiple:{type:{name:"func"},required:!0,description:""},selectedMultiple:{type:{name:"objectOf",value:{name:"objectOf",value:{name:"string"}}},required:!1,description:""},setSelectedMultipleAll:{type:{name:"func"},required:!0,description:""},selectedMultipleAll:{type:{name:"objectOf",value:{name:"arrayOf",value:{name:"string"}}},required:!1,description:""},navigationStrategy:{type:{name:"custom",raw:"navigationStrategy.propTypes"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/merge/src/components/MergeTable/CellRender.js"]={name:"CellRenderer",docgenInfo:CellRender_CellRenderer.__docgenInfo,path:"packages/merge/src/components/MergeTable/CellRender.js"});var declareFont=__webpack_require__(623);function MergeErrors_templateObject(){var data=taggedTemplateLiteral_default()(["\n  && {\n    ","\n    color: #f00;\n  }\n"]);return MergeErrors_templateObject=function(){return data},data}var StyledError=styled_components_browser_esm.default.p(MergeErrors_templateObject(),Object(declareFont.a)()),MergeErrors=function(_ref){var sourceData=_ref.sourceData,mergeErrorMsg=_ref.mergeErrorMsg,mergeValidationErrors=_ref.mergeValidationErrors;return react_default.a.createElement(react_default.a.Fragment,null,!!mergeErrorMsg&&react_default.a.createElement(StyledError,null,mergeErrorMsg),mergeValidationErrors.map((function(e){var fieldValidators=Object.keys(e.paths).map((function(name){return Object.keys(e.paths[name]).map((function(validator){return e.paths[name][validator].map((function(msg,index){return react_default.a.createElement(StyledError,{key:"paths-".concat(name,"-").concat(validator,"-").concat(index)},sourceData.labels[name],": ",msg)}))}))})),entityValidators=Object.keys(e.entityValidatorErrors).map((function(validator){return e.entityValidatorErrors[validator].map((function(msg,index){return react_default.a.createElement(StyledError,{key:"entity-".concat(validator,"-").concat(index)},msg)}))}));return[].concat(toConsumableArray_default()(fieldValidators),toConsumableArray_default()(entityValidators))})))};prop_types_default.a.arrayOf(prop_types_default.a.shape({model:prop_types_default.a.string,key:prop_types_default.a.string,paths:prop_types_default.a.objectOf(prop_types_default.a.objectOf(prop_types_default.a.arrayOf(prop_types_default.a.string))),entityValidatorErrors:prop_types_default.a.objectOf(prop_types_default.a.arrayOf(prop_types_default.a.string))}));MergeErrors.__docgenInfo={description:"",methods:[],displayName:"MergeErrors",props:{sourceData:{type:{name:"custom",raw:"sourceDataPropType"},required:!1,description:""},mergeErrorMsg:{type:{name:"string"},required:!1,description:""},mergeValidationErrors:{type:{name:"custom",raw:"mergeValidationErrorsPropTypes"},required:!1,description:""}}};var MergeTable_MergeErrors=MergeErrors;function GlobalStyledComponents_templateObject2(){var data=taggedTemplateLiteral_default()(["\n  align-self: flex-start;\n  margin-top: ",";\n  margin-bottom: ",";\n  margin-left: ",";\n"]);return GlobalStyledComponents_templateObject2=function(){return data},data}function GlobalStyledComponents_templateObject(){var data=taggedTemplateLiteral_default()(["\n  border-bottom: 3px solid ",";\n"]);return GlobalStyledComponents_templateObject=function(){return data},data}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/merge/src/components/MergeTable/MergeErrors.js"]={name:"MergeErrors",docgenInfo:MergeErrors.__docgenInfo,path:"packages/merge/src/components/MergeTable/MergeErrors.js"});var StyledButtonWrapper=styled_components_browser_esm.default.div(GlobalStyledComponents_templateObject(),src.R.color("backgroundBody")),StyledButton=Object(styled_components_browser_esm.default)(src.f)(GlobalStyledComponents_templateObject2(),src.P.space(-.7),src.P.space(-.7),src.P.space(0)),MergeTable_LabelCellRenderer=function(_ref){var rowIdx=_ref.rowIdx,sourceData=_ref.sourceData,columnName=_ref.allPaths[rowIdx];return react_default.a.createElement(src.M.B,null,sourceData.labels[columnName])};MergeTable_LabelCellRenderer.displayName="LabelCellRenderer";var MergeTable_ref3=react_default.a.createElement(index_es.FormattedMessage,{id:"client.merge.strategy.keep"}),mapActionCreatorsColumn={setTargetEntity:actions_setTargetEntity},ColumnHeaderRendererContainer=Object(es.connect)((function(state){return{targetEntity:state.merge.selected.targetEntity,mergeStrategyDisplay:state.merge.sourceData.mergeStrategyDisplay}}),mapActionCreatorsColumn)(Object(index_es.injectIntl)((function(_ref2){var label=_ref2.label,entityKey=_ref2.entityKey,setTargetEntity=_ref2.setTargetEntity,targetEntity=_ref2.targetEntity,mergeStrategyDisplay=_ref2.mergeStrategyDisplay,isChecked=targetEntity===entityKey,status=isChecked?MergeTable_ref3:mergeStrategyDisplay;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("input",{type:"radio",name:"column",onChange:function onChange(){return setTargetEntity(entityKey)},checked:isChecked,id:"targetEntity".concat(entityKey)}),react_default.a.createElement(src.M.Label,{for:"targetEntity".concat(entityKey)},react_default.a.createElement(src.M.B,null,label),react_default.a.createElement(StyledStatusWrapper,{isChecked:isChecked}," (",status,")")))}))),MergeTable_ref5=react_default.a.createElement(src.o,null),MergeTable_ref6=react_default.a.createElement(index_es.FormattedMessage,{id:"client.merge.saveButton"}),MergeTable=function(_ref4){var sourceData=_ref4.sourceData,mergePending=_ref4.mergePending,mergeErrorMsg=_ref4.mergeErrorMsg,mergeValidationErrors=_ref4.mergeValidationErrors,executeMerge=_ref4.executeMerge,data=Object(react.useMemo)((function(){return sourceData?function(sourceData){var pathRows=getAllPaths(sourceData).map((function(path){return sourceData.entities.reduce((function(acc,e){var value=e.paths[path];if(value&&value.value){if("entity"===value.type){var display=sourceData.displays.find((function(d){return d.model===value.value.model})).values.find((function(v){return v.key===value.value.key})).display;value.value.display=display}"entity-list"===value.type&&(value.value=value.value.map((function(f){var display=sourceData.displays.find((function(d){return d.model===f.model})).values.find((function(v){return v.key===f.key}));return f.display=void 0===display?"PK: "+f.key:display.display,f})))}return _objectSpread(_objectSpread({},acc),{},defineProperty_default()({},e.key,value))}),{__key:path})})),relationRows=getAllRelations(sourceData).map((function(relation){return sourceData.relations.filter((function(r){return r.relationName===relation})).reduce((function(acc,val){return _objectSpread(_objectSpread({},acc),{},defineProperty_default()({},val.entityKey,{type:"relations",value:{keys:val.keys,totalKeys:val.totalKeys,relationEntity:val.relationEntity}}))}),{__key:relation})})),sorting=getSortedPathsAndRelations(sourceData);return[].concat(toConsumableArray_default()(pathRows),toConsumableArray_default()(relationRows)).sort((function(a,b){return sorting.findIndex((function(e){return e===a.__key}))-sorting.findIndex((function(e){return e===b.__key}))}))}(sourceData):[]}),[sourceData]),columns=Object(react.useMemo)((function(){return sourceData?function(sourceData,ColumnHeaderRenderer,PathCellRenderer,LabelCellRenderer){var pathColumns=sourceData.entities.map((function(entity){return{id:entity.key,entityKey:entity.key,resizable:!0,sorting:{sortable:!1},CellRenderer:PathCellRenderer,HeaderRenderer:function HeaderRenderer(props){return react_default.a.createElement(ColumnHeaderRenderer,extends_default()({},props,{entityKey:entity.key,label:sourceData.displays.find((function(d){return d.model===entity.model})).values.find((function(v){return v.key===entity.key})).display}))}}}));return[{id:"column-label",label:"",resizable:!0,sorting:{sortable:!1},CellRenderer:function CellRenderer(props){return react_default.a.createElement(LabelCellRenderer,extends_default()({},props,{sourceData:sourceData,allPaths:getSortedPathsAndRelations(sourceData)}))}}].concat(toConsumableArray_default()(pathColumns))}(sourceData,ColumnHeaderRendererContainer,CellRendererContainer,MergeTable_LabelCellRenderer):[]}),[sourceData]);return mergePending?MergeTable_ref5:react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(StyledButtonWrapper,null,react_default.a.createElement(StyledButton,{onClick:executeMerge,look:"raised",ink:"primary",disabled:null===sourceData},MergeTable_ref6)),react_default.a.createElement(StyledTableWrapper,null,react_default.a.createElement(MergeTable_MergeErrors,{sourceData:sourceData,mergeErrorMsg:mergeErrorMsg,mergeValidationErrors:mergeValidationErrors}),react_default.a.createElement(src.L,{columns:columns,data:data,selectionStyle:"none",dataLoadingInProgress:null===sourceData,onColumnPositionChange:function onColumnPositionChange(){}})))};MergeTable.__docgenInfo={description:"",methods:[],displayName:"MergeTable",props:{sourceData:{type:{name:"custom",raw:"sourceDataPropType"},required:!1,description:""},mergePending:{type:{name:"bool"},required:!0,description:""},mergeErrorMsg:{type:{name:"string"},required:!1,description:""},mergeValidationErrors:{type:{name:"custom",raw:"mergeValidationErrorsPropTypes"},required:!1,description:""},executeMerge:{type:{name:"func"},required:!0,description:""}}};var MergeTable_MergeTable=MergeTable;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/merge/src/components/MergeTable/MergeTable.js"]={name:"MergeTable",docgenInfo:MergeTable.__docgenInfo,path:"packages/merge/src/components/MergeTable/MergeTable.js"});var mapActionCreators={executeMerge:function(){return{type:"merge/EXECUTE_MERGE"}}},components_MergeTable=Object(es.connect)((function(state){return{sourceData:state.merge.sourceData,mergePending:state.merge.mergePending,mergeErrorMsg:state.merge.mergeErrorMsg,mergeValidationErrors:state.merge.mergeValidationErrors}}),mapActionCreators)(Object(index_es.injectIntl)(MergeTable_MergeTable)),groupBy=__webpack_require__(3685),groupBy_default=__webpack_require__.n(groupBy);function _templateObject4(){var data=taggedTemplateLiteral_default()(["\n  display: flex;\n  align-items: center;\n  color: ",";\n  font-size: ",";\n"]);return _templateObject4=function(){return data},data}function StyledComponents_templateObject3(){var data=taggedTemplateLiteral_default()(["\n  padding: "," 0 0 ",";\n"]);return StyledComponents_templateObject3=function(){return data},data}function StyledComponents_templateObject2(){var data=taggedTemplateLiteral_default()(["\n  margin-bottom: ",";\n\n  && {\n    p {\n      margin-bottom: 0;\n    }\n  }\n"]);return StyledComponents_templateObject2=function(){return data},data}function StyledComponents_templateObject(){var data=taggedTemplateLiteral_default()(["\n  display: grid;\n  align-items: center;\n  grid-template-columns: "," 1fr;\n  grid-column-gap: ",";\n  margin-bottom: ",";\n"]);return StyledComponents_templateObject=function(){return data},data}var StyledSummarySuccessWrapper=styled_components_browser_esm.default.div(StyledComponents_templateObject(),src.P.font(10),src.P.space(-.5),src.P.space(-.7)),StyledMessageWrapper=styled_components_browser_esm.default.div(StyledComponents_templateObject2(),src.P.space(-.7)),StyledResultsWrapper=styled_components_browser_esm.default.div(StyledComponents_templateObject3(),src.P.space(-1),src.P.space(0)),StyledIconWrapper=styled_components_browser_esm.default.span(_templateObject4(),src.R.color("signal.success.text"),src.P.font(10)),MergeSummary_ref4=react_default.a.createElement(index_es.FormattedMessage,{id:"client.merge.close"}),MergeSummary_ref5=react_default.a.createElement(StyledSummarySuccessWrapper,null,react_default.a.createElement(StyledIconWrapper,null,react_default.a.createElement(src.l,{icon:"check"})),react_default.a.createElement(src.M.P,null,react_default.a.createElement(index_es.FormattedMessage,{id:"client.merge.summary.success"}))),MergeSummary_ref6=react_default.a.createElement(src.M.P,null,react_default.a.createElement(index_es.FormattedMessage,{id:"client.merge.summary.successHint"})),_ref7=react_default.a.createElement(src.M.P,null,react_default.a.createElement(index_es.FormattedMessage,{id:"client.merge.summary.notCopiedRelations"}),":"),_ref8=react_default.a.createElement(src.M.P,null,react_default.a.createElement(index_es.FormattedMessage,{id:"client.merge.summary.notDeletedEntities"}),":"),_ref9=react_default.a.createElement(src.M.P,null,react_default.a.createElement(index_es.FormattedMessage,{id:"client.merge.summary.permission"})),MergeSummary=function(_ref){var mergeResponse=_ref.mergeResponse,navigationStrategy=_ref.navigationStrategy,close=_ref.close,mapToEntityList=function(entities){return Object.entries(groupBy_default()(entities,(function(e){return e.entityLabel}))).map((function(_ref2){var _ref3=slicedToArray_default()(_ref2,2),entityLabel=_ref3[0],list=_ref3[1],model=entities.find((function(e){return e.entityLabel===entityLabel})).entity,keys=list.map((function(e){return e.pk}));return react_default.a.createElement("span",{key:model},entityLabel," ",react_default.a.createElement(ManyRelationEntityCount,{model:model,keys:keys,totalKeys:keys.length,navigationStrategy:navigationStrategy}))})).reduce((function(prev,curr){return null===prev?[curr]:[].concat(toConsumableArray_default()(prev),[", ",curr])}),null)},notCopiedRelations=mapToEntityList(mergeResponse.notCopiedRelations),notDeletedEntities=mapToEntityList(mergeResponse.notDeletedEntities);return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(StyledButtonWrapper,null,react_default.a.createElement(StyledButton,{onClick:close,look:"raised",ink:"primary"},MergeSummary_ref4)),react_default.a.createElement(StyledResultsWrapper,null,MergeSummary_ref5,(0<mergeResponse.notCopiedRelations.length||0<mergeResponse.notDeletedEntities.length)&&MergeSummary_ref6,0<mergeResponse.notCopiedRelations.length&&react_default.a.createElement(StyledMessageWrapper,null,_ref7,react_default.a.createElement(src.M.B,null,notCopiedRelations)),0<mergeResponse.notDeletedEntities.length&&react_default.a.createElement(StyledMessageWrapper,null,_ref8,react_default.a.createElement(src.M.B,null,notDeletedEntities)),mergeResponse.showPermissionMessage&&_ref9))};MergeSummary.__docgenInfo={description:"",methods:[],displayName:"MergeSummary",props:{mergeResponse:{type:{name:"shape",value:{notCopiedRelations:{name:"arrayOf",value:{name:"custom",raw:"entityWarningPropType"},required:!1},notDeletedEntities:{name:"arrayOf",value:{name:"custom",raw:"entityWarningPropType"},required:!1},showPermissionMessage:{name:"bool",required:!0}}},required:!1,description:""},navigationStrategy:{type:{name:"custom",raw:"navigationStrategy.propTypes"},required:!1,description:""},close:{type:{name:"func"},required:!0,description:""}}};var MergeSummary_MergeSummary=MergeSummary;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/merge/src/components/MergeSummary/MergeSummary.js"]={name:"MergeSummary",docgenInfo:MergeSummary.__docgenInfo,path:"packages/merge/src/components/MergeSummary/MergeSummary.js"});var MergeSummaryContainer_mapActionCreators={close:function(){return{type:"merge/CLOSE"}}},components_MergeSummary=Object(es.connect)((function(state){return{mergeResponse:state.merge.mergeResponse,navigationStrategy:state.input.navigationStrategy}}),MergeSummaryContainer_mapActionCreators)(Object(index_es.injectIntl)(MergeSummary_MergeSummary));function Merge_StyledComponents_templateObject(){var data=taggedTemplateLiteral_default()(["\n  height: 100%;\n  overflow: hidden;\n  background-color: ",";\n  display: flex;\n  flex-direction: column;\n"]);return Merge_StyledComponents_templateObject=function(){return data},data}var StyledMerge=styled_components_browser_esm.default.div(Merge_StyledComponents_templateObject(),src.R.color("paper")),Merge_ref2=react_default.a.createElement(components_MergeSummary,null),Merge_ref3=react_default.a.createElement(components_MergeTable,null),Merge=function(_ref){var initialize=_ref.initialize,mergeDone=_ref.mergeDone;return Object(react.useEffect)((function(){initialize()}),[]),react_default.a.createElement(StyledMerge,null,mergeDone?Merge_ref2:Merge_ref3)};Merge.displayName="Merge",Merge.__docgenInfo={description:"",methods:[],displayName:"Merge",props:{initialize:{type:{name:"func"},required:!0,description:""},mergeDone:{type:{name:"bool"},required:!0,description:""}}};var Merge_Merge=Merge;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/merge/src/components/Merge/Merge.js"]={name:"Merge",docgenInfo:Merge.__docgenInfo,path:"packages/merge/src/components/Merge/Merge.js"});var MergeContainer_mapActionCreators={initialize:function(){return{type:"merge/INITIALIZE"}}},components_Merge=Object(es.connect)((function(state){return{mergeDone:!!state.merge.mergeResponse}}),MergeContainer_mapActionCreators)(Object(index_es.injectIntl)(Merge_Merge)),regenerator=__webpack_require__(3),regenerator_default=__webpack_require__.n(regenerator),redux_saga_effects_npm_proxy_esm=(__webpack_require__(36),__webpack_require__(1)),rest=__webpack_require__(23),uniq=__webpack_require__(208),uniq_default=__webpack_require__.n(uniq),_marked=regenerator_default.a.mark(mainSagas),_marked2=regenerator_default.a.mark(sagas_initialize),_marked3=regenerator_default.a.mark(loadSourceData),_marked4=regenerator_default.a.mark(getMergeBody),_marked5=regenerator_default.a.mark(sagas_executeMerge),_marked6=regenerator_default.a.mark(sagas_close),mergeSelector=function(state){return state.merge};function mainSagas(){return regenerator_default.a.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.j)("merge/INITIALIZE",sagas_initialize),Object(redux_saga_effects_npm_proxy_esm.j)("merge/EXECUTE_MERGE",sagas_executeMerge),Object(redux_saga_effects_npm_proxy_esm.j)("merge/CLOSE",sagas_close)]);case 2:case"end":return _context.stop()}}),_marked)}function sagas_initialize(){var _yield$select,selection;return regenerator_default.a.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,Object(redux_saga_effects_npm_proxy_esm.f)(mergeSelector);case 2:return _yield$select=_context2.sent,selection=_yield$select.selection,_context2.next=6,Object(redux_saga_effects_npm_proxy_esm.b)(loadSourceData,selection);case 6:case"end":return _context2.stop()}}),_marked2)}function loadSourceData(selection){var options,response,sourceData;return regenerator_default.a.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return"merge/sourceData",options={method:"POST",body:selection},_context3.next=4,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.requestSaga,"merge/sourceData",options);case 4:return response=_context3.sent,sourceData=response.body,_context3.next=8,Object(redux_saga_effects_npm_proxy_esm.e)(setSourceData(sourceData));case 8:return _context3.next=10,Object(redux_saga_effects_npm_proxy_esm.e)(actions_setTargetEntity(sourceData.entities[0].key));case 10:case"end":return _context3.stop()}}),_marked3)}function getMergeBody(){var _yield$select2,selection,selected,sourceData,paths,_loop,_i,_Object$entries,_loop2,_i2,_Object$entries2,mergeRelations;return regenerator_default.a.wrap((function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,Object(redux_saga_effects_npm_proxy_esm.f)(mergeSelector);case 2:for(_yield$select2=_context4.sent,selection=_yield$select2.selection,selected=_yield$select2.selected,sourceData=_yield$select2.sourceData,paths={},_loop=function(){var _Object$entries$_i=slicedToArray_default()(_Object$entries[_i],2),name=_Object$entries$_i[0],entityKey=_Object$entries$_i[1],path=sourceData.entities.find((function(e){return e.key===entityKey})).paths[name];path.writable&&("entity"===path.type?null===path.value?paths[name]=null:paths[name]={key:path.value.key}:paths[name]=entityKey)},_i=0,_Object$entries=Object.entries(selected.single);_i<_Object$entries.length;_i++)_loop();for(_loop2=function(){var _Object$entries2$_i=slicedToArray_default()(_Object$entries2[_i2],2),name=_Object$entries2$_i[0],obj=_Object$entries2$_i[1];paths[name]=[],Object.keys(obj).forEach((function(value){return paths[name].push({key:value})}))},_i2=0,_Object$entries2=Object.entries(selected.multiple);_i2<_Object$entries2.length;_i2++)_loop2();return mergeRelations=uniq_default()(sourceData.relations.map((function(r){return r.relationName}))).map((function(relationName){return{relationName:relationName,sourceKey:selected.multipleAll[relationName]||[]}})),_context4.abrupt("return",{selection:selection,targetEntity:{key:selected.targetEntity,paths:paths},mergeRelations:mergeRelations});case 13:case"end":return _context4.stop()}}),_marked4)}function sagas_executeMerge(){var resource,options,response;return regenerator_default.a.wrap((function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return resource="merge/merge",_context5.t0=[400,500],_context5.next=4,Object(redux_saga_effects_npm_proxy_esm.b)(getMergeBody);case 4:return _context5.t1=_context5.sent,options={method:"POST",acceptedStatusCodes:_context5.t0,body:_context5.t1},_context5.next=8,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.requestSaga,resource,options);case 8:if(200!==(response=_context5.sent).status){_context5.next=14;break}return _context5.next=12,Object(redux_saga_effects_npm_proxy_esm.e)({type:"merge/SET_MERGE_RESPONSE",payload:{mergeResponse:response.body}});case 12:_context5.next=21;break;case 14:if(!response.body||"VALIDATION_FAILED"!==response.body.errorCode){_context5.next=19;break}return _context5.next=17,Object(redux_saga_effects_npm_proxy_esm.e)(setMergeError(null,response.body.errors));case 17:_context5.next=21;break;case 19:return _context5.next=21,Object(redux_saga_effects_npm_proxy_esm.e)(setMergeError(response.body.message,[]));case 21:case"end":return _context5.stop()}}),_marked5)}function sagas_close(){var _yield$select3,selection,entities,remoteEvents;return regenerator_default.a.wrap((function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,Object(redux_saga_effects_npm_proxy_esm.f)(mergeSelector);case 2:return _yield$select3=_context6.sent,selection=_yield$select3.selection,entities=selection.ids.map((function(id){return{entityName:selection.entityName,key:id}})),remoteEvents=[{type:"entity-update-event",payload:{entities:entities}}],_context6.next=8,Object(redux_saga_effects_npm_proxy_esm.e)(externalEvents.a.fireExternalEvent("onSuccess",{remoteEvents:remoteEvents}));case 8:case"end":return _context6.stop()}}),_marked6)}var _ACTION_HANDLERS,omit=__webpack_require__(196),omit_default=__webpack_require__.n(omit),setWith=__webpack_require__(3689),setWith_default=__webpack_require__.n(setWith);function reducer_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function reducer_objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?reducer_ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):reducer_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}var setTargetEntityMultiple=function(multiple,entity){for(var _loop=function(){var _Object$entries2$_i=slicedToArray_default()(_Object$entries2[_i2],2),key=_Object$entries2$_i[0],obj=_Object$entries2$_i[1];"entity-list"===obj.type&&obj.value.map((function(e){return e.key})).forEach((function(relatedEntityKey){setWith_default()(multiple,[key,relatedEntityKey],entity.key,Object)}))},_i2=0,_Object$entries2=Object.entries(entity.paths);_i2<_Object$entries2.length;_i2++)_loop()},ACTION_HANDLERS=(_ACTION_HANDLERS={},defineProperty_default()(_ACTION_HANDLERS,"merge/SET_SELECTION",reducer.a.singleTransferReducer("selection")),defineProperty_default()(_ACTION_HANDLERS,"merge/SET_SOURCE_DATA",reducer.a.singleTransferReducer("sourceData")),defineProperty_default()(_ACTION_HANDLERS,"merge/EXECUTE_MERGE",(function(state){return reducer_objectSpread(reducer_objectSpread({},state),{},{mergePending:!0})})),defineProperty_default()(_ACTION_HANDLERS,"merge/SET_MERGE_RESPONSE",(function(state,_ref){var mergeResponse=_ref.payload.mergeResponse;return reducer_objectSpread(reducer_objectSpread({},state),{},{mergePending:!1,mergeResponse:mergeResponse})})),defineProperty_default()(_ACTION_HANDLERS,"merge/SET_MERGE_ERROR",(function(state,_ref2){var _ref2$payload=_ref2.payload,errorMsg=_ref2$payload.errorMsg,validationErrors=_ref2$payload.validationErrors;return reducer_objectSpread(reducer_objectSpread({},state),{},{mergePending:!1,mergeErrorMsg:errorMsg,mergeValidationErrors:validationErrors})})),defineProperty_default()(_ACTION_HANDLERS,"merge/SET_SELECTED_SINGLE",(function(state,_ref3){var _ref3$payload=_ref3.payload,name=_ref3$payload.name,entityKey=_ref3$payload.entityKey;return reducer_objectSpread(reducer_objectSpread({},state),{},{selected:reducer_objectSpread(reducer_objectSpread({},state.selected),{},{single:reducer_objectSpread(reducer_objectSpread({},state.selected.single),{},defineProperty_default()({},name,entityKey))})})})),defineProperty_default()(_ACTION_HANDLERS,"merge/SET_SELECTED_MULTIPLE",(function(state,_ref4){var multiple,_ref4$payload=_ref4.payload,name=_ref4$payload.name,entityKey=_ref4$payload.entityKey,relatedEntityKey=_ref4$payload.relatedEntityKey;return _ref4$payload.isSelected?multiple=reducer_objectSpread(reducer_objectSpread({},state.selected.multiple),{},defineProperty_default()({},name,reducer_objectSpread(reducer_objectSpread({},state.selected.multiple[name]),{},defineProperty_default()({},relatedEntityKey,entityKey)))):(multiple=reducer_objectSpread({},state.selected.multiple))[name]=omit_default()(multiple[name],[relatedEntityKey]),reducer_objectSpread(reducer_objectSpread({},state),{},{selected:reducer_objectSpread(reducer_objectSpread({},state.selected),{},{multiple:multiple})})})),defineProperty_default()(_ACTION_HANDLERS,"merge/SET_SELECTED_MULTIPLE_ALL",(function(state,_ref5){var array,_ref5$payload=_ref5.payload,name=_ref5$payload.name,entityKey=_ref5$payload.entityKey;return array=_ref5$payload.isSelected?[].concat(toConsumableArray_default()(state.selected.multipleAll[name]||[]),[entityKey]):state.selected.multipleAll[name].filter((function(key){return key!==entityKey})),reducer_objectSpread(reducer_objectSpread({},state),{},{selected:reducer_objectSpread(reducer_objectSpread({},state.selected),{},{multipleAll:reducer_objectSpread(reducer_objectSpread({},state.selected.multipleAll),{},defineProperty_default()({},name,array))})})})),defineProperty_default()(_ACTION_HANDLERS,"merge/SET_TARGET_ENTITY",(function(state,_ref6){for(var entityKey=_ref6.payload.entityKey,single={},multiple={},targetEntity=state.sourceData.entities.find((function(e){return e.key===entityKey})),_i=0,_Object$entries=Object.entries(targetEntity.paths);_i<_Object$entries.length;_i++){var _Object$entries$_i=slicedToArray_default()(_Object$entries[_i],2),key=_Object$entries$_i[0];"entity-list"!==_Object$entries$_i[1].type&&(single[key]=entityKey)}state.sourceData.entities.filter((function(e){return e.key!==entityKey})).forEach((function(e){return setTargetEntityMultiple(multiple,e)})),setTargetEntityMultiple(multiple,targetEntity);var multipleAll=state.sourceData.relations.reduce((function(acc,val){return reducer_objectSpread(reducer_objectSpread({},acc),{},defineProperty_default()({},val.relationName,[].concat(toConsumableArray_default()(acc[val.relationName]||[]),[val.entityKey])))}),{});return reducer_objectSpread(reducer_objectSpread({},state),{},{selected:reducer_objectSpread(reducer_objectSpread({},state.selected),{},{targetEntity:entityKey,single:single,multiple:multiple,multipleAll:multipleAll})})})),_ACTION_HANDLERS),initialState={selection:null,sourceData:null,mergePending:!1,mergeResponse:null,mergeErrorMsg:null,mergeValidationErrors:[],selected:{targetEntity:null,single:{},multiple:{},multipleAll:{}}};function reducer_reducer(){var state=0<arguments.length&&void 0!==arguments[0]?arguments[0]:initialState,action=1<arguments.length?arguments[1]:void 0,handler=ACTION_HANDLERS[action.type];return handler?handler(state,action):state}reducer_reducer.__docgenInfo={description:"",methods:[],displayName:"reducer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/merge/src/modules/merge/reducer.js"]={name:"reducer",docgenInfo:reducer_reducer.__docgenInfo,path:"packages/merge/src/modules/merge/reducer.js"});var merge_marked=regenerator_default.a.mark(sagas);function sagas(){return regenerator_default.a.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.d)(mainSagas)]);case 2:case"end":return _context.stop()}}),merge_marked)}var reducers={merge:reducer_reducer},reducers_sagas=[sagas];function main_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var EXTERNAL_EVENTS=["emitAction","onSuccess"],main_ref=react_default.a.createElement(components_Merge,null),initApp=function(id,input,events,publicPath){var selection,store=appFactory.a.createStore(reducers,reducers_sagas,input,"merge");return externalEvents.a.addToStore(store,events),appFactory.a.createApp("merge",main_ref,store,{input:input,events:events,actions:[(selection=input.selection,{type:"merge/SET_SELECTION",payload:{selection:selection}})],publicPath:publicPath,textResourceModules:["component","common","merge"]})},MergeApp=function(props){var events=EXTERNAL_EVENTS.reduce((function(events,event){return props[event]&&(events[event]=props[event]),events}),{});return initApp(0,props,events).component};MergeApp.propTypes=function main_objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?main_ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):main_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({selection:prop_types_default.a.object},EXTERNAL_EVENTS.reduce((function(propTypes,event){return propTypes[event]=prop_types_default.a.func,propTypes}),{}));var main=MergeApp},3711:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return main}));var react=__webpack_require__(0),react_default=__webpack_require__.n(react),reducer=__webpack_require__(18),appFactory=__webpack_require__(63),prop_types=__webpack_require__(11),prop_types_default=__webpack_require__.n(prop_types),setData=function(data){return{type:"qrCode/SET_DATA",payload:{data:data}}},defineProperty=__webpack_require__(5),ACTION_HANDLERS=__webpack_require__.n(defineProperty)()({},"qrCode/SET_DATA",reducer.a.singleTransferReducer("data")),initialState={data:void 0};function reducer_reducer(){var state=0<arguments.length&&void 0!==arguments[0]?arguments[0]:initialState,action=1<arguments.length?arguments[1]:void 0,handler=ACTION_HANDLERS[action.type];return handler?handler(state,action):state}reducer_reducer.__docgenInfo={description:"",methods:[],displayName:"reducer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/user-qr-action/src/modules/qrCode/reducer.js"]={name:"reducer",docgenInfo:reducer_reducer.__docgenInfo,path:"packages/user-qr-action/src/modules/qrCode/reducer.js"});__webpack_require__(73),__webpack_require__(155),__webpack_require__(74);var slicedToArray=__webpack_require__(48),slicedToArray_default=__webpack_require__.n(slicedToArray),regenerator=__webpack_require__(3),regenerator_default=__webpack_require__.n(regenerator),redux_saga_effects_npm_proxy_esm=(__webpack_require__(36),__webpack_require__(1)),rest=__webpack_require__(23),consoleLogger=__webpack_require__(90),_marked=regenerator_default.a.mark(sagas),_marked2=regenerator_default.a.mark(sagas_fetchData),inputSelector=function(state){return state.input};function sagas(){return regenerator_default.a.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.i)("qrCode/FETCH_DATA",sagas_fetchData)]);case 2:case"end":return _context.stop()}}),_marked)}function sagas_fetchData(){var _yield$select,selection,userKey,query,entity,data;return regenerator_default.a.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,Object(redux_saga_effects_npm_proxy_esm.f)(inputSelector);case 2:return _yield$select=_context2.sent,selection=_yield$select.selection,userKey=getSingleKey(selection),query={paths:["firstname","lastname","c_address","phone_mobile","phone_company","phone_private","email","email_alternative","birthdate"]},_context2.prev=6,_context2.next=9,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.fetchEntity,"User",userKey,query);case 9:return entity=_context2.sent,data=null,entity&&(data={},Object.entries(entity.paths).forEach((function(_ref){var _ref2=slicedToArray_default()(_ref,2),path=_ref2[0],bean=_ref2[1];bean&&bean.value&&(data[path]=bean.value)}))),_context2.next=14,Object(redux_saga_effects_npm_proxy_esm.e)(setData(data));case 14:_context2.next=21;break;case 16:return _context2.prev=16,_context2.t0=_context2.catch(6),consoleLogger.a.logError("Failed to fetch data",_context2.t0),_context2.next=21,Object(redux_saga_effects_npm_proxy_esm.e)(setData(null));case 21:case"end":return _context2.stop()}}),_marked2,null,[[6,16]])}var getSingleKey=function(selection){if("User"!==selection.entityName)throw new Error("Only selection of User supported");if("ID"!==selection.type)throw new Error("Only ID selection type supported");if(!selection.ids||1!==selection.ids.length)throw new Error("Exactly one user must be selected");return selection.ids[0]},reducers={qrCode:reducer_reducer},reducers_sagas=[sagas],es=__webpack_require__(25),taggedTemplateLiteral=__webpack_require__(17),taggedTemplateLiteral_default=__webpack_require__.n(taggedTemplateLiteral),src=__webpack_require__(6),styled_components_browser_esm=__webpack_require__(7),index_es=__webpack_require__(12),appendField=(__webpack_require__(21),__webpack_require__(49),__webpack_require__(143),function(data,fieldName,outputPrefix,output){var handler=4<arguments.length&&void 0!==arguments[4]?arguments[4]:function(fieldData){return fieldData};return data[fieldName]&&0<data[fieldName].length&&(output+="".concat(outputPrefix,":").concat(handler(data[fieldName]),";")),output});function _templateObject2(){var data=taggedTemplateLiteral_default()(["\n  margin: 0;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"]);return _templateObject2=function(){return data},data}function _templateObject(){var data=taggedTemplateLiteral_default()(["\n  width: 148px;\n  height: 148px;\n  position: relative;\n  align-self: center;\n"]);return _templateObject=function(){return data},data}var StyledContainer=styled_components_browser_esm.default.div(_templateObject()),StyledContent=styled_components_browser_esm.default.div(_templateObject2()),UserQrCode_ref2=react_default.a.createElement(src.p,null),_ref3=react_default.a.createElement(src.M.P,null,react_default.a.createElement(index_es.FormattedMessage,{id:"client.user-qr-action.fetchFailed"})),UserQrCode=function(_ref){var content,data=_ref.data,fetchData=_ref.fetchData;if(Object(react.useEffect)((function(){fetchData()}),[]),void 0===data)content=UserQrCode_ref2;else if(null===data)content=_ref3;else{var string=function(data){var string="MECARD:N:".concat(data.lastname,",").concat(data.firstname,";");return string=appendField(data,"c_address","ADR",string,(function(address){return address.replace(/\s*<br\s?\/?>\s*/gi,",")})),string=appendField(data,"phone_mobile","TEL",string),string=appendField(data,"phone_company","TEL",string),string=appendField(data,"phone_private","TEL",string),string=appendField(data,"email","EMAIL",string),string=appendField(data,"email_alternative","EMAIL",string),string=appendField(data,"birthdate","BDAY",string,(function(date){return date.replace(/-/gi,"")}))}(data);content=react_default.a.createElement(src.w,{value:string})}return react_default.a.createElement(StyledContainer,null,react_default.a.createElement(StyledContent,null,content))};UserQrCode.displayName="UserQrCode",UserQrCode.__docgenInfo={description:"",methods:[],displayName:"UserQrCode",props:{data:{type:{name:"shape",value:{firstname:{name:"string",required:!0},lastname:{name:"string",required:!0},c_address:{name:"string",required:!1},phone_mobile:{name:"string",required:!1},phone_company:{name:"string",required:!1},phone_private:{name:"string",required:!1},email:{name:"string",required:!1},email_alternative:{name:"string",required:!1},birthdate:{name:"string",required:!1}}},required:!1,description:""},fetchData:{type:{name:"func"},required:!0,description:""}}};var UserQrCode_UserQrCode=UserQrCode;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/user-qr-action/src/components/UserQrCode/UserQrCode.js"]={name:"UserQrCode",docgenInfo:UserQrCode.__docgenInfo,path:"packages/user-qr-action/src/components/UserQrCode/UserQrCode.js"});var components_UserQrCode=UserQrCode_UserQrCode,mapActionCreators={fetchData:function(){return{type:"qrCode/FETCH_DATA"}}},UserQrCodeContainer=Object(es.connect)((function(state){return{data:state.qrCode.data}}),mapActionCreators)(components_UserQrCode),initApp=function(id,input,events,publicPath){var content=react_default.a.createElement(UserQrCodeContainer,{selection:input.selection}),store=appFactory.a.createStore(reducers,reducers_sagas,input,"user-qr-action");return appFactory.a.createApp("user-qr-action",content,store,{input:input,events:events,actions:[],publicPath:publicPath,textResourceModules:["component","common","user-qr-action"]})},UserQrActionApp=function(props){return initApp(0,props).component};UserQrActionApp.propTypes={selection:prop_types_default.a.object};var main=UserQrActionApp},3712:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return main}));__webpack_require__(65);var defineProperty=__webpack_require__(5),defineProperty_default=__webpack_require__.n(defineProperty),react=__webpack_require__(0),react_default=__webpack_require__.n(react),src_selection=(__webpack_require__(18),__webpack_require__(616)),src_navigationStrategy=__webpack_require__(1071),appFactory=__webpack_require__(63),externalEvents=__webpack_require__(59),prop_types=__webpack_require__(11),prop_types_default=__webpack_require__.n(prop_types),es=__webpack_require__(25),taggedTemplateLiteral=__webpack_require__(17),taggedTemplateLiteral_default=__webpack_require__.n(taggedTemplateLiteral),src=__webpack_require__(6);function _templateObject(){var data=taggedTemplateLiteral_default()(["\n  text-align: center;\n  display: block;\n  margin-left: auto;\n  margin-right: auto;\n  width: 100%;\n  height: 40px;\n"]);return _templateObject=function(){return data},data}var StyledDiv=__webpack_require__(7).default.div(_templateObject()),CopyProgress_ref2=react_default.a.createElement(StyledDiv,null,react_default.a.createElement(src.p,{size:"30px"})),CopyProgress=function(_ref){var startCopy=_ref.startCopy;return Object(react.useEffect)((function(){startCopy()}),[]),CopyProgress_ref2};CopyProgress.displayName="CopyProgress",CopyProgress.__docgenInfo={description:"",methods:[],displayName:"CopyProgress",props:{startCopy:{type:{name:"func"},required:!0,description:""}}};var CopyProgress_CopyProgress=CopyProgress;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/copy/src/components/CopyProgress/CopyProgress.js"]={name:"CopyProgress",docgenInfo:CopyProgress.__docgenInfo,path:"packages/copy/src/components/CopyProgress/CopyProgress.js"});var mapActionCreators={startCopy:function(){return{type:"copy/START_COPY"}}},components_CopyProgress=Object(es.connect)(null,mapActionCreators)(CopyProgress_CopyProgress),helpers_typeof=(__webpack_require__(80),__webpack_require__(70),__webpack_require__(53),__webpack_require__(22),__webpack_require__(155),__webpack_require__(32),__webpack_require__(57),__webpack_require__(198)),typeof_default=__webpack_require__.n(helpers_typeof),slicedToArray=__webpack_require__(48),slicedToArray_default=__webpack_require__.n(slicedToArray),regenerator=__webpack_require__(3),regenerator_default=__webpack_require__.n(regenerator),redux_saga_effects_npm_proxy_esm=(__webpack_require__(36),__webpack_require__(1)),rest=__webpack_require__(23),src_form=__webpack_require__(85),_marked=regenerator_default.a.mark(sagas),_marked2=regenerator_default.a.mark(copy),_marked3=regenerator_default.a.mark(getValues),_marked4=regenerator_default.a.mark(getPaths),inputSelector=function(state){return state.input};function sagas(){return regenerator_default.a.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.j)("copy/START_COPY",copy)]);case 2:case"end":return _context.stop()}}),_marked)}function copy(){var _yield$select,selection,navigationStrategy,formName,entities,values;return regenerator_default.a.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,Object(redux_saga_effects_npm_proxy_esm.f)(inputSelector);case 2:return _yield$select=_context2.sent,selection=_yield$select.selection,navigationStrategy=_yield$select.navigationStrategy,formName=_yield$select.context.formName,_context2.next=8,Object(redux_saga_effects_npm_proxy_esm.b)(src_selection.a.getEntities,selection,rest.a.fetchEntities);case 8:if(1!==(entities=_context2.sent).keys.length){_context2.next=19;break}return _context2.next=12,Object(redux_saga_effects_npm_proxy_esm.b)(getValues,entities.entityName,entities.keys[0],formName);case 12:return values=_context2.sent,_context2.next=15,Object(redux_saga_effects_npm_proxy_esm.e)(externalEvents.a.fireExternalEvent("onCancel"));case 15:return _context2.next=17,Object(redux_saga_effects_npm_proxy_esm.b)(navigationStrategy.navigateToCreateRelative,null,{defaultValues:values});case 17:_context2.next=20;break;case 19:throw new Error("Invalid selection");case 20:case"end":return _context2.stop()}}),_marked2)}function getValues(entityName,entityKey,formName){var paths,sourceEntity;return regenerator_default.a.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,Object(redux_saga_effects_npm_proxy_esm.b)(getPaths,formName);case 2:return paths=_context3.sent,_context3.next=5,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.fetchEntity,entityName,entityKey,{paths:paths});case 5:return sourceEntity=_context3.sent,_context3.abrupt("return",Object.entries(sourceEntity.paths).map((function(_ref){var _ref2=slicedToArray_default()(_ref,2),id=_ref2[0],value=_ref2[1].value;return null===value||""===value||Array.isArray(value)&&0===value.length?null:{id:id,value:Array.isArray(value)?value.map((function(v){return v.key})):"object"===typeof_default()(value)?value.key:value}})).filter((function(d){return!!d})));case 7:case"end":return _context3.stop()}}),_marked3)}function getPaths(formName){var formDefinition,fields;return regenerator_default.a.wrap((function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.fetchForm,formName,"create");case 2:return formDefinition=_context4.sent,_context4.next=5,Object(redux_saga_effects_npm_proxy_esm.b)(src_form.a.getFieldDefinitions,formDefinition);case 5:return fields=_context4.sent,_context4.abrupt("return",fields.filter((function(f){return!0!==f.ignoreCopy})).map((function(e){return e.path})));case 7:case"end":return _context4.stop()}}),_marked4)}var reducers={},reducers_sagas=[sagas];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var EXTERNAL_EVENTS=["emitAction","onSuccess","onCancel","onError"],main_ref=react_default.a.createElement(components_CopyProgress,null),initApp=function(id,input,events,publicPath){var store=appFactory.a.createStore(reducers,reducers_sagas,input,"copy");return externalEvents.a.addToStore(store,events),appFactory.a.createApp("copy",main_ref,store,{input:input,events:events,actions:[],publicPath:publicPath,textResourceModules:["component","common","copy"]})};appFactory.a.registerAppInRegistry("copy",initApp);var CopyApp=function(props){var events=EXTERNAL_EVENTS.reduce((function(events,event){return props[event]&&(events[event]=props[event]),events}),{});return initApp(0,props,events).component};CopyApp.propTypes=function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({selection:src_selection.a.propType.isRequired,navigationStrategy:src_navigationStrategy.a.propTypes.isRequired,context:prop_types_default.a.shape({formName:prop_types_default.a.string})},EXTERNAL_EVENTS.reduce((function(propTypes,event){return propTypes[event]=prop_types_default.a.func,propTypes}),{}));var main=CopyApp}}]);
//# sourceMappingURL=actions.555131a87cca5cc22149.bundle.js.map