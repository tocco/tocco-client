(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{3321:function(module,exports,__webpack_require__){"use strict";const strictUriEncode=__webpack_require__(3326),decodeComponent=__webpack_require__(3327),splitOnFirst=__webpack_require__(3328);function encode(value,options){return options.encode?options.strict?strictUriEncode(value):encodeURIComponent(value):value}function decode(value,options){return options.decode?decodeComponent(value):value}function removeHash(input){const hashStart=input.indexOf("#");return-1!==hashStart&&(input=input.slice(0,hashStart)),input}function extract(input){const queryStart=(input=removeHash(input)).indexOf("?");return-1===queryStart?"":input.slice(queryStart+1)}function parseValue(value,options){return options.parseNumbers&&!Number.isNaN(Number(value))&&"string"==typeof value&&""!==value.trim()?value=Number(value):!options.parseBooleans||null===value||"true"!==value.toLowerCase()&&"false"!==value.toLowerCase()||(value="true"===value.toLowerCase()),value}function parse(input,options){const formatter=function parserForArrayFormat(options){let result;switch(options.arrayFormat){case"index":return(key,value,accumulator)=>{result=/\[(\d*)\]$/.exec(key),key=key.replace(/\[\d*\]$/,""),result?(void 0===accumulator[key]&&(accumulator[key]={}),accumulator[key][result[1]]=value):accumulator[key]=value};case"bracket":return(key,value,accumulator)=>{result=/(\[\])$/.exec(key),key=key.replace(/\[\]$/,""),result?void 0!==accumulator[key]?accumulator[key]=[].concat(accumulator[key],value):accumulator[key]=[value]:accumulator[key]=value};case"comma":return(key,value,accumulator)=>{const newValue="string"==typeof value&&value.split("").indexOf(",")>-1?value.split(","):value;accumulator[key]=newValue};default:return(key,value,accumulator)=>{void 0!==accumulator[key]?accumulator[key]=[].concat(accumulator[key],value):accumulator[key]=value}}}(options=Object.assign({decode:!0,sort:!0,arrayFormat:"none",parseNumbers:!1,parseBooleans:!1},options)),ret=Object.create(null);if("string"!=typeof input)return ret;if(!(input=input.trim().replace(/^[?#&]/,"")))return ret;for(const param of input.split("&")){let[key,value]=splitOnFirst(param.replace(/\+/g," "),"=");value=void 0===value?null:decode(value,options),formatter(decode(key,options),value,ret)}for(const key of Object.keys(ret)){const value=ret[key];if("object"==typeof value&&null!==value)for(const k of Object.keys(value))value[k]=parseValue(value[k],options);else ret[key]=parseValue(value,options)}return!1===options.sort?ret:(!0===options.sort?Object.keys(ret).sort():Object.keys(ret).sort(options.sort)).reduce((result,key)=>{const value=ret[key];return Boolean(value)&&"object"==typeof value&&!Array.isArray(value)?result[key]=function keysSorter(input){return Array.isArray(input)?input.sort():"object"==typeof input?keysSorter(Object.keys(input)).sort((a,b)=>Number(a)-Number(b)).map(key=>input[key]):input}(value):result[key]=value,result},Object.create(null))}exports.extract=extract,exports.parse=parse,exports.stringify=(object,options)=>{if(!object)return"";const formatter=function encoderForArrayFormat(options){switch(options.arrayFormat){case"index":return key=>(result,value)=>{const index=result.length;return void 0===value?result:null===value?[...result,[encode(key,options),"[",index,"]"].join("")]:[...result,[encode(key,options),"[",encode(index,options),"]=",encode(value,options)].join("")]};case"bracket":return key=>(result,value)=>void 0===value?result:null===value?[...result,[encode(key,options),"[]"].join("")]:[...result,[encode(key,options),"[]=",encode(value,options)].join("")];case"comma":return key=>(result,value,index)=>null==value||0===value.length?result:0===index?[[encode(key,options),"=",encode(value,options)].join("")]:[[result,encode(value,options)].join(",")];default:return key=>(result,value)=>void 0===value?result:null===value?[...result,encode(key,options)]:[...result,[encode(key,options),"=",encode(value,options)].join("")]}}(options=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},options)),keys=Object.keys(object);return!1!==options.sort&&keys.sort(options.sort),keys.map(key=>{const value=object[key];return void 0===value?"":null===value?encode(key,options):Array.isArray(value)?value.reduce(formatter(key),[]).join("&"):encode(key,options)+"="+encode(value,options)}).filter(x=>x.length>0).join("&")},exports.parseUrl=(input,options)=>({url:removeHash(input).split("?")[0]||"",query:parse(extract(input),options)})},3322:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(85),__webpack_require__(38),__webpack_require__(108);var query_string=__webpack_require__(3321),query_string_default=__webpack_require__.n(query_string),isObject=__webpack_require__(122),isObject_default=__webpack_require__.n(isObject),mapValues=__webpack_require__(483),mapValues_default=__webpack_require__.n(mapValues),hasJsonStructure=function(str){if("string"!=typeof str)return!1;try{var parsed=JSON.parse(str);return"[object Object]"===Object.prototype.toString.call(parsed)}catch(err){return!1}};__webpack_exports__.a={fromQueryString:function(queryString){var obj=query_string_default.a.parse(queryString);return mapValues_default()(obj,(function(value){return hasJsonStructure(value)?JSON.parse(value):value}))},toQueryString:function(obj){var stringifiedValues=mapValues_default()(obj,(function(value){return isObject_default()(value)?JSON.stringify(value):value}));return query_string_default.a.stringify(stringifiedValues)}}},3326:function(module,exports,__webpack_require__){"use strict";module.exports=str=>encodeURIComponent(str).replace(/[!'()*]/g,x=>`%${x.charCodeAt(0).toString(16).toUpperCase()}`)},3327:function(module,exports,__webpack_require__){"use strict";var singleMatcher=new RegExp("%[a-f0-9]{2}","gi"),multiMatcher=new RegExp("(%[a-f0-9]{2})+","gi");function decodeComponents(components,split){try{return decodeURIComponent(components.join(""))}catch(err){}if(1===components.length)return components;split=split||1;var left=components.slice(0,split),right=components.slice(split);return Array.prototype.concat.call([],decodeComponents(left),decodeComponents(right))}function decode(input){try{return decodeURIComponent(input)}catch(err){for(var tokens=input.match(singleMatcher),i=1;i<tokens.length;i++)tokens=(input=decodeComponents(tokens,i).join("")).match(singleMatcher);return input}}module.exports=function(encodedURI){if("string"!=typeof encodedURI)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof encodedURI+"`");try{return encodedURI=encodedURI.replace(/\+/g," "),decodeURIComponent(encodedURI)}catch(err){return function customDecodeURIComponent(input){for(var replaceMap={"%FE%FF":"��","%FF%FE":"��"},match=multiMatcher.exec(input);match;){try{replaceMap[match[0]]=decodeURIComponent(match[0])}catch(err){var result=decode(match[0]);result!==match[0]&&(replaceMap[match[0]]=result)}match=multiMatcher.exec(input)}replaceMap["%C2"]="�";for(var entries=Object.keys(replaceMap),i=0;i<entries.length;i++){var key=entries[i];input=input.replace(new RegExp(key,"g"),replaceMap[key])}return input}(encodedURI)}}},3328:function(module,exports,__webpack_require__){"use strict";module.exports=(string,separator)=>{if("string"!=typeof string||"string"!=typeof separator)throw new TypeError("Expected the arguments to be of type `string`");if(""===separator)return[string];const separatorIndex=string.indexOf(separator);return-1===separatorIndex?[string]:[string.slice(0,separatorIndex),string.slice(separatorIndex+separator.length)]}},3333:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(76);var _ACTION_HANDLERS,classCallCheck=__webpack_require__(53),classCallCheck_default=__webpack_require__.n(classCallCheck),createClass=__webpack_require__(61),createClass_default=__webpack_require__.n(createClass),possibleConstructorReturn=__webpack_require__(54),possibleConstructorReturn_default=__webpack_require__.n(possibleConstructorReturn),getPrototypeOf=__webpack_require__(55),getPrototypeOf_default=__webpack_require__.n(getPrototypeOf),inherits=__webpack_require__(56),inherits_default=__webpack_require__.n(inherits),react=(__webpack_require__(11),__webpack_require__(0)),react_default=__webpack_require__.n(react),reducer=__webpack_require__(23),root=__webpack_require__(99),appFactory=__webpack_require__(79),notifier=__webpack_require__(40),errorLogging=__webpack_require__(110),actionEmitter=__webpack_require__(109),externalEvents=__webpack_require__(69),actions=__webpack_require__(136),formData=__webpack_require__(242),keyDown=__webpack_require__(439),main=__webpack_require__(438),src_main=__webpack_require__(598),es_reducer=__webpack_require__(430),defineProperty=__webpack_require__(4),defineProperty_default=__webpack_require__.n(defineProperty),SET_LAST_SAVE=(__webpack_require__(365),__webpack_require__(85),"entityDetail/SET_LAST_SAVE"),setFormDefinition=function(formDefinition){return{type:"entityDetail/SET_FORM_DEFINITION",payload:{formDefinition:formDefinition}}},loadDetailView=function(modelPaths,entityId){return{type:"entityDetail/LOAD_DETAIL_VIEW",payload:{modelPaths:modelPaths,entityId:entityId}}},setEntity=function(entity){return{type:"entityDetail/SET_ENTITY",payload:{entity:entity}}},actions_submitForm=function(){return{type:"entityDetail/SUBMIT_FORM"}},setLastSave=function(){var lastSave=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Date.now();return{type:SET_LAST_SAVE,payload:{lastSave:lastSave}}},setEntityModel=function(entityModel){return{type:"entityDetail/SET_ENTITY_MODEL",payload:{entityModel:entityModel}}},unloadDetailView=function(){return{type:"entityDetail/UNLOAD_DETAIL_VIEW"}},navigateToCreate=function(relationName){return{type:"entityDetail/NAVIGATE_TO_CREATE",payload:{relationName:relationName}}},setFieldDefinitions=function(fieldDefinitions){return{type:"entityDetail/SET_FIELD_DEFINITIONS",payload:{fieldDefinitions:fieldDefinitions}}},navigateToAction=function(definition,selection){return{type:"entityDetail/NAVIGATE_TO_ACTION",payload:{definition:definition,selection:selection}}},ACTION_HANDLERS=(_ACTION_HANDLERS={},defineProperty_default()(_ACTION_HANDLERS,"entityDetail/SET_ENTITY_NAME",reducer.a.singleTransferReducer("entityName")),defineProperty_default()(_ACTION_HANDLERS,"entityDetail/SET_FORM_NAME",reducer.a.singleTransferReducer("formName")),defineProperty_default()(_ACTION_HANDLERS,"entityDetail/SET_ENTITY_ID",reducer.a.singleTransferReducer("entityId")),defineProperty_default()(_ACTION_HANDLERS,"entityDetail/SET_MODE",reducer.a.singleTransferReducer("mode")),defineProperty_default()(_ACTION_HANDLERS,"entityDetail/SET_FORM_DEFINITION",reducer.a.singleTransferReducer("formDefinition")),defineProperty_default()(_ACTION_HANDLERS,"entityDetail/SET_ENTITY",reducer.a.singleTransferReducer("entity")),defineProperty_default()(_ACTION_HANDLERS,SET_LAST_SAVE,reducer.a.singleTransferReducer("lastSave")),defineProperty_default()(_ACTION_HANDLERS,"entityDetail/SET_ENTITY_MODEL",reducer.a.singleTransferReducer("entityModel")),defineProperty_default()(_ACTION_HANDLERS,"entityDetail/SET_TOUCHED",reducer.a.singleTransferReducer("touched")),defineProperty_default()(_ACTION_HANDLERS,"entityDetail/SET_APP_ID",reducer.a.singleTransferReducer("appId")),defineProperty_default()(_ACTION_HANDLERS,"entityDetail/SET_DEFAULT_VALUES",reducer.a.singleTransferReducer("defaultValues")),defineProperty_default()(_ACTION_HANDLERS,"entityDetail/SET_FIELD_DEFINITIONS",reducer.a.singleTransferReducer("fieldDefinitions")),_ACTION_HANDLERS),initialState={appId:"",entityName:"",formName:"",mode:"update",formDefinition:{},entity:{},entityModel:{},touched:!1,defaultValues:{},fieldDefinitions:[]};function reducer_reducer(){var state=0<arguments.length&&void 0!==arguments[0]?arguments[0]:initialState,action=1<arguments.length?arguments[1]:void 0,handler=ACTION_HANDLERS[action.type];return handler?handler(state,action):state}reducer_reducer.__docgenInfo={description:"",methods:[],displayName:"reducer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/entity-detail/src/modules/entityDetail/reducer.js"]={name:"reducer",docgenInfo:reducer_reducer.__docgenInfo,path:"packages/entity-detail/src/modules/entityDetail/reducer.js"});__webpack_require__(16),__webpack_require__(24),__webpack_require__(26),__webpack_require__(159),__webpack_require__(19),__webpack_require__(103),__webpack_require__(77),__webpack_require__(118),__webpack_require__(25),__webpack_require__(27),__webpack_require__(22),__webpack_require__(31),__webpack_require__(32),__webpack_require__(15),__webpack_require__(113),__webpack_require__(20);var toConsumableArray=__webpack_require__(30),toConsumableArray_default=__webpack_require__.n(toConsumableArray),regenerator=__webpack_require__(2),regenerator_default=__webpack_require__.n(regenerator),es_actions=(__webpack_require__(42),__webpack_require__(107)),SubmissionError=__webpack_require__(429),getFormValues=__webpack_require__(355),es_isValid=__webpack_require__(956),getFormSyncErrors=__webpack_require__(605),getFormAsyncErrors=__webpack_require__(606),getFormSubmitErrors=__webpack_require__(604),src_form=__webpack_require__(101),rest=__webpack_require__(33),remoteEvents=__webpack_require__(298),api=__webpack_require__(123),redux_saga_effects_npm_proxy_esm=__webpack_require__(1),_marked=(__webpack_require__(60),__webpack_require__(126),regenerator_default.a.mark(updateEntity)),_marked2=regenerator_default.a.mark(createEntity);function updateEntity(entity){var paths,options,resource,resp,_args=arguments;return regenerator_default.a.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return paths=1<_args.length&&void 0!==_args[1]?_args[1]:[],options={method:"PATCH",queryParams:{_paths:paths.join(",")},body:entity,acceptedErrorCodes:["VALIDATION_FAILED"]},resource="entities/2.0/".concat(entity.model,"/").concat(entity.key),_context.next=5,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.requestSaga,resource,options);case 5:if("VALIDATION_FAILED"!==(resp=_context.sent).body.errorCode){_context.next=8;break}throw new SubmissionError.a(src_form.a.validationErrorToFormError(entity,resp.body.errors));case 8:return _context.abrupt("return",resp.body);case 9:case"end":return _context.stop()}}),_marked)}function createEntity(entity){var paths,options,resource,resp,location,id,_args2=arguments;return regenerator_default.a.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return paths=1<_args2.length&&void 0!==_args2[1]?_args2[1]:[],options={method:"POST",queryParams:{_paths:paths.join(",")},body:entity,acceptedErrorCodes:["VALIDATION_FAILED"]},resource="entities/2.0/".concat(entity.model),_context2.next=5,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.requestSaga,resource,options);case 5:if(201!==(resp=_context2.sent).status){_context2.next=12;break}return location=resp.headers.get("Location"),id=location.split("/").pop(),_context2.abrupt("return",id);case 12:if(!resp.body||"VALIDATION_FAILED"!==resp.body.errorCode){_context2.next=14;break}throw new SubmissionError.a(src_form.a.validationErrorToFormError(entity,resp.body.errors));case 14:throw new Error("unexpected error during save",resp);case 15:case"end":return _context2.stop()}}),_marked2)}var modes_CREATE="create",modes_UPDATE="update";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}var sagas_marked=regenerator_default.a.mark(sagas),sagas_marked2=regenerator_default.a.mark(loadDetailFormDefinition),_marked3=regenerator_default.a.mark(loadEntity),_marked4=regenerator_default.a.mark(sagas_unloadDetailView),_marked5=regenerator_default.a.mark(loadEntityModel),_marked6=regenerator_default.a.mark(sagas_loadDetailView),_marked7=regenerator_default.a.mark(updateFormSubmit),_marked8=regenerator_default.a.mark(createFormSubmit),_marked9=regenerator_default.a.mark(sagas_touchAllFields),_marked10=regenerator_default.a.mark(handleSubmitError),_marked11=regenerator_default.a.mark(getEntityForSubmit),_marked13=regenerator_default.a.mark(getFormErrors),_marked14=regenerator_default.a.mark(focusErrorField),_marked15=regenerator_default.a.mark(handleInvalidForm),_marked16=regenerator_default.a.mark(sagas_submitForm),_marked17=regenerator_default.a.mark(sagas_fireTouched),_marked18=regenerator_default.a.mark(showNotification),_marked19=regenerator_default.a.mark(loadDisplayExpressions),_marked20=regenerator_default.a.mark(loadRelationDisplays),_marked21=regenerator_default.a.mark(enhanceEntityWithDisplayExpressions),_marked22=regenerator_default.a.mark(enhanceEntityWithDisplays),_marked23=regenerator_default.a.mark(loadData),_marked24=regenerator_default.a.mark(sagas_navigateToCreate),_marked25=regenerator_default.a.mark(sagas_navigateToAction),_marked26=regenerator_default.a.mark(remoteEvent),formInitialValueSelector=function(state,formId){return state.form[formId].initial},entityDetailSelector=function(state){return state.entityDetail},FORM_ID="detailForm";function sagas(){return regenerator_default.a.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.j)("entityDetail/LOAD_DETAIL_VIEW",sagas_loadDetailView),Object(redux_saga_effects_npm_proxy_esm.j)("entityDetail/UNLOAD_DETAIL_VIEW",sagas_unloadDetailView),Object(redux_saga_effects_npm_proxy_esm.j)("entityDetail/TOCH_ALL_FIELDS",sagas_touchAllFields),Object(redux_saga_effects_npm_proxy_esm.i)("entityDetail/SUBMIT_FORM",sagas_submitForm),Object(redux_saga_effects_npm_proxy_esm.i)("entityDetail/FIRE_TOUCHED",sagas_fireTouched),Object(redux_saga_effects_npm_proxy_esm.i)("entityDetail/NAVIGATE_TO_CREATE",sagas_navigateToCreate),Object(redux_saga_effects_npm_proxy_esm.i)(remoteEvents.a.REMOTE_EVENT,remoteEvent),Object(redux_saga_effects_npm_proxy_esm.j)("entityDetail/NAVIGATE_TO_ACTION",sagas_navigateToAction)]);case 2:case"end":return _context.stop()}}),sagas_marked)}function loadDetailFormDefinition(formName,mode){var formDefinition,fieldDefinitions;return regenerator_default.a.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.fetchForm,formName,mode);case 2:return formDefinition=_context2.sent,_context2.next=5,Object(redux_saga_effects_npm_proxy_esm.e)(setFormDefinition(formDefinition));case 5:return _context2.next=7,Object(redux_saga_effects_npm_proxy_esm.b)(src_form.a.getFieldDefinitions,formDefinition);case 7:return fieldDefinitions=_context2.sent,_context2.next=10,Object(redux_saga_effects_npm_proxy_esm.e)(setFieldDefinitions(fieldDefinitions));case 10:return _context2.abrupt("return",{formDefinition:formDefinition,fieldDefinitions:fieldDefinitions});case 11:case"end":return _context2.stop()}}),sagas_marked2)}function loadEntity(entityName,entityId,fieldDefinitions){var paths,entity;return regenerator_default.a.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,Object(redux_saga_effects_npm_proxy_esm.b)(src_form.a.getUsedPaths,fieldDefinitions);case 2:return paths=_context3.sent,_context3.next=5,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.fetchEntity,entityName,entityId,{paths:paths});case 5:return entity=_context3.sent,_context3.next=8,Object(redux_saga_effects_npm_proxy_esm.e)(setEntity(entity));case 8:return _context3.abrupt("return",entity);case 9:case"end":return _context3.stop()}}),_marked3)}function sagas_unloadDetailView(){return regenerator_default.a.wrap((function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,Object(redux_saga_effects_npm_proxy_esm.e)(setEntity(null));case 2:return _context4.next=4,Object(redux_saga_effects_npm_proxy_esm.e)(es_actions.a.destroy(FORM_ID));case 4:case"end":return _context4.stop()}}),_marked4)}function loadEntityModel(entityName){var entityModel;return regenerator_default.a.wrap((function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.fetchModel,entityName);case 2:return entityModel=_context5.sent,_context5.next=5,Object(redux_saga_effects_npm_proxy_esm.e)(setEntityModel(entityModel));case 5:return _context5.abrupt("return",entityModel);case 6:case"end":return _context5.stop()}}),_marked5)}function sagas_loadDetailView(){var _ref,entityName,formName,mode,defaultValues,model,_ref2,fieldDefinitions,formDefaultValues,inputDefaultValues,defaultValuesFields,flattenEntity,formValues;return regenerator_default.a.wrap((function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,Object(redux_saga_effects_npm_proxy_esm.f)(entityDetailSelector);case 2:return _ref=_context6.sent,entityName=_ref.entityName,formName=_ref.formName,mode=_ref.mode,defaultValues=_ref.defaultValues,_context6.next=9,Object(redux_saga_effects_npm_proxy_esm.b)(loadEntityModel,entityName);case 9:return model=_context6.sent,_context6.next=12,Object(redux_saga_effects_npm_proxy_esm.b)(loadDetailFormDefinition,formName,mode);case 12:if(_ref2=_context6.sent,fieldDefinitions=_ref2.fieldDefinitions,mode!==modes_CREATE){_context6.next=39;break}return _context6.next=17,Object(redux_saga_effects_npm_proxy_esm.e)(setEntity({paths:{},model:entityName}));case 17:return _context6.next=19,Object(redux_saga_effects_npm_proxy_esm.b)(src_form.a.getDefaultValues,fieldDefinitions);case 19:if(formDefaultValues=_context6.sent,!defaultValues){_context6.next=26;break}return _context6.next=23,Object(redux_saga_effects_npm_proxy_esm.b)(src_form.a.transformInputValues,defaultValues,model);case 23:_context6.t0=_context6.sent,_context6.next=27;break;case 26:_context6.t0={};case 27:return inputDefaultValues=_context6.t0,defaultValuesFields=_objectSpread({},formDefaultValues,{},inputDefaultValues),_context6.next=31,Object(redux_saga_effects_npm_proxy_esm.b)(api.a.getFlattenEntity,{model:entityName});case 31:return flattenEntity=_context6.sent,_context6.next=34,Object(redux_saga_effects_npm_proxy_esm.b)(src_form.a.entityToFormValues,_objectSpread({},flattenEntity,{},defaultValuesFields));case 34:return formValues=_context6.sent,_context6.next=37,Object(redux_saga_effects_npm_proxy_esm.e)(es_actions.a.initialize(FORM_ID,formValues));case 37:_context6.next=41;break;case 39:return _context6.next=41,Object(redux_saga_effects_npm_proxy_esm.b)(loadData);case 41:case"end":return _context6.stop()}}),_marked6)}function updateFormSubmit(entity){return regenerator_default.a.wrap((function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,Object(redux_saga_effects_npm_proxy_esm.b)(updateEntity,entity);case 2:return _context7.next=4,Object(redux_saga_effects_npm_proxy_esm.b)(loadData);case 4:return _context7.next=6,Object(redux_saga_effects_npm_proxy_esm.b)(showNotification,"success","saveSuccessfulTitle","saveSuccessfulMessage");case 6:return _context7.next=8,Object(redux_saga_effects_npm_proxy_esm.e)(setLastSave());case 8:return _context7.next=10,Object(redux_saga_effects_npm_proxy_esm.e)(es_actions.a.stopSubmit(FORM_ID));case 10:case"end":return _context7.stop()}}),_marked7)}function createFormSubmit(entity){var createdEntityId;return regenerator_default.a.wrap((function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return _context8.next=2,Object(redux_saga_effects_npm_proxy_esm.b)(createEntity,entity);case 2:return createdEntityId=_context8.sent,_context8.next=5,Object(redux_saga_effects_npm_proxy_esm.e)(externalEvents.a.fireExternalEvent("onEntityCreated",{id:createdEntityId}));case 5:return _context8.next=7,Object(redux_saga_effects_npm_proxy_esm.b)(showNotification,"success","createSuccessfulTitle","createSuccessfulMessage");case 7:case"end":return _context8.stop()}}),_marked8)}function sagas_touchAllFields(){var _ref3,fieldDefinitions;return regenerator_default.a.wrap((function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return _context9.next=2,Object(redux_saga_effects_npm_proxy_esm.f)(entityDetailSelector);case 2:return _ref3=_context9.sent,fieldDefinitions=_ref3.fieldDefinitions,_context9.next=6,Object(redux_saga_effects_npm_proxy_esm.e)(es_actions.a.touch.apply(es_actions.a,[FORM_ID].concat(toConsumableArray_default()(fieldDefinitions.map((function(f){return src_form.a.transformFieldName(f.path||f.id)}))))));case 6:case"end":return _context9.stop()}}),_marked9)}function handleSubmitError(error){var validationErrors,message;return regenerator_default.a.wrap((function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:if(!(error instanceof SubmissionError.a)){_context10.next=13;break}return _context10.next=3,Object(redux_saga_effects_npm_proxy_esm.e)(es_actions.a.stopSubmit(FORM_ID,error.errors));case 3:return _context10.next=5,Object(redux_saga_effects_npm_proxy_esm.b)(handleInvalidForm);case 5:return _context10.next=7,Object(redux_saga_effects_npm_proxy_esm.b)(src_form.a.formErrorsUtil.getValidatorErrors,error.errors);case 7:return validationErrors=_context10.sent,message=validationErrors&&0<validationErrors.length?validationErrors.join("<br>"):"client.entity-detail.saveAbortedMessage",_context10.next=11,Object(redux_saga_effects_npm_proxy_esm.e)(notifier.a.info("warning","client.entity-detail.saveAbortedTitle",message,null,5e3));case 11:_context10.next=18;break;case 13:if(error instanceof rest.a.ClientQuestionCancelledException){_context10.next=18;break}return _context10.next=16,Object(redux_saga_effects_npm_proxy_esm.e)(errorLogging.a.logError("client.common.unexpectedError","client.entity-detail.saveError",error));case 16:return _context10.next=18,Object(redux_saga_effects_npm_proxy_esm.e)(es_actions.a.stopSubmit(FORM_ID));case 18:case"end":return _context10.stop()}}),_marked10)}function getEntityForSubmit(){var formValues,initialFormValues,_ref4,mode,initialValues,dirtyFields,flattenEntity;return regenerator_default.a.wrap((function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:return _context11.next=2,Object(redux_saga_effects_npm_proxy_esm.f)(Object(getFormValues.a)(FORM_ID));case 2:return formValues=_context11.sent,_context11.next=5,Object(redux_saga_effects_npm_proxy_esm.f)(formInitialValueSelector,FORM_ID);case 5:return initialFormValues=_context11.sent,_context11.next=8,Object(redux_saga_effects_npm_proxy_esm.f)(entityDetailSelector);case 8:return _ref4=_context11.sent,mode=_ref4.mode,initialValues=mode===modes_CREATE?{}:initialFormValues,_context11.next=13,Object(redux_saga_effects_npm_proxy_esm.e)(es_actions.a.startSubmit(FORM_ID));case 13:return _context11.next=15,Object(redux_saga_effects_npm_proxy_esm.b)(src_form.a.submitValidation,formValues,initialValues,mode);case 15:return _context11.next=17,Object(redux_saga_effects_npm_proxy_esm.b)(src_form.a.getDirtyFields,initialValues,formValues,mode===modes_CREATE);case 17:return dirtyFields=_context11.sent,_context11.next=20,Object(redux_saga_effects_npm_proxy_esm.b)(src_form.a.formValuesToFlattenEntity,formValues);case 20:return flattenEntity=_context11.sent,_context11.next=23,Object(redux_saga_effects_npm_proxy_esm.b)(api.a.toEntity,flattenEntity,dirtyFields);case 23:return _context11.abrupt("return",_context11.sent);case 24:case"end":return _context11.stop()}}),_marked11)}function getFormErrors(){return regenerator_default.a.wrap((function(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:return _context13.t0=_objectSpread,_context13.t1={},_context13.next=4,Object(redux_saga_effects_npm_proxy_esm.f)(Object(getFormSyncErrors.a)(FORM_ID));case 4:return _context13.t2=_context13.sent,_context13.t3={},_context13.next=8,Object(redux_saga_effects_npm_proxy_esm.f)(Object(getFormAsyncErrors.a)(FORM_ID));case 8:return _context13.t4=_context13.sent,_context13.t5={},_context13.next=12,Object(redux_saga_effects_npm_proxy_esm.f)(Object(getFormSubmitErrors.a)(FORM_ID));case 12:return _context13.t6=_context13.sent,_context13.abrupt("return",(0,_context13.t0)(_context13.t1,_context13.t2,_context13.t3,_context13.t4,_context13.t5,_context13.t6));case 14:case"end":return _context13.stop()}}),_marked13)}function focusErrorField(){var formErrors,firstErrorField,element;return regenerator_default.a.wrap((function(_context14){for(;;)switch(_context14.prev=_context14.next){case 0:return _context14.next=2,Object(redux_saga_effects_npm_proxy_esm.b)(getFormErrors);case 2:formErrors=_context14.sent,(firstErrorField=src_form.a.formErrorsUtil.getFirstErrorField(formErrors))&&(element=document.getElementById(src_form.a.getFieldId(FORM_ID,firstErrorField)))&&element.focus();case 5:case"end":return _context14.stop()}}),_marked14)}function handleInvalidForm(){return regenerator_default.a.wrap((function(_context15){for(;;)switch(_context15.prev=_context15.next){case 0:return _context15.next=2,Object(redux_saga_effects_npm_proxy_esm.b)(sagas_touchAllFields);case 2:return _context15.next=4,Object(redux_saga_effects_npm_proxy_esm.b)(focusErrorField);case 4:case"end":return _context15.stop()}}),_marked15)}function sagas_submitForm(){var _ref6,mode,entity;return regenerator_default.a.wrap((function(_context16){for(;;)switch(_context16.prev=_context16.next){case 0:return _context16.prev=0,_context16.next=3,Object(redux_saga_effects_npm_proxy_esm.f)(Object(es_isValid.a)(FORM_ID));case 3:if(_context16.sent){_context16.next=9;break}return _context16.next=7,Object(redux_saga_effects_npm_proxy_esm.b)(handleInvalidForm);case 7:_context16.next=24;break;case 9:return _context16.next=11,Object(redux_saga_effects_npm_proxy_esm.f)(entityDetailSelector);case 11:return _ref6=_context16.sent,mode=_ref6.mode,_context16.next=15,Object(redux_saga_effects_npm_proxy_esm.b)(getEntityForSubmit);case 15:if(entity=_context16.sent,mode!==modes_UPDATE){_context16.next=21;break}return _context16.next=19,Object(redux_saga_effects_npm_proxy_esm.b)(updateFormSubmit,entity);case 19:_context16.next=24;break;case 21:if(mode!==modes_CREATE){_context16.next=24;break}return _context16.next=24,Object(redux_saga_effects_npm_proxy_esm.b)(createFormSubmit,entity);case 24:_context16.next=30;break;case 26:return _context16.prev=26,_context16.t0=_context16.catch(0),_context16.next=30,Object(redux_saga_effects_npm_proxy_esm.b)(handleSubmitError,_context16.t0);case 30:case"end":return _context16.stop()}}),_marked16,null,[[0,26]])}function sagas_fireTouched(_ref7){var payload,actionTouched,_ref8,stateTouched;return regenerator_default.a.wrap((function(_context17){for(;;)switch(_context17.prev=_context17.next){case 0:return payload=_ref7.payload,actionTouched=payload.touched,_context17.next=4,Object(redux_saga_effects_npm_proxy_esm.f)(entityDetailSelector);case 4:if(_ref8=_context17.sent,stateTouched=_ref8.touched,actionTouched===stateTouched){_context17.next=11;break}return _context17.next=9,Object(redux_saga_effects_npm_proxy_esm.e)(externalEvents.a.fireExternalEvent("onTouchedChange",{touched:actionTouched}));case 9:return _context17.next=11,Object(redux_saga_effects_npm_proxy_esm.e)({type:"entityDetail/SET_TOUCHED",payload:{touched:actionTouched}});case 11:case"end":return _context17.stop()}}),_marked17)}function showNotification(type,titleResourceName,messageResourceName){var duration,_args18=arguments;return regenerator_default.a.wrap((function(_context18){for(;;)switch(_context18.prev=_context18.next){case 0:return duration=3<_args18.length&&void 0!==_args18[3]?_args18[3]:2e3,_context18.next=3,Object(redux_saga_effects_npm_proxy_esm.e)(notifier.a.info(type,"client.entity-detail.".concat(titleResourceName),"client.entity-detail.".concat(messageResourceName),null,duration));case 3:case"end":return _context18.stop()}}),_marked18)}function loadDisplayExpressions(formName,mode,paths,entities){var keys,result;return regenerator_default.a.wrap((function(_context19){for(;;)switch(_context19.prev=_context19.next){case 0:if(!(paths&&0<paths.length)){_context19.next=6;break}return keys=entities.map((function(e){return e.__key})),_context19.next=4,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.fetchDisplayExpressions,formName,mode,keys,paths);case 4:return result=_context19.sent,_context19.abrupt("return",result);case 6:case"end":return _context19.stop()}}),_marked19)}function loadRelationDisplays(relationFields,entities){var request;return regenerator_default.a.wrap((function(_context20){for(;;)switch(_context20.prev=_context20.next){case 0:if(!(relationFields&&0<relationFields.length)){_context20.next=7;break}return _context20.next=3,Object(redux_saga_effects_npm_proxy_esm.b)(api.a.getPathDisplayRequest,entities,relationFields,{});case 3:return request=_context20.sent,_context20.next=6,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.fetchDisplays,request);case 6:return _context20.abrupt("return",_context20.sent);case 7:case"end":return _context20.stop()}}),_marked20)}function enhanceEntityWithDisplayExpressions(entity){var _ref9,fieldDefinitions,formName,mode,displayExpressions,displayExpressionsL;return regenerator_default.a.wrap((function(_context21){for(;;)switch(_context21.prev=_context21.next){case 0:return _context21.next=2,Object(redux_saga_effects_npm_proxy_esm.f)(entityDetailSelector);case 2:return _ref9=_context21.sent,fieldDefinitions=_ref9.fieldDefinitions,formName=_ref9.formName,mode=_ref9.mode,displayExpressions=fieldDefinitions.filter((function(f){return"display"===f.componentType})).map((function(f){return f.id})),_context21.next=9,Object(redux_saga_effects_npm_proxy_esm.b)(loadDisplayExpressions,formName,mode,displayExpressions,[entity]);case 9:(displayExpressionsL=_context21.sent)&&Object.keys(displayExpressionsL[entity.__key]).forEach((function(dE){entity[dE]=displayExpressionsL[entity.__key][dE]}));case 11:case"end":return _context21.stop()}}),_marked21)}function enhanceEntityWithDisplays(entity){var _ref10,fieldDefinitions,relationFields,displays;return regenerator_default.a.wrap((function(_context22){for(;;)switch(_context22.prev=_context22.next){case 0:return _context22.next=2,Object(redux_saga_effects_npm_proxy_esm.f)(entityDetailSelector);case 2:return _ref10=_context22.sent,fieldDefinitions=_ref10.fieldDefinitions,relationFields=fieldDefinitions.filter((function(f){return api.a.relationFieldTypes.includes(f.dataType)})).map((function(f){return f.path})),_context22.next=7,Object(redux_saga_effects_npm_proxy_esm.b)(loadRelationDisplays,relationFields,[entity]);case 7:displays=_context22.sent,relationFields.forEach((function(relationField){var value=entity[relationField];if(value){var newValue=Array.isArray(value)?value.map((function(v2){return _objectSpread({},v2,{display:displays[v2.model][v2.key]})})):_objectSpread({},value,{display:displays[value.model][value.key]});entity[relationField]=newValue}}));case 9:case"end":return _context22.stop()}}),_marked22)}function loadData(){var reset,_ref11,entityName,entityId,fieldDefinitions,entity,flattenEntity,formValues,options,_args23=arguments;return regenerator_default.a.wrap((function(_context23){for(;;)switch(_context23.prev=_context23.next){case 0:return reset=!(0<_args23.length&&void 0!==_args23[0])||_args23[0],_context23.next=3,Object(redux_saga_effects_npm_proxy_esm.f)(entityDetailSelector);case 3:return _ref11=_context23.sent,entityName=_ref11.entityName,entityId=_ref11.entityId,fieldDefinitions=_ref11.fieldDefinitions,_context23.next=9,Object(redux_saga_effects_npm_proxy_esm.b)(loadEntity,entityName,entityId,fieldDefinitions);case 9:return entity=_context23.sent,_context23.next=12,Object(redux_saga_effects_npm_proxy_esm.b)(api.a.getFlattenEntity,entity);case 12:return flattenEntity=_context23.sent,_context23.next=15,Object(redux_saga_effects_npm_proxy_esm.b)(enhanceEntityWithDisplayExpressions,flattenEntity);case 15:return _context23.next=17,Object(redux_saga_effects_npm_proxy_esm.b)(enhanceEntityWithDisplays,flattenEntity);case 17:return _context23.next=19,Object(redux_saga_effects_npm_proxy_esm.b)(src_form.a.entityToFormValues,flattenEntity);case 19:return formValues=_context23.sent,options=reset?{}:{keepDirty:!0,keepValues:!1},_context23.next=23,Object(redux_saga_effects_npm_proxy_esm.e)(es_actions.a.initialize(FORM_ID,formValues,options));case 23:case"end":return _context23.stop()}}),_marked23)}function sagas_navigateToCreate(_ref12){var payload;return regenerator_default.a.wrap((function(_context24){for(;;)switch(_context24.prev=_context24.next){case 0:return payload=_ref12.payload,_context24.next=3,Object(redux_saga_effects_npm_proxy_esm.e)(externalEvents.a.fireExternalEvent("onNavigateToCreate",payload.relationName));case 3:case"end":return _context24.stop()}}),_marked24)}function sagas_navigateToAction(_ref13){var payload,definition,selection;return regenerator_default.a.wrap((function(_context25){for(;;)switch(_context25.prev=_context25.next){case 0:return payload=_ref13.payload,definition=payload.definition,selection=payload.selection,_context25.next=4,Object(redux_saga_effects_npm_proxy_esm.e)(externalEvents.a.fireExternalEvent("onNavigateToAction",{definition:definition,selection:selection}));case 4:case"end":return _context25.stop()}}),_marked25)}var isCurrentEntity=function(event,entityName,entityId){return!!event.payload.entities.find((function(entity){return entity.entityName===entityName&&entity.key===entityId}))||event.payload.parent&&event.payload.parent.model===entityName&&event.payload.parent.key===entityId};function remoteEvent(action){var event,_ref14,entityName,entityId;return regenerator_default.a.wrap((function(_context26){for(;;)switch(_context26.prev=_context26.next){case 0:return event=action.payload.event,_context26.next=3,Object(redux_saga_effects_npm_proxy_esm.f)(entityDetailSelector);case 3:if(_ref14=_context26.sent,entityName=_ref14.entityName,entityId=_ref14.entityId,!isCurrentEntity(event,entityName,entityId)){_context26.next=16;break}_context26.t0=event.type,_context26.next="entity-delete-event"===_context26.t0?10:"entity-update-event"===_context26.t0?13:16;break;case 10:return _context26.next=12,Object(redux_saga_effects_npm_proxy_esm.e)(externalEvents.a.fireExternalEvent("onEntityDeleted"));case 12:return _context26.abrupt("break",16);case 13:return _context26.next=15,Object(redux_saga_effects_npm_proxy_esm.b)(loadData,!1);case 15:return _context26.abrupt("break",16);case 16:case"end":return _context26.stop()}}),_marked26)}var reducers={entityDetail:reducer_reducer,form:es_reducer.a},reducers_sagas=[sagas],es=__webpack_require__(36),index_es=__webpack_require__(12),es_getFormInitialValues=function createGetFormInitialValues(_ref){var getIn=_ref.getIn;return function(form,getFormState){return function(state){var nonNullGetFormState=getFormState||function(state){return getIn(state,"form")};return getIn(nonNullGetFormState(state),form+".initial")}}}(__webpack_require__(67).a),assertThisInitialized=__webpack_require__(58),assertThisInitialized_default=__webpack_require__.n(assertThisInitialized),isEmpty=__webpack_require__(296),isEmpty_default=__webpack_require__.n(isEmpty),src=__webpack_require__(5),get=__webpack_require__(29),get_default=__webpack_require__.n(get),taggedTemplateLiteral=__webpack_require__(28),taggedTemplateLiteral_default=__webpack_require__.n(taggedTemplateLiteral),reduxForm=__webpack_require__(297),styled_components_browser_esm=__webpack_require__(7),viewPersistor=__webpack_require__(3323);function _templateObject(){var data=taggedTemplateLiteral_default()(["\n  width: 100%;\n"]);return _templateObject=function(){return data},data}var StyledListApp=styled_components_browser_esm.default.div(_templateObject()),SubGrid=function(props){var formBase="".concat(props.detailFormName,"_").concat(props.formField.path),id="".concat(props.appId,"-subgrid-").concat(props.entityName,"-").concat(props.entityKey,"-").concat(props.formField.reverseRelation);return react_default.a.createElement(StyledListApp,null,react_default.a.createElement(src_main.a,{id:id,entityName:props.formField.targetEntity,formName:formBase,limit:props.limit,searchFormType:props.showSearchForm?"basic":"none",onRowClick:function onRowClick(e){props.onRowClick&&props.onRowClick({id:e.id,gridName:props.formField.path,relationName:props.formField.path})},onNavigateToCreate:function onNavigateToCreate(){props.navigateToCreate(props.formField.path)},parent:{key:props.entityKey,reverseRelationName:props.formField.reverseRelation,model:props.entityName},emitAction:props.emitAction,store:viewPersistor.a.viewInfoSelector(id).store,onStoreCreate:function onStoreCreate(store){viewPersistor.a.persistViewInfo(id,{store:store})}}))};SubGrid.displayName="SubGrid",SubGrid.defaultProps={limit:5},SubGrid.__docgenInfo={description:"",methods:[],displayName:"SubGrid",props:{limit:{defaultValue:{value:"5",computed:!1},type:{name:"number"},required:!1,description:""},entityKey:{type:{name:"union",value:[{name:"string"},{name:"number"}]},required:!1,description:""},entityName:{type:{name:"string"},required:!0,description:""},detailFormName:{type:{name:"string"},required:!0,description:""},formField:{type:{name:"shape",value:{path:{name:"string",required:!1},targetEntity:{name:"string",required:!1},reverseRelation:{name:"string",required:!1}}},required:!0,description:""},onRowClick:{type:{name:"func"},required:!1,description:""},navigateToCreate:{type:{name:"func"},required:!0,description:""},showSubGridsCreateButton:{type:{name:"bool"},required:!1,description:""},appId:{type:{name:"string"},required:!1,description:""},showSearchForm:{type:{name:"bool"},required:!1,description:""},emitAction:{type:{name:"func"},required:!0,description:""}}};var SubGrid_SubGrid=SubGrid;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/entity-detail/src/components/SubGrid/SubGrid.js"]={name:"SubGrid",docgenInfo:SubGrid.__docgenInfo,path:"packages/entity-detail/src/components/SubGrid/SubGrid.js"});var components_SubGrid=SubGrid_SubGrid,mapActionCreators={onRowClick:function onRowClick(e){return externalEvents.a.fireExternalEvent("onSubGridRowClick",{id:e.id,gridName:e.gridName,relationName:e.relationName})},navigateToCreate:navigateToCreate,emitAction:function emitAction(action){return actionEmitter.a.dispatchEmittedAction(action)}},SubGridContainer=Object(es.connect)((function(state){return{appId:state.entityDetail.appId,entityKey:state.entityDetail.entity.key,entityName:state.entityDetail.entity.model,detailFormName:state.entityDetail.formDefinition.id}}),mapActionCreators)(components_SubGrid),subGrid=function(formField,key){return react_default.a.createElement(SubGridContainer,{key:key,formField:formField,showSearchForm:formField.showSearchForm,limit:formField.limit||void 0})},helpers_extends=__webpack_require__(43),extends_default=__webpack_require__.n(helpers_extends),ErrorBox_ref2=react_default.a.createElement(index_es.FormattedMessage,{id:"client.entity-detail.invalidFieldsError"}),ErrorBox_ref3=react_default.a.createElement(index_es.FormattedMessage,{id:"client.entity-detail.validatorErrors"}),ErrorBox_ref4=react_default.a.createElement(index_es.FormattedMessage,{id:"client.entity-detail.invalidRelationErrors"}),components_ErrorBox=function(_ref){var formErrors=_ref.formErrors,output=null,elements=[];return src_form.a.formErrorsUtil.hasFieldErrors(formErrors)&&elements.push(react_default.a.createElement(src.z.Item,{condition:src.M.condition.DANGER,key:"hasFieldErrors"},ErrorBox_ref2)),src_form.a.formErrorsUtil.hasValidatorErrors(formErrors)&&elements.push(react_default.a.createElement(src.z.Item,{condition:src.M.condition.DANGER,key:"hasValidatorErrors"},ErrorBox_ref3,react_default.a.createElement(src.z.List,null,src_form.a.formErrorsUtil.getValidatorErrors(formErrors).map((function(message,idx){return react_default.a.createElement(src.z.Item,{condition:src.M.condition.DANGER,key:idx,label:message})}))))),src_form.a.formErrorsUtil.hasRelatedEntityErrors(formErrors)&&elements.push(react_default.a.createElement(src.z.Item,{condition:src.M.condition.DANGER,key:"hasRelatedEntityErrors"},ErrorBox_ref4,react_default.a.createElement(src.z.List,null,src_form.a.formErrorsUtil.getRelatedEntityErrorsCompact(formErrors).map((function(message,idx){return react_default.a.createElement(src.z.Item,{condition:src.M.condition.DANGER,key:idx,label:message})}))))),0<elements.length&&(output=react_default.a.createElement(src.y,{condition:src.M.condition.DANGER},react_default.a.createElement(src.z.List,null,elements.map((function(el){return el}))))),output};function SaveButton_templateObject(){var data=taggedTemplateLiteral_default()(["\n  ",";\n"]);return SaveButton_templateObject=function(){return data},data}var StyledButton=Object(styled_components_browser_esm.default)(src.d)(SaveButton_templateObject(),(function(_ref){var hasErrors=_ref.hasErrors,theme=_ref.theme;return hasErrors&&"\n   background-color: ".concat(theme.colors.signal.warning.text,";\n\n   &:hover {\n     background-color: ").concat(theme.colors.signal.warning.text,";\n   }\n  ")})),ConditionalWrap=function(_ref2){var condition=_ref2.condition,wrap=_ref2.wrap,children=_ref2.children;return condition?wrap(children):children},SaveButton=function(_ref3){var submitting=_ref3.submitting,mode=_ref3.mode,intl=_ref3.intl,hasErrors=_ref3.hasErrors,formErrors=_ref3.formErrors,_ref4=react_default.a.createElement(components_ErrorBox,{formErrors:formErrors});return react_default.a.createElement(ConditionalWrap,{condition:hasErrors,wrap:function wrap(children){return react_default.a.createElement(src.t,{content:_ref4,placement:"bottom",rimless:!0,spacer:10},children)}},react_default.a.createElement(StyledButton,extends_default()({"data-cy":"detail-form_submit-button",id:"detail-save_button",disabled:submitting,ink:"primary",label:function msg(id){return intl.formatMessage({id:id})}("client.entity-detail.".concat(mode===modes_CREATE?"create":"save")),look:"raised",pending:submitting,type:"submit"},hasErrors&&{icon:"exclamation"},{hasErrors:hasErrors})))};SaveButton.displayName="SaveButton",SaveButton.__docgenInfo={description:"",methods:[],displayName:"SaveButton",props:{intl:{type:{name:"custom",raw:"intlShape.isRequired"},required:!1,description:""},submitting:{type:{name:"bool"},required:!1,description:""},mode:{type:{name:"enum",computed:!0,value:"Object.values(modes)"},required:!1,description:""},hasErrors:{type:{name:"bool"},required:!1,description:""},formErrors:{type:{name:"object"},required:!1,description:""}}};var DetailForm_SaveButton=SaveButton;function DetailForm_templateObject(){var data=taggedTemplateLiteral_default()(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n"]);return DetailForm_templateObject=function(){return data},data}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/entity-detail/src/components/DetailForm/SaveButton.js"]={name:"SaveButton",docgenInfo:SaveButton.__docgenInfo,path:"packages/entity-detail/src/components/DetailForm/SaveButton.js"});var StyledForm=styled_components_browser_esm.default.form(DetailForm_templateObject()),DetailForm=function(props){var fireTouched=props.fireTouched,dirty=props.dirty,intl=props.intl,submitting=props.submitting,mode=props.mode,formErrors=props.formErrors,valid=props.valid,submitForm=props.submitForm,entity=props.entity,formDefinition=props.formDefinition,formValues=props.formValues,anyTouched=props.anyTouched,formName=props.form;Object(react.useEffect)((function(){fireTouched(dirty)}),[dirty]);var customActions=Object(react.useMemo)((function(){return{save:function save(){return react_default.a.createElement(DetailForm_SaveButton,{intl:intl,submitting:submitting,mode:mode,hasErrors:!valid&&anyTouched,formErrors:formErrors})}}}),[submitting,mode,valid,anyTouched,formErrors]);return react_default.a.createElement(StyledForm,{onSubmit:function handleSubmit(event){event.preventDefault(),submitForm()},onKeyDown:function handleKeyPress(event){"Enter"===event.key&&"TEXTAREA"!==event.target.tagName&&event.preventDefault()}},react_default.a.createElement(src_form.a.FormBuilder,{entity:entity,formName:formName,formDefinition:formDefinition,formValues:formValues,fieldMappingType:formDefinition.readOnly?"readonly":"editable",mode:mode,componentMapping:defineProperty_default()({},src_form.a.componentTypes.SUB_TABLE,subGrid),customActions:customActions}))};DetailForm.displayName="DetailForm",DetailForm.__docgenInfo={description:"",methods:[],displayName:"DetailForm",props:{intl:{type:{name:"custom",raw:"intlShape.isRequired"},required:!1,description:""},mode:{type:{name:"enum",value:[{value:"'update'",computed:!1},{value:"'create'",computed:!1}]},required:!1,description:""},submitForm:{type:{name:"func"},required:!0,description:""},formDefinition:{type:{name:"object"},required:!0,description:""},entity:{type:{name:"object"},required:!0,description:""},form:{type:{name:"string"},required:!0,description:""},touch:{type:{name:"func"},required:!0,description:""},formValues:{type:{name:"object"},required:!1,description:""},submitting:{type:{name:"bool"},required:!1,description:""},formErrors:{type:{name:"object"},required:!1,description:""},valid:{type:{name:"bool"},required:!1,description:""},dirty:{type:{name:"bool"},required:!1,description:""},lastSave:{type:{name:"number"},required:!1,description:""},fireTouched:{type:{name:"func"},required:!0,description:""},anyTouched:{type:{name:"bool"},required:!1,description:""}}};var DetailForm_DetailForm=Object(reduxForm.a)({form:"detailForm",destroyOnUnmount:!1})(DetailForm);function DetailFormContainer_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function DetailFormContainer_objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?DetailFormContainer_ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):DetailFormContainer_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/entity-detail/src/components/DetailForm/DetailForm.js"]={name:"DetailForm",docgenInfo:DetailForm.__docgenInfo,path:"packages/entity-detail/src/components/DetailForm/DetailForm.js"});var DetailFormContainer_mapActionCreators={unloadDetailView:unloadDetailView,submitForm:actions_submitForm,fireTouched:function(touched){return{type:"entityDetail/FIRE_TOUCHED",payload:{touched:touched}}},logError:errorLogging.a.logError},DetailFormContainer=Object(es.connect)((function(state){return{formDefinition:state.entityDetail.formDefinition,entity:state.entityDetail.entity,formValues:Object(getFormValues.a)("detailForm")(state),formErrors:DetailFormContainer_objectSpread({},Object(getFormSyncErrors.a)("detailForm")(state),{},Object(getFormAsyncErrors.a)("detailForm")(state),{},Object(getFormSubmitErrors.a)("detailForm")(state),{_error:(formName="detailForm",function(state){return get_default()(state,"form.".concat(formName,".error"),{})})(state)}),formInitialValues:es_getFormInitialValues("detailForm")(state),lastSave:state.entityDetail.lastSave};var formName}),DetailFormContainer_mapActionCreators)(Object(index_es.injectIntl)(DetailForm_DetailForm)),DetailView_DetailView=function(_React$Component){function DetailView(){var _getPrototypeOf2,_this;classCallCheck_default()(this,DetailView);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=possibleConstructorReturn_default()(this,(_getPrototypeOf2=getPrototypeOf_default()(DetailView)).call.apply(_getPrototypeOf2,[this].concat(args))),defineProperty_default()(assertThisInitialized_default()(_this),"handledAsyncValidate",(function(formValues){return src_form.a.asyncValidation(formValues,_this.props.mode===modes_CREATE?{}:_this.props.formInitialValues,_this.props.fieldDefinitions,_this.props.mode)})),defineProperty_default()(assertThisInitialized_default()(_this),"getSyncValidation",(function(){return _this.validateSingleton||isEmpty_default()(_this.props.fieldDefinitions)||(_this.validateSingleton=src_form.a.syncValidation(_this.props.fieldDefinitions)),_this.validateSingleton})),defineProperty_default()(assertThisInitialized_default()(_this),"msg",(function(id){return _this.props.intl.formatMessage({id:id})})),_this}return inherits_default()(DetailView,_React$Component),createClass_default()(DetailView,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.unloadDetailView()}},{key:"render",value:function render(){var props=this.props;return react_default.a.createElement(src.m,{required:[props.formInitialValues],loadingText:this.msg("client.entity-detail.loadingText")},react_default.a.createElement(DetailFormContainer,{mode:this.props.mode,validate:this.getSyncValidation(),asyncValidate:this.handledAsyncValidate}))}}]),DetailView}(react_default.a.Component);DetailView_DetailView.displayName="DetailView",DetailView_DetailView.__docgenInfo={description:"",methods:[{name:"handledAsyncValidate",docblock:null,modifiers:[],params:[{name:"formValues",type:null}],returns:null},{name:"getSyncValidation",docblock:null,modifiers:[],params:[],returns:null},{name:"msg",docblock:null,modifiers:[],params:[{name:"id",type:null}],returns:null}],displayName:"DetailView",props:{intl:{type:{name:"custom",raw:"intlShape.isRequired"},required:!1,description:""},mode:{type:{name:"enum",value:[{value:"'update'",computed:!1},{value:"'create'",computed:!1}]},required:!1,description:""},loadDetailView:{type:{name:"func"},required:!0,description:""},unloadDetailView:{type:{name:"func"},required:!0,description:""},logError:{type:{name:"func"},required:!0,description:""},entityModel:{type:{name:"object"},required:!0,description:""},fieldDefinitions:{type:{name:"arrayOf",value:{name:"shape",value:{path:{name:"string",required:!1},id:{name:"string",required:!1},validation:{name:"object",required:!1}}}},required:!0,description:""},entityName:{type:{name:"string"},required:!0,description:""},entityId:{type:{name:"string"},required:!1,description:""},formInitialValues:{type:{name:"shape",value:{initial:{name:"objectOf",value:{name:"string"},required:!1}}},required:!1,description:""}}};var components_DetailView_DetailView=DetailView_DetailView;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/entity-detail/src/components/DetailView/DetailView.js"]={name:"DetailView",docgenInfo:DetailView_DetailView.__docgenInfo,path:"packages/entity-detail/src/components/DetailView/DetailView.js"});var DetailViewContainer_mapActionCreators={loadDetailView:loadDetailView,unloadDetailView:unloadDetailView,logError:errorLogging.a.logError},DetailViewContainer=Object(root.hot)(Object(es.connect)((function(state){return{entityName:state.entityDetail.entityName,entityId:state.entityDetail.entityId,entityModel:state.entityDetail.entityModel,fieldDefinitions:state.entityDetail.fieldDefinitions,mode:state.entityDetail.mode,formInitialValues:es_getFormInitialValues("detailForm")(state)}}),DetailViewContainer_mapActionCreators)(Object(index_es.injectIntl)(components_DetailView_DetailView))),getDispatchActions=function(input){return[(entityName=input.entityName,{type:"entityDetail/SET_ENTITY_NAME",payload:{entityName:entityName}}),(entityId=input.entityId?input.entityId:null,{type:"entityDetail/SET_ENTITY_ID",payload:{entityId:entityId}}),(mode=input.mode,{type:"entityDetail/SET_MODE",payload:{mode:mode}}),(formName=input.formName,{type:"entityDetail/SET_FORM_NAME",payload:{formName:formName}}),(appId=input.id,{type:"entityDetail/SET_APP_ID",payload:{appId:appId}}),(defaultValues=input.defaultValues,{type:"entityDetail/SET_DEFAULT_VALUES",payload:{defaultValues:defaultValues}}),loadDetailView()];var defaultValues,appId,formName,mode,entityId,entityName},src_customActions={new:regenerator_default.a.mark((function _new(){return regenerator_default.a.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Object(redux_saga_effects_npm_proxy_esm.e)(navigateToCreate());case 2:case"end":return _context.stop()}}),_new)})),fullscreen:regenerator_default.a.mark((function fullscreen(definition,selection){return regenerator_default.a.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,Object(redux_saga_effects_npm_proxy_esm.e)(navigateToAction(definition,selection));case 2:case"end":return _context2.stop()}}),fullscreen)}))},shortcuts=[{ctrl:!0,key:"s",actions:[{type:"entityDetail/SUBMIT_FORM"}]}],EXTERNAL_EVENTS=["onSubGridRowClick","onEntityCreated","onEntityDeleted","onTouchedChange","emitAction","onNavigateToCreate","onNavigateToAction"],main_ref=react_default.a.createElement(DetailViewContainer,null),initApp=function(id,input){var events=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},publicPath=3<arguments.length?arguments[3]:void 0,store=appFactory.a.createStore(reducers,reducers_sagas,input,"entity-detail");externalEvents.a.addToStore(store,events),actionEmitter.a.addToStore(store,events.emitAction),errorLogging.a.addToStore(store,!1),notifier.a.addToStore(store,!1),actions.a.addToStore(store,{formApp:main.a,listApp:src_main.a,customActions:src_customActions,appComponent:input.actionAppComponent}),formData.a.addToStore(store,{listApp:src_main.a,linkFactory:input.linkFactory}),keyDown.a.addToStore(store,shortcuts);var dispatchActions=getDispatchActions(input),app=appFactory.a.createApp("entity-detail",main_ref,store,{input:input,events:events,actions:dispatchActions,publicPath:publicPath,textResourceModules:["component","common","entity-list"]});return app};appFactory.a.registerAppInRegistry("entity-detail",initApp);var main_EntityDetailApp=function(_React$Component){function EntityDetailApp(props){var _this;classCallCheck_default()(this,EntityDetailApp),_this=possibleConstructorReturn_default()(this,getPrototypeOf_default()(EntityDetailApp).call(this,props));var events=EXTERNAL_EVENTS.reduce((function(events,event){return props[event]&&(events[event]=props[event]),events}),{});return _this.app=initApp(props.id,props,events),_this}return inherits_default()(EntityDetailApp,_React$Component),createClass_default()(EntityDetailApp,[{key:"render",value:function render(){return this.app.component}}]),EntityDetailApp}(react_default.a.Component);main_EntityDetailApp.displayName="EntityDetailApp",main_EntityDetailApp.__docgenInfo={description:"",methods:[],displayName:"EntityDetailApp",props:{entityName:{type:{name:"string"},required:!0,description:""},formName:{type:{name:"string"},required:!0,description:""},mode:{type:{name:"enum",value:[{value:"'update'",computed:!1},{value:"'create'",computed:!1}]},required:!1,description:""},onNavigateToAction:{type:{name:"func"},required:!1,description:""},onNavigateToCreate:{type:{name:"func"},required:!1,description:""},actionAppComponent:{type:{name:"func"},required:!1,description:""}}};__webpack_exports__.a=Object(root.hot)(main_EntityDetailApp);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/entity-detail/src/main.js"]={name:"EntityDetailApp",docgenInfo:main_EntityDetailApp.__docgenInfo,path:"packages/entity-detail/src/main.js"})}}]);
//# sourceMappingURL=0.89133447bf6714dea224.bundle.js.map