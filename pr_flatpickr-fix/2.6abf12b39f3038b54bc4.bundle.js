(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{3662:function(module,exports,__webpack_require__){"use strict";const strictUriEncode=__webpack_require__(3666),decodeComponent=__webpack_require__(3667),splitOnFirst=__webpack_require__(3668);function validateArrayFormatSeparator(value){if("string"!=typeof value||1!==value.length)throw new TypeError("arrayFormatSeparator must be single character string")}function encode(value,options){return options.encode?options.strict?strictUriEncode(value):encodeURIComponent(value):value}function decode(value,options){return options.decode?decodeComponent(value):value}function removeHash(input){const hashStart=input.indexOf("#");return-1!==hashStart&&(input=input.slice(0,hashStart)),input}function extract(input){const queryStart=(input=removeHash(input)).indexOf("?");return-1===queryStart?"":input.slice(queryStart+1)}function parseValue(value,options){return options.parseNumbers&&!Number.isNaN(Number(value))&&"string"==typeof value&&""!==value.trim()?value=Number(value):!options.parseBooleans||null===value||"true"!==value.toLowerCase()&&"false"!==value.toLowerCase()||(value="true"===value.toLowerCase()),value}function parse(query,options){validateArrayFormatSeparator((options=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},options)).arrayFormatSeparator);const formatter=function parserForArrayFormat(options){let result;switch(options.arrayFormat){case"index":return(key,value,accumulator)=>{result=/\[(\d*)\]$/.exec(key),key=key.replace(/\[\d*\]$/,""),result?(void 0===accumulator[key]&&(accumulator[key]={}),accumulator[key][result[1]]=value):accumulator[key]=value};case"bracket":return(key,value,accumulator)=>{result=/(\[\])$/.exec(key),key=key.replace(/\[\]$/,""),result?void 0!==accumulator[key]?accumulator[key]=[].concat(accumulator[key],value):accumulator[key]=[value]:accumulator[key]=value};case"comma":case"separator":return(key,value,accumulator)=>{const isArray="string"==typeof value&&value.includes(options.arrayFormatSeparator),isEncodedArray="string"==typeof value&&!isArray&&decode(value,options).includes(options.arrayFormatSeparator);value=isEncodedArray?decode(value,options):value;const newValue=isArray||isEncodedArray?value.split(options.arrayFormatSeparator).map(item=>decode(item,options)):null===value?value:decode(value,options);accumulator[key]=newValue};default:return(key,value,accumulator)=>{void 0!==accumulator[key]?accumulator[key]=[].concat(accumulator[key],value):accumulator[key]=value}}}(options),ret=Object.create(null);if("string"!=typeof query)return ret;if(!(query=query.trim().replace(/^[?#&]/,"")))return ret;for(const param of query.split("&")){let[key,value]=splitOnFirst(options.decode?param.replace(/\+/g," "):param,"=");value=void 0===value?null:["comma","separator"].includes(options.arrayFormat)?value:decode(value,options),formatter(decode(key,options),value,ret)}for(const key of Object.keys(ret)){const value=ret[key];if("object"==typeof value&&null!==value)for(const k of Object.keys(value))value[k]=parseValue(value[k],options);else ret[key]=parseValue(value,options)}return!1===options.sort?ret:(!0===options.sort?Object.keys(ret).sort():Object.keys(ret).sort(options.sort)).reduce((result,key)=>{const value=ret[key];return Boolean(value)&&"object"==typeof value&&!Array.isArray(value)?result[key]=function keysSorter(input){return Array.isArray(input)?input.sort():"object"==typeof input?keysSorter(Object.keys(input)).sort((a,b)=>Number(a)-Number(b)).map(key=>input[key]):input}(value):result[key]=value,result},Object.create(null))}exports.extract=extract,exports.parse=parse,exports.stringify=(object,options)=>{if(!object)return"";validateArrayFormatSeparator((options=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},options)).arrayFormatSeparator);const shouldFilter=key=>options.skipNull&&null==object[key]||options.skipEmptyString&&""===object[key],formatter=function encoderForArrayFormat(options){switch(options.arrayFormat){case"index":return key=>(result,value)=>{const index=result.length;return void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),"[",index,"]"].join("")]:[...result,[encode(key,options),"[",encode(index,options),"]=",encode(value,options)].join("")]};case"bracket":return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),"[]"].join("")]:[...result,[encode(key,options),"[]=",encode(value,options)].join("")];case"comma":case"separator":return key=>(result,value)=>null==value||0===value.length?result:0===result.length?[[encode(key,options),"=",encode(value,options)].join("")]:[[result,encode(value,options)].join(options.arrayFormatSeparator)];default:return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,encode(key,options)]:[...result,[encode(key,options),"=",encode(value,options)].join("")]}}(options),objectCopy={};for(const key of Object.keys(object))shouldFilter(key)||(objectCopy[key]=object[key]);const keys=Object.keys(objectCopy);return!1!==options.sort&&keys.sort(options.sort),keys.map(key=>{const value=object[key];return void 0===value?"":null===value?encode(key,options):Array.isArray(value)?value.reduce(formatter(key),[]).join("&"):encode(key,options)+"="+encode(value,options)}).filter(x=>x.length>0).join("&")},exports.parseUrl=(url,options)=>{options=Object.assign({decode:!0},options);const[url_,hash]=splitOnFirst(url,"#");return Object.assign({url:url_.split("?")[0]||"",query:parse(extract(url),options)},options&&options.parseFragmentIdentifier&&hash?{fragmentIdentifier:decode(hash,options)}:{})},exports.stringifyUrl=(object,options)=>{options=Object.assign({encode:!0,strict:!0},options);const url=removeHash(object.url).split("?")[0]||"",queryFromUrl=exports.extract(object.url),parsedQueryFromUrl=exports.parse(queryFromUrl,{sort:!1}),query=Object.assign(parsedQueryFromUrl,object.query);let queryString=exports.stringify(query,options);queryString&&(queryString="?"+queryString);let hash=function getHash(url){let hash="";const hashStart=url.indexOf("#");return-1!==hashStart&&(hash=url.slice(hashStart)),hash}(object.url);return object.fragmentIdentifier&&(hash="#"+encode(object.fragmentIdentifier,options)),`${url}${queryString}${hash}`}},3665:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(76),__webpack_require__(30),__webpack_require__(96);var query_string=__webpack_require__(3662),query_string_default=__webpack_require__.n(query_string),isObject=__webpack_require__(134),isObject_default=__webpack_require__.n(isObject),mapValues=__webpack_require__(503),mapValues_default=__webpack_require__.n(mapValues),hasJsonStructure=function(str){if("string"!=typeof str)return!1;try{var parsed=JSON.parse(str);return"[object Object]"===Object.prototype.toString.call(parsed)}catch(err){return!1}};__webpack_exports__.a={fromQueryString:function(queryString){var obj=query_string_default.a.parse(queryString);return mapValues_default()(obj,(function(value){return hasJsonStructure(value)?JSON.parse(value):value}))},toQueryString:function(obj){var stringifiedValues=mapValues_default()(obj,(function(value){return isObject_default()(value)?JSON.stringify(value):value}));return query_string_default.a.stringify(stringifiedValues)}}},3666:function(module,exports,__webpack_require__){"use strict";module.exports=str=>encodeURIComponent(str).replace(/[!'()*]/g,x=>"%"+x.charCodeAt(0).toString(16).toUpperCase())},3667:function(module,exports,__webpack_require__){"use strict";var singleMatcher=new RegExp("%[a-f0-9]{2}","gi"),multiMatcher=new RegExp("(%[a-f0-9]{2})+","gi");function decodeComponents(components,split){try{return decodeURIComponent(components.join(""))}catch(err){}if(1===components.length)return components;split=split||1;var left=components.slice(0,split),right=components.slice(split);return Array.prototype.concat.call([],decodeComponents(left),decodeComponents(right))}function decode(input){try{return decodeURIComponent(input)}catch(err){for(var tokens=input.match(singleMatcher),i=1;i<tokens.length;i++)tokens=(input=decodeComponents(tokens,i).join("")).match(singleMatcher);return input}}module.exports=function(encodedURI){if("string"!=typeof encodedURI)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof encodedURI+"`");try{return encodedURI=encodedURI.replace(/\+/g," "),decodeURIComponent(encodedURI)}catch(err){return function customDecodeURIComponent(input){for(var replaceMap={"%FE%FF":"��","%FF%FE":"��"},match=multiMatcher.exec(input);match;){try{replaceMap[match[0]]=decodeURIComponent(match[0])}catch(err){var result=decode(match[0]);result!==match[0]&&(replaceMap[match[0]]=result)}match=multiMatcher.exec(input)}replaceMap["%C2"]="�";for(var entries=Object.keys(replaceMap),i=0;i<entries.length;i++){var key=entries[i];input=input.replace(new RegExp(key,"g"),replaceMap[key])}return input}(encodedURI)}}},3668:function(module,exports,__webpack_require__){"use strict";module.exports=(string,separator)=>{if("string"!=typeof string||"string"!=typeof separator)throw new TypeError("Expected the arguments to be of type `string`");if(""===separator)return[string];const separatorIndex=string.indexOf(separator);return-1===separatorIndex?[string]:[string.slice(0,separatorIndex),string.slice(separatorIndex+separator.length)]}},3671:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DetailLink}));__webpack_require__(21),__webpack_require__(109);var react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),tocco_util_src_queryString__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(1102),__webpack_require__(3665)),tocco_ui__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6),react_intl__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(12),_utils_routing__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(3672),DetailLinkRelativeWithoutIntl=function(_ref){var entityKey=_ref.entityKey,children=_ref.children,relation=_ref.relation,intl=_ref.intl;return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(tocco_ui__WEBPACK_IMPORTED_MODULE_5__.a,{"aria-label":function msg(id){return intl.formatMessage({id:id})}("client.component.navigationStrategy.detailLinkRelative"),to:"".concat(relation?relation+"/":"").concat(entityKey)},children)};DetailLinkRelativeWithoutIntl.displayName="DetailLinkRelativeWithoutIntl";var DetailLinkRelative=Object(react_intl__WEBPACK_IMPORTED_MODULE_6__.injectIntl)(DetailLinkRelativeWithoutIntl),DetailLink=function(_ref2){var entityName=_ref2.entityName,entityKey=_ref2.entityKey,children=_ref2.children;return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(tocco_ui__WEBPACK_IMPORTED_MODULE_5__.a,{to:"/e/".concat(entityName,"/").concat(entityKey),target:"_blank"},children)};DetailLink.displayName="DetailLink";var ListLink=function(_ref3){var entityName=_ref3.entityName,entityKeys=_ref3.entityKeys,children=_ref3.children,queryString=entityKeys&&0<entityKeys.length&&"tql=KEYS("+entityKeys.join(",")+")";return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(tocco_ui__WEBPACK_IMPORTED_MODULE_5__.a,{to:{pathname:"/e/".concat(entityName,"/list"),search:"?".concat(queryString)},target:"_blank"},children)};ListLink.displayName="ListLink",__webpack_exports__.b=function(history,match){return{DetailLink:DetailLink,ListLink:ListLink,DetailLinkRelative:DetailLinkRelative,navigateToCreateRelative:function navigateToCreateRelative(relationName,state){if(relationName)history.push({pathname:"".concat(match.url,"/").concat(relationName,"/create"),state:state});else{var entityBaseUrl=Object(_utils_routing__WEBPACK_IMPORTED_MODULE_7__.a)(match.url);history.push({pathname:entityBaseUrl+"/create",state:state})}},navigateToActionRelative:function navigateToActionRelative(definition,selection){var entityBaseUrl=Object(_utils_routing__WEBPACK_IMPORTED_MODULE_7__.a)(match.url),search=tocco_util_src_queryString__WEBPACK_IMPORTED_MODULE_4__.a.toQueryString({selection:selection,actionProperties:definition.properties});history.push({pathname:entityBaseUrl+"/action/"+definition.appId,state:{definition:definition,selection:selection},search:search})}}},DetailLink.__docgenInfo={description:"",methods:[],displayName:"DetailLink",props:{entityName:{type:{name:"string"},required:!0,description:""},entityKey:{type:{name:"string"},required:!0,description:""},children:{type:{name:"any"},required:!0,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/admin/src/routes/entities/utils/navigationStrategy.js"]={name:"DetailLink",docgenInfo:DetailLink.__docgenInfo,path:"packages/admin/src/routes/entities/utils/navigationStrategy.js"}),ListLink.__docgenInfo={description:"",methods:[],displayName:"ListLink",props:{entityName:{type:{name:"string"},required:!0,description:""},children:{type:{name:"any"},required:!0,description:""},entityKeys:{type:{name:"arrayOf",value:{name:"string"}},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/admin/src/routes/entities/utils/navigationStrategy.js"]={name:"ListLink",docgenInfo:ListLink.__docgenInfo,path:"packages/admin/src/routes/entities/utils/navigationStrategy.js"})},3672:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return goBack}));__webpack_require__(1105),__webpack_require__(49),__webpack_require__(144);var goBack=function(url){for(var amount=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,normalizedUrl=url.replace(/\/$/,""),i=0;i<amount;i++)normalizedUrl=normalizedUrl.substring(0,normalizedUrl.lastIndexOf("/"));return normalizedUrl}},3673:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(126),__webpack_require__(49);var DOC_PATH_REGEX=/^\/docs\/doc\/(\d+)\/detail$/,PARENT_PATH_REGEX=/^\/docs\/(domain|folder)\/(\d+)\/list$/;__webpack_exports__.a=function(pathname){return function(pathname){var docMatches=DOC_PATH_REGEX.exec(pathname);return docMatches&&2<=docMatches.length?{model:"Resource",key:docMatches[1]}:null}(pathname)||function(pathname){var parentMatches=PARENT_PATH_REGEX.exec(pathname);return parentMatches&&3<=parentMatches.length?{model:parentMatches[1].charAt(0).toUpperCase()+parentMatches[1].slice(1),key:parentMatches[2]}:null}(pathname)}},3678:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return INITIALIZE})),__webpack_require__.d(__webpack_exports__,"c",(function(){return MOVE_ELEMENTS})),__webpack_require__.d(__webpack_exports__,"d",(function(){return SET_WAITING})),__webpack_require__.d(__webpack_exports__,"a",(function(){return CLOSE})),__webpack_require__.d(__webpack_exports__,"f",(function(){return initialize})),__webpack_require__.d(__webpack_exports__,"g",(function(){return moveElements})),__webpack_require__.d(__webpack_exports__,"h",(function(){return setWaiting})),__webpack_require__.d(__webpack_exports__,"e",(function(){return close}));var INITIALIZE="docs/move/INITIALIZE",MOVE_ELEMENTS="docs/move/MOVE_ELEMENTS",SET_WAITING="docs/move/SET_WAITING",CLOSE="docs/move/CLOSE",initialize=function(selection,onSuccess,onError){return{type:INITIALIZE,payload:{selection:selection,onSuccess:onSuccess,onError:onError}}},moveElements=function(target,selected){return{type:MOVE_ELEMENTS,payload:{target:target,selected:selected}}},setWaiting=function(){var isWaiting=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{type:SET_WAITING,payload:{isWaiting:isWaiting}}},close=function(){return{type:CLOSE}}},3680:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(21),__webpack_require__(67),__webpack_require__(66);var classCallCheck=__webpack_require__(61),classCallCheck_default=__webpack_require__.n(classCallCheck),createClass=__webpack_require__(64),createClass_default=__webpack_require__.n(createClass),inherits=__webpack_require__(63),inherits_default=__webpack_require__.n(inherits),possibleConstructorReturn=__webpack_require__(62),possibleConstructorReturn_default=__webpack_require__.n(possibleConstructorReturn),getPrototypeOf=__webpack_require__(38),getPrototypeOf_default=__webpack_require__.n(getPrototypeOf),react=__webpack_require__(0),react_default=__webpack_require__.n(react),reducer=(__webpack_require__(11),__webpack_require__(18)),appFactory=__webpack_require__(59),actionEmitter=__webpack_require__(110),errorLogging=__webpack_require__(98),externalEvents=__webpack_require__(58),notifier=__webpack_require__(32),rest=__webpack_require__(23),createHashHistory=(__webpack_require__(162),__webpack_require__(214),__webpack_require__(1021)),createHashHistory_default=__webpack_require__.n(createHashHistory),createMemoryHistory=__webpack_require__(1024),createMemoryHistory_default=__webpack_require__.n(createMemoryHistory),react_router=__webpack_require__(114),es=__webpack_require__(25),index_es=__webpack_require__(12),helpers_extends=(__webpack_require__(49),__webpack_require__(166),__webpack_require__(28)),extends_default=__webpack_require__.n(helpers_extends),slicedToArray=__webpack_require__(48),slicedToArray_default=__webpack_require__.n(slicedToArray),styled_components_browser_esm=__webpack_require__(7),src=__webpack_require__(6),viewPersistor=__webpack_require__(3663),regenerator=(__webpack_require__(109),__webpack_require__(22),__webpack_require__(126),__webpack_require__(30),__webpack_require__(84),__webpack_require__(130),__webpack_require__(3)),regenerator_default=__webpack_require__.n(regenerator),consoleLogger=(__webpack_require__(36),__webpack_require__(90)),actions={"dms-create-folder":Object(react.lazy)((function(){return Promise.all([__webpack_require__.e(0),__webpack_require__.e(1),__webpack_require__.e(5)]).then(__webpack_require__.bind(null,3741))})),"dms-create-domain":Object(react.lazy)((function(){return Promise.all([__webpack_require__.e(0),__webpack_require__.e(1),__webpack_require__.e(5)]).then(__webpack_require__.bind(null,3742))})),"dms-edit":Object(react.lazy)((function(){return Promise.all([__webpack_require__.e(0),__webpack_require__.e(1),__webpack_require__.e(5)]).then(__webpack_require__.bind(null,3743))})),"dms-move":Object(react.lazy)((function(){return Promise.all([__webpack_require__.e(0),__webpack_require__.e(1),__webpack_require__.e(5)]).then(__webpack_require__.bind(null,3762))})),delete:Object(react.lazy)((function(){return Promise.all([__webpack_require__.e(0),__webpack_require__.e(1),__webpack_require__.e(5)]).then(__webpack_require__.bind(null,3744))}))},LazyAction_ref=react_default.a.createElement(src.o,null),renderLoader=function(){return LazyAction_ref};renderLoader.displayName="renderLoader";var LazyAction_LazyAction=function(props){var appId=props.appId,LazyAction=actions[appId];if(!LazyAction)return consoleLogger.a.logError("no action found with id: ".concat(appId)),null;var ActionComponent=Object(es.connect)(null,{emitAction:function emitAction(action){return actionEmitter.a.dispatchEmittedAction(action)}})(LazyAction);return react_default.a.createElement(react.Suspense,{fallback:renderLoader()},react_default.a.createElement(ActionComponent,props))};LazyAction_LazyAction.displayName="LazyAction",LazyAction_LazyAction.__docgenInfo={description:"",methods:[],displayName:"LazyAction",props:{appId:{type:{name:"string"},required:!0,description:""}}};var Action_LazyAction=LazyAction_LazyAction;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/docs-browser/src/components/Action/LazyAction.js"]={name:"LazyAction",docgenInfo:LazyAction_LazyAction.__docgenInfo,path:"packages/docs-browser/src/components/Action/LazyAction.js"});var FileInput=function(_ref){var value,ref,instanceCount=_ref.instanceCount,directory=_ref.directory,onChange=_ref.onChange,fileInput=Object(react.useRef)(),prevInstanceCount=(value=instanceCount,ref=Object(react.useRef)(),Object(react.useEffect)((function(){ref.current=value})),ref.current);return Object(react.useEffect)((function(){fileInput.current&&instanceCount>prevInstanceCount&&fileInput.current.click()})),react_default.a.createElement("input",extends_default()({type:"file",ref:fileInput,style:{display:"none"},onChange:function handleChange(e){var files=e.target.files;files&&0<files.length&&onChange&&onChange(files,directory),e.target.value=null},multiple:!0},directory?{webkitdirectory:"true",directory:"true"}:{}))};FileInput.displayName="FileInput",FileInput.__docgenInfo={description:"",methods:[],displayName:"FileInput",props:{instanceCount:{type:{name:"number"},required:!0,description:""},directory:{type:{name:"bool"},required:!1,description:""},onChange:{type:{name:"func"},required:!1,description:""}}};var FileInput_FileInput=FileInput;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/docs-browser/src/components/FileInput/FileInput.js"]={name:"FileInput",docgenInfo:FileInput.__docgenInfo,path:"packages/docs-browser/src/components/FileInput/FileInput.js"});var mapActionCreators={onChange:function(files,isDirectory){return{type:"docs/create/FILES_SELECTED",payload:{files:files,isDirectory:isDirectory}}}},FileInputContainer=Object(es.connect)((function(state){return{instanceCount:state.docs.create.dialog.instanceCount,directory:state.docs.create.dialog.directory}}),mapActionCreators)(FileInput_FileInput),taggedTemplateLiteral=__webpack_require__(17),taggedTemplateLiteral_default=__webpack_require__.n(taggedTemplateLiteral);function _templateObject2(){var data=taggedTemplateLiteral_default()(["\n  display: inline-block;\n  margin-right: ",";\n"]);return _templateObject2=function(){return data},data}function _templateObject(){var data=taggedTemplateLiteral_default()(["\n  display: flex;\n  align-items: center;\n"]);return _templateObject=function(){return data},data}var StyledContentWrapper=styled_components_browser_esm.default.div(_templateObject()),StyledIconWrapper=styled_components_browser_esm.default.span(_templateObject2(),src.Q.space(-2)),ROOT_PATH_REGEX=/^\/docs\/?$/,utils_isRootLocation=function(pathname){return ROOT_PATH_REGEX.test(pathname)},ICONS={Domain:"globe",Folder:"folder",Resource:"file"},LazyListApp=react_default.a.lazy((function(){return __webpack_require__.e(20).then(__webpack_require__.bind(null,3740))})),DocsView_ref2=react_default.a.createElement(src.o,null),DocsView_ref3=react_default.a.createElement(FileInputContainer,null),DocsView=function(props){var history=props.history,match=props.match,domainTypes=props.domainTypes,rootNodes=props.rootNodes,navigationStrategy=props.navigationStrategy,changeListParent=props.changeListParent,onSearchChange=props.onSearchChange,emitAction=props.emitAction,openFileDialog=props.openFileDialog,limit=props.limit,searchFormType=props.searchFormType,selectionStyle=props.selectionStyle,getCustomLocation=props.getCustomLocation,disableViewPersistor=props.disableViewPersistor,showActions=props.showActions,sortable=props.sortable,getListFormName=props.getListFormName,domainDetailFormName=props.domainDetailFormName,folderDetailFormName=props.folderDetailFormName,searchMode=props.searchMode,openResource=props.openResource,_useReducer=Object(react.useReducer)((function(x){return x+1}),0),_useReducer2=slicedToArray_default()(_useReducer,2),entityListNumber=_useReducer2[0],forceEntityListUpdate=_useReducer2[1],entityListKey="entity-list-".concat(entityListNumber),_useState=Object(react.useState)([]),_useState2=slicedToArray_default()(_useState,2),selection=_useState2[0],setSelection=_useState2[1],parent=Object(react.useMemo)((function(){return function(match){if(match.params&&match.params.model){var model=match.params.model.charAt(0).toUpperCase()+match.params.model.slice(1),key=match.params.key;return{model:"Docs_list_item",key:"".concat(model,"/").concat(key)}}return null}(match)}),[match.params]),keys=!parent&&rootNodes?rootNodes.map((function(node){return"".concat(node.entityName,"/").concat(node.key)})):null,formName=Object(react.useMemo)((function(){return getListFormName?getListFormName(parent,keys):function(parent,keys){return parent?"Docs_list_item":keys?"Root_docs_list_item_specific":"Root_docs_list_item"}(parent,keys)}),[match.params,getListFormName]),mounted=Object(react.useRef)(!1),searchModeRef=Object(react.useRef)(searchMode);searchModeRef.current=searchMode,Object(react.useEffect)((function(){return mounted.current=!0,function(){return mounted.current=!1}})),Object(react.useEffect)((function(){changeListParent(parent),setSelection([])}),[parent]);var tql=parent||keys?null:function(domainTypes){return Array.isArray(domainTypes)&&0<domainTypes.length?"exists(relDomain_type where IN(unique_id, ".concat(domainTypes.map((function(type){return'"'.concat(type,'"')})).join(","),"))"):null}(domainTypes),handleUploadDocument=regenerator_default.a.mark((function(definition,selection,parent,params,config,onSuccess,onError){return regenerator_default.a.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:!1,openFileDialog(history.location.pathname,!1,onSuccess,onError);case 2:case"end":return _context.stop()}}),handleUploadDocument)})),handleUploadDirectory=regenerator_default.a.mark((function(definition,selection,parent,params,config,onSuccess,onError){return regenerator_default.a.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:!0,openFileDialog(history.location.pathname,!0,onSuccess,onError);case 2:case"end":return _context2.stop()}}),handleUploadDirectory)})),store=disableViewPersistor?void 0:utils_isRootLocation(history.location.pathname)?viewPersistor.a.viewInfoSelector("search").store:null;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(react.Suspense,{fallback:DocsView_ref2},react_default.a.createElement(LazyListApp,{key:entityListKey,id:"documents",entityName:"Docs_list_item",formName:formName,limit:limit||25,onRowClick:function handleRowClick(_ref){var id=_ref.id;if(searchModeRef.current&&utils_isRootLocation(history.location.pathname)){if(!viewPersistor.a.viewInfoSelector("search").store){var searchStore=viewPersistor.a.viewInfoSelector(entityListKey).store;viewPersistor.a.persistViewInfo("search",{store:searchStore})}forceEntityListUpdate()}var _id$split=id.split("/"),_id$split2=slicedToArray_default()(_id$split,2),model=_id$split2[0],key=_id$split2[1],location=getCustomLocation?getCustomLocation(model,key):function(model,key){switch(model){case"Domain":return"/docs/domain/".concat(key,"/list");case"Folder":return"/docs/folder/".concat(key,"/list");case"Resource":return"/docs/doc/".concat(key,"/detail");default:throw new Error("Unexpected model: ".concat(model))}}(model,key);location&&(openResource&&"Resource"===model?openResource(location):history.push(location))},searchFormPosition:"left",searchFormType:searchFormType||"admin",parent:parent,onSearchChange:function handleSearch(e){mounted.current&&onSearchChange(e)},store:store,onStoreCreate:function onStoreCreate(store){disableViewPersistor||viewPersistor.a.persistViewInfo(entityListKey,{store:store})},cellRenderers:{"dms-label-with-icon":function dmsLabelWithIcon(rowData,column,cellRenderer){return react_default.a.createElement(StyledContentWrapper,null,react_default.a.createElement(StyledIconWrapper,null,react_default.a.createElement(src.l,{icon:ICONS[rowData.type]})),react_default.a.createElement("span",null,cellRenderer(column.children[0])))}},emitAction:emitAction,actionAppComponent:Action_LazyAction,contextParams:{history:history,detailFormNames:{Domain:domainDetailFormName,Folder:folderDetailFormName}},customActions:{"upload-document":handleUploadDocument,"upload-directory":handleUploadDirectory},navigationStrategy:navigationStrategy,tql:tql,keys:keys,selectionStyle:selectionStyle||"multi_explicit",onSelectChange:setSelection,selection:selection,showActions:showActions,sortable:sortable})),DocsView_ref3)};DocsView.__docgenInfo={description:"",methods:[],displayName:"DocsView",props:{match:{type:{name:"object"},required:!0,description:""},history:{type:{name:"object"},required:!0,description:""},navigationStrategy:{type:{name:"object"},required:!1,description:""},domainTypes:{type:{name:"arrayOf",value:{name:"string"}},required:!1,description:""},rootNodes:{type:{name:"arrayOf",value:{name:"shape",value:{entityName:{name:"string",required:!1},key:{name:"string",required:!1}}}},required:!1,description:""},changeListParent:{type:{name:"func"},required:!0,description:""},onSearchChange:{type:{name:"func"},required:!0,description:""},emitAction:{type:{name:"func"},required:!0,description:""},openFileDialog:{type:{name:"func"},required:!0,description:""},limit:{type:{name:"number"},required:!1,description:""},searchFormType:{type:{name:"custom",raw:"searchFormTypePropTypes"},required:!1,description:""},selectionStyle:{type:{name:"custom",raw:"selectionStylePropType"},required:!1,description:""},getCustomLocation:{type:{name:"func"},required:!1,description:""},disableViewPersistor:{type:{name:"bool"},required:!1,description:""},showActions:{type:{name:"bool"},required:!1,description:""},sortable:{type:{name:"bool"},required:!1,description:""},getListFormName:{type:{name:"func"},required:!1,description:""},domainDetailFormName:{type:{name:"string"},required:!1,description:""},folderDetailFormName:{type:{name:"string"},required:!1,description:""},searchMode:{type:{name:"bool"},required:!1,description:""},openResource:{type:{name:"func"},required:!1,description:""}}};var DocsView_DocsView=DocsView;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/docs-browser/src/components/DocsView/DocsView.js"]={name:"DocsView",docgenInfo:DocsView.__docgenInfo,path:"packages/docs-browser/src/components/DocsView/DocsView.js"});var DocsViewContainer_mapActionCreators={changeListParent:function(parent){return{type:"docs/list/CHANGE_LIST_PARENT",payload:{parent:parent}}}},DocsViewContainer=Object(es.connect)((function(state){return{domainTypes:state.input.domainTypes,rootNodes:state.input.rootNodes,limit:state.input.listLimit,searchFormType:state.input.searchFormType,selectionStyle:state.input.selectionStyle,getCustomLocation:state.input.getCustomLocation,disableViewPersistor:state.input.disableViewPersistor,showActions:state.input.showActions,sortable:state.input.sortable,getListFormName:state.input.getListFormName,domainDetailFormName:state.input.domainDetailFormName,folderDetailFormName:state.input.folderDetailFormName,openResource:state.input.openResource}}),DocsViewContainer_mapActionCreators)(Object(index_es.injectIntl)(DocsView_DocsView));__webpack_require__(157),__webpack_require__(640);function StyledComponents_templateObject(){var data=taggedTemplateLiteral_default()(["\n  height: 100%;\n  background-color: ",";\n  padding-left: ",";\n  overflow-y: hidden;\n"]);return StyledComponents_templateObject=function(){return data},data}var StyledDocumentViewWrapper=styled_components_browser_esm.default.div(StyledComponents_templateObject(),src.S.color("paper"),src.Q.space(.5)),LazyDetailApp=react_default.a.lazy((function(){return Promise.all([__webpack_require__.e(0),__webpack_require__.e(21)]).then(__webpack_require__.bind(null,3745))})),DocumentView_ref2=react_default.a.createElement(src.o,null),DocumentView=function(_ref){var match=_ref.match,history=_ref.history,breadcrumbs=_ref.breadcrumbs,formName=_ref.formName,navigationStrategy=_ref.navigationStrategy,emitAction=_ref.emitAction;return react_default.a.createElement(StyledDocumentViewWrapper,null,react_default.a.createElement(react.Suspense,{fallback:DocumentView_ref2},react_default.a.createElement(LazyDetailApp,{entityName:"Resource",entityId:match.params.key,formName:formName||"DmsResource",mode:"update",actionAppComponent:Action_LazyAction,navigationStrategy:navigationStrategy,emitAction:emitAction,onEntityDeleted:function handleEntityDeleted(){var lastList=breadcrumbs.slice().reverse().find((function(breadcrumb){return"list"===breadcrumb.type})),lastListUrl="/docs/".concat(lastList.path);history.push(lastListUrl)}})))};DocumentView.displayName="DocumentView",DocumentView.__docgenInfo={description:"",methods:[],displayName:"DocumentView",props:{match:{type:{name:"shape",value:{params:{name:"shape",value:{key:{name:"string",required:!0}},required:!0}}},required:!0,description:""},history:{type:{name:"shape",value:{push:{name:"func",required:!0}}},required:!0,description:""},breadcrumbs:{type:{name:"arrayOf",value:{name:"shape",value:{path:{name:"string",required:!0},type:{name:"string",required:!0}}}},required:!0,description:""},formName:{type:{name:"string"},required:!1,description:""},navigationStrategy:{type:{name:"object"},required:!1,description:""},emitAction:{type:{name:"func"},required:!0,description:""}}};var DocumentView_DocumentView=DocumentView;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/docs-browser/src/components/DocumentView/DocumentView.js"]={name:"DocumentView",docgenInfo:DocumentView.__docgenInfo,path:"packages/docs-browser/src/components/DocumentView/DocumentView.js"});var DocumentViewContainer_mapActionCreators={emitAction:function emitAction(action){return actionEmitter.a.dispatchEmittedAction(action)}},DocumentViewContainer=Object(es.connect)((function(state){return{breadcrumbs:state.docs.path.breadcrumbs,formName:state.input.documentDetailFormName}}),DocumentViewContainer_mapActionCreators)(Object(index_es.injectIntl)(DocumentView_DocumentView)),BreadcrumbsContainer=Object(es.connect)((function(state){return{pathPrefix:"/docs",breadcrumbsInfo:state.docs.path.breadcrumbs}}),{})(Object(index_es.injectIntl)(src.d));function _templateObject3(){var data=taggedTemplateLiteral_default()(["\n  grid-area: breadcrumbs;\n  ","\n"]);return _templateObject3=function(){return data},data}function StyledComponents_templateObject2(){var data=taggedTemplateLiteral_default()(["\n  grid-area: content;\n  overflow-x: hidden;\n  ","\n"]);return StyledComponents_templateObject2=function(){return data},data}function DocsBrowser_StyledComponents_templateObject(){var data=taggedTemplateLiteral_default()(["\n  display: grid;\n  grid-template-rows: auto  1fr;\n  grid-template-areas:\n    'breadcrumbs'\n    'content';\n  height: 100%;\n  width: 100%;\n"]);return DocsBrowser_StyledComponents_templateObject=function(){return data},data}var StyledWrapper=styled_components_browser_esm.default.div(DocsBrowser_StyledComponents_templateObject()),StyledContent=styled_components_browser_esm.default.div(StyledComponents_templateObject2(),src.J),StyledBreadcrumbs=styled_components_browser_esm.default.div(_templateObject3(),(function(_ref){return _ref.noLeftPadding&&"\n    > div {\n      padding-left: 0;\n    }\n  "})),DocsBrowser=function(_ref){var history=_ref.history,searchMode=_ref.searchMode,navigationStrategy=_ref.navigationStrategy,setSearchMode=_ref.setSearchMode,loadBreadcrumbs=_ref.loadBreadcrumbs,emitAction=_ref.emitAction,openFileDialog=_ref.openFileDialog,theme=_ref.theme,embedded=_ref.embedded,noLeftPadding=_ref.noLeftPadding,_useReducer=Object(react.useReducer)((function(x){return x+1}),0),_useReducer2=slicedToArray_default()(_useReducer,2),docsViewNumber=_useReducer2[0],forceDocsViewUpdate=_useReducer2[1],location=Object(react_router.h)(),searchModeRef=Object(react.useRef)(searchMode);searchModeRef.current=searchMode,Object(react.useEffect)((function(){loadBreadcrumbs(location.pathname)}));var resetSearchMode=function(){searchModeRef.current&&(viewPersistor.a.clearPersistedViews(),setSearchMode(!1),loadBreadcrumbs(location.pathname),forceDocsViewUpdate())},handleSearchChange=function(e){e.query&&e.query.hasUserChanges?(setSearchMode(!0),history.push("/docs/"),loadBreadcrumbs(location.pathname)):utils_isRootLocation(history.location.pathname)&&resetSearchMode()},key="docs-view-".concat(docsViewNumber);return react_default.a.createElement(StyledWrapper,null,react_default.a.createElement(StyledBreadcrumbs,{noLeftPadding:noLeftPadding},react_default.a.createElement(BreadcrumbsContainer,extends_default()({},embedded?{backgroundColor:src.S.color("paper")({theme:theme})}:{},{onClick:function handleBreadcrumbsClick(breadcrumbsItem){""===breadcrumbsItem.path&&resetSearchMode()}}))),react_default.a.createElement(StyledContent,null,react_default.a.createElement(react_router.e,null,react_default.a.createElement(react_router.c,{exact:!0,path:"/docs/doc/:key/detail",render:function render(_ref2){var match=_ref2.match;return react_default.a.createElement(DocumentViewContainer,{match:match,history:history,navigationStrategy:navigationStrategy})}}),react_default.a.createElement(react_router.c,{exact:!0,path:["/docs/:model/:key/list","/docs"],render:function render(_ref3){var match=_ref3.match;return react_default.a.createElement(DocsViewContainer,{key:key,history:history,match:match,navigationStrategy:navigationStrategy,onSearchChange:handleSearchChange,emitAction:emitAction,openFileDialog:openFileDialog,searchMode:searchMode})}}))))};DocsBrowser.displayName="DocsBrowser",DocsBrowser.__docgenInfo={description:"",methods:[],displayName:"DocsBrowser",props:{loadBreadcrumbs:{type:{name:"func"},required:!0,description:""},setSearchMode:{type:{name:"func"},required:!0,description:""},emitAction:{type:{name:"func"},required:!0,description:""},openFileDialog:{type:{name:"func"},required:!0,description:""},history:{type:{name:"object"},required:!0,description:""},searchMode:{type:{name:"bool"},required:!0,description:""},navigationStrategy:{type:{name:"object"},required:!1,description:""},embedded:{type:{name:"bool"},required:!1,description:""},theme:{type:{name:"object"},required:!1,description:""},noLeftPadding:{type:{name:"bool"},required:!1,description:""}}};var DocsBrowser_DocsBrowser=Object(styled_components_browser_esm.withTheme)(DocsBrowser);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/docs-browser/src/components/DocsBrowser/DocsBrowser.js"]={name:"DocsBrowser",docgenInfo:DocsBrowser.__docgenInfo,path:"packages/docs-browser/src/components/DocsBrowser/DocsBrowser.js"});var setBreadcrumbs=function(breadcrumbs){return{type:"docs/path/SET_BREADCRUMBS",payload:{breadcrumbs:breadcrumbs}}},DocsBrowserContainer_mapActionCreators={loadBreadcrumbs:function(location){return{type:"docs/path/LOAD_BREADCRUMBS",payload:{location:location}}},setSearchMode:function(searchMode){return{type:"docs/path/SET_SEARCH_MODE",payload:{searchMode:searchMode}}},emitAction:function emitAction(action){return actionEmitter.a.dispatchEmittedAction(action)},openFileDialog:function(location,directory,onSuccess,onError){return{type:"docs/create/OPEN_DIALOG",payload:{location:location,directory:directory,onSuccess:onSuccess,onError:onError}}}},DocsBrowserContainer=Object(es.connect)((function(state){return{searchMode:state.docs.path.searchMode,navigationStrategy:state.input.navigationStrategy,embedded:state.input.embedded,noLeftPadding:state.input.noLeftPadding}}),DocsBrowserContainer_mapActionCreators)(Object(index_es.injectIntl)(DocsBrowser_DocsBrowser)),redux=__webpack_require__(92),redux_saga_effects_npm_proxy_esm=__webpack_require__(1),getNode=__webpack_require__(3673),_marked=regenerator_default.a.mark(getSearchBreadcrumbs),_marked2=regenerator_default.a.mark(sagas_loadBreadcrumbs),_marked3=regenerator_default.a.mark(getRootNodesParam),_marked4=regenerator_default.a.mark(mainSagas),textResourceSelector=function(state,key){return state.intl.messages[key]||key},docsPathSelector=function(state){return state.docs.path},rootNodesSelector=function(state){return state.input.rootNodes};function getSearchBreadcrumbs(){return regenerator_default.a.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Object(redux_saga_effects_npm_proxy_esm.f)(textResourceSelector,"client.docs-browser.breadcrumbs.start");case 2:return _context.t0=_context.sent,_context.t1={display:_context.t0,path:"",type:"list"},_context.next=6,Object(redux_saga_effects_npm_proxy_esm.f)(textResourceSelector,"client.docs-browser.breadcrumbs.searchResults");case 6:return _context.t2=_context.sent,_context.t3={display:_context.t2,path:"",type:"list"},_context.abrupt("return",[_context.t1,_context.t3]);case 9:case"end":return _context.stop()}}),_marked)}function sagas_loadBreadcrumbs(_ref){var location,node,breadcrumbs,url,options,result;return regenerator_default.a.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return location=_ref.payload.location,node=Object(getNode.a)(location),_context2.next=4,Object(redux_saga_effects_npm_proxy_esm.f)(docsPathSelector);case 4:if(!_context2.sent.searchMode||node){_context2.next=11;break}return _context2.next=8,Object(redux_saga_effects_npm_proxy_esm.b)(getSearchBreadcrumbs);case 8:breadcrumbs=_context2.sent,_context2.next=21;break;case 11:return url=node?"documents/".concat(node.model,"/").concat(node.key,"/breadcrumbs"):"documents/breadcrumbs",_context2.next=14,Object(redux_saga_effects_npm_proxy_esm.b)(getRootNodesParam);case 14:return _context2.t0=_context2.sent,_context2.t1={rootnodes:_context2.t0},options={queryParams:_context2.t1},_context2.next=19,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.requestSaga,url,options);case 19:result=_context2.sent,breadcrumbs=result.body.breadcrumbs;case 21:return _context2.next=23,Object(redux_saga_effects_npm_proxy_esm.e)(setBreadcrumbs(breadcrumbs));case 23:case"end":return _context2.stop()}}),_marked2)}function getRootNodesParam(){var rootNodes;return regenerator_default.a.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,Object(redux_saga_effects_npm_proxy_esm.f)(rootNodesSelector);case 2:return rootNodes=_context3.sent,_context3.abrupt("return",Array.isArray(rootNodes)&&0<rootNodes.length?rootNodes.map((function(node){return"".concat(node.entityName,"/").concat(node.key)})).join(","):null);case 4:case"end":return _context3.stop()}}),_marked3)}function mainSagas(){return regenerator_default.a.wrap((function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.j)("docs/path/LOAD_BREADCRUMBS",sagas_loadBreadcrumbs)]);case 2:case"end":return _context4.stop()}}),_marked4)}var _ACTION_HANDLERS,defineProperty=__webpack_require__(5),defineProperty_default=__webpack_require__.n(defineProperty),ACTION_HANDLERS=(_ACTION_HANDLERS={},defineProperty_default()(_ACTION_HANDLERS,"docs/path/SET_BREADCRUMBS",reducer.a.singleTransferReducer("breadcrumbs")),defineProperty_default()(_ACTION_HANDLERS,"docs/path/SET_SEARCH_MODE",reducer.a.singleTransferReducer("searchMode")),_ACTION_HANDLERS),initialState={breadcrumbs:[],searchMode:!1};function reducer_reducer(){var state=0<arguments.length&&void 0!==arguments[0]?arguments[0]:initialState,action=1<arguments.length?arguments[1]:void 0,handler=ACTION_HANDLERS[action.type];return handler?handler(state,action):state}reducer_reducer.__docgenInfo={description:"",methods:[],displayName:"reducer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/docs-browser/src/modules/path/reducer.js"]={name:"reducer",docgenInfo:reducer_reducer.__docgenInfo,path:"packages/docs-browser/src/modules/path/reducer.js"});var path_marked=regenerator_default.a.mark(sagas);function sagas(){return regenerator_default.a.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.d)(mainSagas)]);case 2:case"end":return _context.stop()}}),path_marked)}var path=reducer_reducer,v4=(__webpack_require__(79),__webpack_require__(3660));function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var sagas_marked=regenerator_default.a.mark(handleFilesSelected),sagas_marked2=regenerator_default.a.mark(createDocuments),sagas_marked3=regenerator_default.a.mark(sagas_mainSagas),dialogSelector=function(state){return state.docs.create.dialog},sagas_textResourceSelector=function(state,key){return state.intl.messages[key]};function handleFilesSelected(_ref){var _ref$payload,files,isDirectory,blockingInfoId,_yield$select,location,onSuccess,onError,response,remoteEvents,msgId;return regenerator_default.a.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _ref$payload=_ref.payload,files=_ref$payload.files,isDirectory=_ref$payload.isDirectory,_context.next=3,Object(redux_saga_effects_npm_proxy_esm.b)(v4.a);case 3:return blockingInfoId=_context.sent,_context.next=6,Object(redux_saga_effects_npm_proxy_esm.e)(notifier.a.blockingInfo(blockingInfoId,isDirectory?"client.docs-browser.uploadInProgressDirectory":1<files.length?"client.docs-browser.uploadInProgressMultiple":"client.docs-browser.uploadInProgress",null));case 6:return _context.next=8,Object(redux_saga_effects_npm_proxy_esm.f)(dialogSelector);case 8:return _yield$select=_context.sent,location=_yield$select.location,onSuccess=_yield$select.onSuccess,onError=_yield$select.onError,_context.prev=12,_context.next=15,Object(redux_saga_effects_npm_proxy_esm.b)(createDocuments,location,files);case 15:return response=_context.sent,remoteEvents=[{type:"entity-create-event",payload:{entities:response.body.items.filter((function(item){return 201===item.status})).map((function(item){return{entityName:item.bean.model,key:item.bean.key}}))}}],_context.next=19,Object(redux_saga_effects_npm_proxy_esm.e)(notifier.a.removeBlockingInfo(blockingInfoId));case 19:return msgId=isDirectory?"client.docs-browser.uploadSuccessfulDirectory":"client.docs-browser.uploadSuccessful",_context.t0=onSuccess,_context.next=23,Object(redux_saga_effects_npm_proxy_esm.f)(sagas_textResourceSelector,msgId);case 23:_context.t1=_context.sent,_context.t2=remoteEvents,_context.t3={message:_context.t1,remoteEvents:_context.t2},(0,_context.t0)(_context.t3),_context.next=40;break;case 29:return _context.prev=29,_context.t4=_context.catch(12),consoleLogger.a.logError("Failed to upload files",_context.t4),_context.next=34,Object(redux_saga_effects_npm_proxy_esm.e)(notifier.a.removeBlockingInfo(blockingInfoId));case 34:return _context.t5=onError,_context.next=37,Object(redux_saga_effects_npm_proxy_esm.f)(sagas_textResourceSelector,"client.docs-browser.uploadFailed");case 37:_context.t6=_context.sent,_context.t7={message:_context.t6},(0,_context.t5)(_context.t7);case 40:case"end":return _context.stop()}}),sagas_marked,null,[[12,29]])}function createDocuments(location,files){var node,formData,_iterator,_step,file,resource,options;return regenerator_default.a.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(node=Object(getNode.a)(location)){_context2.next=3;break}return _context2.abrupt("return");case 3:formData=new FormData,_iterator=_createForOfIteratorHelper(files);try{for(_iterator.s();!(_step=_iterator.n()).done;)file=_step.value,formData.append("files",file)}catch(err){_iterator.e(err)}finally{_iterator.f()}return resource="documents/".concat(node.model,"/").concat(node.key),options={method:"POST",body:formData},_context2.next=10,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.requestSaga,resource,options);case 10:return _context2.abrupt("return",_context2.sent);case 11:case"end":return _context2.stop()}}),sagas_marked2)}function sagas_mainSagas(){return regenerator_default.a.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.i)("docs/create/FILES_SELECTED",handleFilesSelected)]);case 2:case"end":return _context3.stop()}}),sagas_marked3)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}var reducer_ACTION_HANDLERS=defineProperty_default()({},"docs/create/OPEN_DIALOG",(function(state,_ref){var _ref$payload=_ref.payload,location=_ref$payload.location,directory=_ref$payload.directory,onSuccess=_ref$payload.onSuccess,onError=_ref$payload.onError;return _objectSpread(_objectSpread({},state),{},{dialog:{instanceCount:state.dialog.instanceCount+1,directory:directory,location:location,onSuccess:onSuccess,onError:onError}})})),reducer_initialState={dialog:{instanceCount:0,directory:!1,location:null,onSuccess:null,onError:null}};function create_reducer_reducer(){var state=0<arguments.length&&void 0!==arguments[0]?arguments[0]:reducer_initialState,action=1<arguments.length?arguments[1]:void 0,handler=reducer_ACTION_HANDLERS[action.type];return handler?handler(state,action):state}create_reducer_reducer.__docgenInfo={description:"",methods:[],displayName:"reducer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/docs-browser/src/modules/create/reducer.js"]={name:"reducer",docgenInfo:create_reducer_reducer.__docgenInfo,path:"packages/docs-browser/src/modules/create/reducer.js"});var create_marked=regenerator_default.a.mark(create_sagas);function create_sagas(){return regenerator_default.a.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.d)(sagas_mainSagas)]);case 2:case"end":return _context.stop()}}),create_marked)}var create=create_reducer_reducer,list_sagas_marked=regenerator_default.a.mark(sagas_changeListParent),list_sagas_marked2=regenerator_default.a.mark(list_sagas_mainSagas);function sagas_changeListParent(_ref){var payload;return regenerator_default.a.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return payload=_ref.payload,_context.next=3,Object(redux_saga_effects_npm_proxy_esm.e)(externalEvents.a.fireExternalEvent("onListParentChange",payload.parent));case 3:case"end":return _context.stop()}}),list_sagas_marked)}function list_sagas_mainSagas(){return regenerator_default.a.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.j)("docs/list/CHANGE_LIST_PARENT",sagas_changeListParent)]);case 2:case"end":return _context2.stop()}}),list_sagas_marked2)}var move_reducer_ACTION_HANDLERS,validation=__webpack_require__(1036),move_actions=__webpack_require__(3678),move_sagas_marked=regenerator_default.a.mark(moveElements),move_sagas_marked2=regenerator_default.a.mark(setDone),move_sagas_marked3=regenerator_default.a.mark(move_sagas_mainSagas),inputSelector=function(state){return state.docs.move.input},move_sagas_textResourceSelector=function(state,key){return state.intl.messages[key]};function moveElements(_ref){var payload,resource,options,response,message;return regenerator_default.a.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return payload=_ref.payload,resource="documents/move",options={method:"POST",acceptedStatusCodes:[400],body:{targetEntityKey:payload.target,selectedEntityKeys:payload.selected}},_context.next=5,Object(redux_saga_effects_npm_proxy_esm.e)(move_actions.h(!0));case 5:return _context.next=7,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.requestSaga,resource,options);case 7:if(204!==(response=_context.sent).status){_context.next=13;break}return _context.next=11,Object(redux_saga_effects_npm_proxy_esm.b)(setDone);case 11:_context.next=19;break;case 13:return _context.next=15,Object(redux_saga_effects_npm_proxy_esm.e)(move_actions.h(!1));case 15:return message="client.actions.dms-move.failed.message","VALIDATION_FAILED"===response.body.errorCode&&(message=validation.a.getErrorCompact(response.body.errors)),_context.next=19,Object(redux_saga_effects_npm_proxy_esm.e)(notifier.a.info("error","client.actions.dms-move.failed.title",message,"exclamation"));case 19:case"end":return _context.stop()}}),move_sagas_marked)}function setDone(){var _yield$select,selection,onSuccess,remoteEvents;return regenerator_default.a.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,Object(redux_saga_effects_npm_proxy_esm.f)(inputSelector);case 2:return _yield$select=_context2.sent,selection=_yield$select.selection,onSuccess=_yield$select.onSuccess,remoteEvents=[{type:"entity-update-event",payload:{entities:selection.ids.map((function(id){return{entityName:"Docs_list_item",key:id}}))}}],_context2.t0=onSuccess,_context2.next=9,Object(redux_saga_effects_npm_proxy_esm.f)(move_sagas_textResourceSelector,"client.docs-browser.moveSuccessful");case 9:return _context2.t1=_context2.sent,_context2.t2=remoteEvents,_context2.t3={message:_context2.t1,remoteEvents:_context2.t2},(0,_context2.t0)(_context2.t3),_context2.next=15,Object(redux_saga_effects_npm_proxy_esm.e)(move_actions.e());case 15:case"end":return _context2.stop()}}),move_sagas_marked2)}function move_sagas_mainSagas(){return regenerator_default.a.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.j)(move_actions.c,moveElements)]);case 2:case"end":return _context3.stop()}}),move_sagas_marked3)}function reducer_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function reducer_objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?reducer_ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):reducer_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}var modules_move_reducer_ACTION_HANDLERS=(move_reducer_ACTION_HANDLERS={},defineProperty_default()(move_reducer_ACTION_HANDLERS,move_actions.b,(function(state,_ref){var _ref$payload=_ref.payload,selection=_ref$payload.selection,onSuccess=_ref$payload.onSuccess,onError=_ref$payload.onError;return reducer_objectSpread(reducer_objectSpread({},state),{},{input:{selection:selection,onSuccess:onSuccess,onError:onError}})})),defineProperty_default()(move_reducer_ACTION_HANDLERS,move_actions.d,reducer.a.singleTransferReducer("isWaiting")),defineProperty_default()(move_reducer_ACTION_HANDLERS,move_actions.a,(function(){return reducer_objectSpread({},move_reducer_initialState)})),move_reducer_ACTION_HANDLERS),move_reducer_initialState={isWaiting:!1,input:{selection:null,onSuccess:null,onError:null}};function move_reducer_reducer(){var state=0<arguments.length&&void 0!==arguments[0]?arguments[0]:move_reducer_initialState,action=1<arguments.length?arguments[1]:void 0,handler=modules_move_reducer_ACTION_HANDLERS[action.type];return handler?handler(state,action):state}move_reducer_reducer.__docgenInfo={description:"",methods:[],displayName:"reducer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/docs-browser/src/modules/move/reducer.js"]={name:"reducer",docgenInfo:move_reducer_reducer.__docgenInfo,path:"packages/docs-browser/src/modules/move/reducer.js"});var move_marked=regenerator_default.a.mark(move_sagas);function move_sagas(){return regenerator_default.a.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.d)(move_sagas_mainSagas)]);case 2:case"end":return _context.stop()}}),move_marked)}var move=move_reducer_reducer,reducers={docs:Object(redux.combineReducers)({path:path,create:create,move:move})},reducers_sagas=[sagas,create_sagas,list_sagas_mainSagas,move_sagas];function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=getPrototypeOf_default()(Derived);if(hasNativeReflectConstruct){var NewTarget=getPrototypeOf_default()(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return possibleConstructorReturn_default()(this,result)}}var EXTERNAL_EVENTS=["onListParentChange","openResource"],main_textResourceSelector=function(state,key){return state.intl.messages[key]||key},createHistory=function(store,memoryHistory){return(memoryHistory?createMemoryHistory_default.a:createHashHistory_default.a)({getUserConfirmation:function getUserConfirmation(message,confirmCallback){var state=store.getState(),okText=main_textResourceSelector(state,"client.common.ok"),cancelText=main_textResourceSelector(state,"client.common.cancel"),action=notifier.a.confirm("",message,okText,cancelText,(function(){return confirmCallback(!0)}),(function(){return confirmCallback(!1)}));store.dispatch(action)}})},main_ref=react_default.a.createElement(notifier.a.Notifier,null),initApp=function(id,input){var events=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},publicPath=3<arguments.length?arguments[3]:void 0,store=appFactory.a.createStore(reducers,reducers_sagas,input,"docs-browser");externalEvents.a.addToStore(store,events),actionEmitter.a.addToStore(store),errorLogging.a.addToStore(store,!0,["console","remote","notifier"]);var handleNotifications=!events.emitAction;notifier.a.addToStore(store,handleNotifications),input.businessUnit&&rest.a.setBusinessUnit(input.businessUnit);var history=input.history||createHistory(store,input.memoryHistory);input.initialLocation&&history.push(input.initialLocation);var singleRootNode=Array.isArray(input.rootNodes)&&1===input.rootNodes.length&&"Resource"!==input.rootNodes[0].entityName?input.rootNodes[0]:null,startUrl=singleRootNode?"/docs/".concat(singleRootNode.entityName.toLowerCase(),"/").concat(singleRootNode.key,"/list"):"/docs",content=react_default.a.createElement(react_router.d,{history:history},handleNotifications&&main_ref,react_default.a.createElement(DocsBrowserContainer,{history:history}),react_default.a.createElement(react_router.c,{exact:!0,path:"/"},react_default.a.createElement(react_router.b,{to:startUrl})),singleRootNode&&react_default.a.createElement(react_router.c,{exact:!0,path:"/docs"},react_default.a.createElement(react_router.b,{to:startUrl})));return appFactory.a.createApp("docs-browser",content,store,{input:input,events:events,actions:[],publicPath:publicPath,textResourceModules:["component","common","actions","entity-list","entity-detail","docs-browser"]})},main_DocsBrowserApp=function(_React$Component){inherits_default()(DocsBrowserApp,_React$Component);var _super=_createSuper(DocsBrowserApp);function DocsBrowserApp(props){var _this;classCallCheck_default()(this,DocsBrowserApp),_this=_super.call(this,props);var events=EXTERNAL_EVENTS.reduce((function(events,event){return props[event]&&(events[event]=props[event]),events}),{});return _this.app=initApp("docs-browser",props,events),_this}return createClass_default()(DocsBrowserApp,[{key:"render",value:function render(){return this.app.component}}]),DocsBrowserApp}(react_default.a.Component);main_DocsBrowserApp.displayName="DocsBrowserApp",main_DocsBrowserApp.__docgenInfo={description:"",methods:[],displayName:"DocsBrowserApp",props:{history:{type:{name:"object"},required:!1,description:""},navigationStrategy:{type:{name:"object"},required:!1,description:""},domainTypes:{type:{name:"arrayOf",value:{name:"string"}},required:!1,description:""},rootNodes:{type:{name:"arrayOf",value:{name:"shape",value:{entityName:{name:"string",required:!1},key:{name:"string",required:!1}}}},required:!1,description:""},initialLocation:{type:{name:"string"},required:!1,description:""},listLimit:{type:{name:"number"},required:!1,description:""},documentDetailFormName:{type:{name:"string"},required:!1,description:""},searchFormType:{type:{name:"custom",raw:"searchFormTypePropTypes"},required:!1,description:""},selectionStyle:{type:{name:"custom",raw:"selectionStylePropType"},required:!1,description:""},getListFormName:{type:{name:"func"},required:!1,description:""},memoryHistory:{type:{name:"bool"},required:!1,description:""},disableViewPersistor:{type:{name:"bool"},required:!1,description:""},getCustomLocation:{type:{name:"func"},required:!1,description:""},businessUnit:{type:{name:"string"},required:!1,description:""}}};__webpack_exports__.a=main_DocsBrowserApp;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/docs-browser/src/main.js"]={name:"DocsBrowserApp",docgenInfo:main_DocsBrowserApp.__docgenInfo,path:"packages/docs-browser/src/main.js"})}}]);
//# sourceMappingURL=2.6abf12b39f3038b54bc4.bundle.js.map