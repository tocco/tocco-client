(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{2176:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _formErrors2=_interopRequireDefault(__webpack_require__(2239)),_formBuilder2=_interopRequireDefault(__webpack_require__(2437)),_formDefinition=__webpack_require__(2293),_syncValidation2=_interopRequireDefault(__webpack_require__(2443)),_reduxForm=__webpack_require__(2294),_componentTypes2=_interopRequireDefault(__webpack_require__(2241)),_layoutTypes2=_interopRequireDefault(__webpack_require__(2295)),_scopes2=_interopRequireDefault(__webpack_require__(2449)),_validators2=_interopRequireDefault(__webpack_require__(2296));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default={formErrorsUtil:_formErrors2.default,initFormBuilder:_formBuilder2.default,getFieldId:_formDefinition.getFieldId,getFieldDefinitions:_formDefinition.getFieldDefinitions,getDefaultValues:_formDefinition.getDefaultValues,getFieldNames:_formDefinition.getFieldNames,fetchForm:_formDefinition.fetchForm,formValuesToEntity:_reduxForm.formValuesToEntity,entityToFormValues:_reduxForm.entityToFormValues,getDirtyFields:_reduxForm.getDirtyFields,validationErrorToFormError:_reduxForm.validationErrorToFormError,transformFieldName:_reduxForm.transformFieldName,transformFieldNameBack:_reduxForm.transformFieldNameBack,syncValidation:_syncValidation2.default,componentTypes:_componentTypes2.default,layoutTypes:_layoutTypes2.default,scopes:_scopes2.default,validators:_validators2.default}},2185:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _actions=__webpack_require__(2227),_addToStore2=_interopRequireDefault(__webpack_require__(2381)),actions=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(2228)),_ActionContainer2=_interopRequireDefault(__webpack_require__(2394));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default={isAction:_actions.isAction,Action:_ActionContainer2.default,addToStore:_addToStore2.default,actions:actions}},2189:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var SET_INITIALIZED=exports.SET_INITIALIZED="searchForm/SET_INITIALIZED",INITIALIZE=exports.INITIALIZE="searchForm/INITIALIZE",SET_FORM_DEFINITION=exports.SET_FORM_DEFINITION="searchForm/SET_FORM_DEFINITION",LOAD_SEARCH_FILTERS=exports.LOAD_SEARCH_FILTERS="searchForm/LOAD_SEARCH_FILTERS",SET_SEARCH_FILTER=exports.SET_SEARCH_FILTER="searchForm/SET_SEARCH_FILTER",EXECUTE_SEARCH=exports.EXECUTE_SEARCH="searchForm/EXECUTE_SEARCH",RESET_SEARCH=exports.RESET_SEARCH="searchForm/RESET_SEARCH",SET_SHOW_EXTENDED_SEARCH_FORM=exports.SET_SHOW_EXTENDED_SEARCH_FORM="searchForm/SET_SHOW_EXTENDED_SEARCH_FORM",SET_SIMPLE_SEARCH_FIELDS=exports.SET_SIMPLE_SEARCH_FIELDS="searchForm/SET_SIMPLE_SEARCH_FIELDS",SET_DISABLE_SIMPLE_SEARCH=(exports.SET_PRESELECTED_SEARCH_FIELDS="searchForm/SET_PRESELECTED_SEARCH_FIELDS",exports.SET_DISABLE_SIMPLE_SEARCH="searchForm/SET_DISABLE_SIMPLE_SEARCH"),SET_SEARCH_FORM_NAME=exports.SET_SEARCH_FORM_NAME="searchForm/SET_SEARCH_FORM_NAME",SUBMIT_SEARCH_FORM=exports.SUBMIT_SEARCH_FORM="searchForm/SUBMIT_SEARCH_FORM",SET_VALUES_INITIALIZED=exports.SET_VALUES_INITIALIZED="searchForm/SET_VALUES_INITIALIZED",ADVANCED_SEARCH_UPDATE=exports.ADVANCED_SEARCH_UPDATE="searchForm/ADVANCED_SEARCH_UPDATE",SET_SHOW_FULL_TEXT_SEARCH_FORM=exports.SET_SHOW_FULL_TEXT_SEARCH_FORM="searchForm/SET_SHOW_FULL_TEXT_SEARCH_FORM",SET_FORM_FIELDS_FLAT=exports.SET_FORM_FIELDS_FLAT="searchForm/SET_FORM_FIELDS_FLAT";exports.setInitialized=function(){var initialized=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{type:SET_INITIALIZED,payload:{initialized:initialized}}},exports.initialize=function(searchFormVisible){return{type:INITIALIZE,payload:{searchFormVisible:searchFormVisible}}},exports.setFormDefinition=function(formDefinition){return{type:SET_FORM_DEFINITION,payload:{formDefinition:formDefinition}}},exports.loadSearchFilters=function(model,group){return{type:LOAD_SEARCH_FILTERS,payload:{model:model,group:group}}},exports.setSearchFilter=function(filter){return{type:SET_SEARCH_FILTER,payload:{filter:filter}}},exports.executeSearch=function(){return{type:EXECUTE_SEARCH}},exports.resetSearch=function(){return{type:RESET_SEARCH}},exports.setShowExtendedSearchForm=function(showExtendedSearchForm){return{type:SET_SHOW_EXTENDED_SEARCH_FORM,payload:{showExtendedSearchForm:showExtendedSearchForm}}},exports.setSimpleSearchFields=function(simpleSearchFields){return{type:SET_SIMPLE_SEARCH_FIELDS,payload:{simpleSearchFields:simpleSearchFields}}},exports.setDisableSimpleSearch=function(disableSimpleSearch){return{type:SET_DISABLE_SIMPLE_SEARCH,payload:{disableSimpleSearch:disableSimpleSearch}}},exports.setSearchFormName=function(searchFormName){return{type:SET_SEARCH_FORM_NAME,payload:{searchFormName:searchFormName}}},exports.submitSearchForm=function(){return{type:SUBMIT_SEARCH_FORM}},exports.setValuesInitialized=function(valuesInitialized){return{type:SET_VALUES_INITIALIZED,payload:{valuesInitialized:valuesInitialized}}},exports.advancedSearchUpdate=function(field,ids){return{type:ADVANCED_SEARCH_UPDATE,payload:{field:field,ids:ids}}},exports.setShowFullTextSearchForm=function(showFullTextSearchForm){return{type:SET_SHOW_FULL_TEXT_SEARCH_FORM,payload:{showFullTextSearchForm:showFullTextSearchForm}}},exports.setFormFieldsFlat=function(formFieldsFlat){return{type:SET_FORM_FIELDS_FLAT,payload:{formFieldsFlat:formFieldsFlat}}}},2191:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _formData=__webpack_require__(2419),_actions=__webpack_require__(2208),_actions2=__webpack_require__(2232),_actions3=__webpack_require__(2279);exports.default={addToStore:_formData.addToStore,loadRelationEntities:_actions.loadRelationEntities,loadTooltip:_actions2.loadTooltip,relationEntitiesSelector:_formData.relationEntitiesSelector,tooltipSelector:_formData.tooltipSelector,openAdvancedSearch:_actions3.openAdvancedSearch,formDataPropType:_formData.formDataPropType}},2198:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes2=_interopRequireDefault(__webpack_require__(2174)),_react2=_interopRequireDefault(__webpack_require__(0)),_storeStorage2=_interopRequireDefault(__webpack_require__(2379)),_appFactory2=(_interopRequireDefault(__webpack_require__(111)),_interopRequireDefault(__webpack_require__(266))),_notifier2=_interopRequireDefault(__webpack_require__(168)),_errorLogging2=_interopRequireDefault(__webpack_require__(264)),_actionEmitter2=_interopRequireDefault(__webpack_require__(263)),_externalEvents2=_interopRequireDefault(__webpack_require__(899)),_actions2=_interopRequireDefault(__webpack_require__(2185)),_formData2=_interopRequireDefault(__webpack_require__(2191)),_pickBy3=_interopRequireDefault(__webpack_require__(2428)),_isEqual3=_interopRequireDefault(__webpack_require__(2280)),_main2=_interopRequireDefault(__webpack_require__(2281)),_reducers=__webpack_require__(2458),_reducers2=_interopRequireDefault(_reducers),_EntityListContainer2=_interopRequireDefault(__webpack_require__(2471)),_input=__webpack_require__(2530),_selectionStyles=__webpack_require__(2247);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EXTERNAL_EVENTS=["onRowClick","onNavigateToCreate","emitAction","onSelectChange"],initApp=function(id,input){var events=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},publicPath=arguments[3],content=_react2.default.createElement(_EntityListContainer2.default,null),dispatchActions=void 0,store=void 0;return input.keepStore&&(store=_storeStorage2.default.get(id)),store||(store=_appFactory2.default.createStore(_reducers2.default,_reducers.sagas,input,"entity-list"),_externalEvents2.default.addToStore(store,events),_actionEmitter2.default.addToStore(store,events.emitAction),_errorLogging2.default.addToStore(store,!1),_notifier2.default.addToStore(store,!1),_actions2.default.addToStore(store,{formApp:_main2.default,listApp:EntityListApp}),_formData2.default.addToStore(store),dispatchActions=(0,_input.getDispatchActions)(input,!0),_storeStorage2.default.set(id,store)),_appFactory2.default.createApp("entity-list",content,store,{input:input,events:events,actions:dispatchActions,publicPath:publicPath,textResourceModules:["component","common"]})};_appFactory2.default.registerAppInRegistry("entity-list",initApp);var EntityListApp=function(_React$Component){function EntityListApp(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EntityListApp);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(EntityListApp.__proto__||Object.getPrototypeOf(EntityListApp)).call(this,props));_this.componentWillReceiveProps=function(nextProps){var changedProps=(0,_pickBy3.default)(nextProps,function(value,key){return!(0,_isEqual3.default)(value,_this.props[key])});(0,_input.getDispatchActions)(changedProps).forEach(function(action){_this.app.store.dispatch(action)})};var events=EXTERNAL_EVENTS.reduce(function(events,event){return props[event]&&(events[event]=props[event]),events},{});return _this.app=initApp(props.id,props,events),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(EntityListApp,_react2.default.Component),_createClass(EntityListApp,[{key:"render",value:function(){return _react2.default.createElement("div",null,this.app.renderComponent())}}]),EntityListApp}();EntityListApp.propTypes=_extends({id:_propTypes2.default.string.isRequired,entityName:_propTypes2.default.string.isRequired,formBase:_propTypes2.default.string.isRequired,keepStore:_propTypes2.default.bool,limit:_propTypes2.default.number,showSearchForm:_propTypes2.default.bool,showCreateButton:_propTypes2.default.bool,searchFilters:_propTypes2.default.arrayOf(_propTypes2.default.string),preselectedSearchFields:_propTypes2.default.arrayOf(_propTypes2.default.shape({id:_propTypes2.default.string,value:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number,_propTypes2.default.arrayOf(_propTypes2.default.number),_propTypes2.default.arrayOf(_propTypes2.default.string)]),hidden:_propTypes2.default.bool})),disableSimpleSearch:_propTypes2.default.bool,simpleSearchFields:_propTypes2.default.string,onSelectChange:_propTypes2.default.func,selectionStyle:_selectionStyles.selectionStylePropType,selection:_propTypes2.default.arrayOf(_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]))},EXTERNAL_EVENTS.reduce(function(propTypes,event){return propTypes[event]=_propTypes2.default.func,propTypes},{}),{selectOnRowClick:_propTypes2.default.bool,parent:_propTypes2.default.shape({id:_propTypes2.default.string,value:_propTypes2.default.string})}),exports.default=EntityListApp,EntityListApp.__docgenInfo={description:"",methods:[{name:"componentWillReceiveProps",docblock:null,modifiers:[],params:[{name:"nextProps",type:null}],returns:null}],displayName:"EntityListApp",props:{id:{type:{name:"string"},required:!0,description:""},entityName:{type:{name:"string"},required:!0,description:""},formBase:{type:{name:"string"},required:!0,description:""},keepStore:{type:{name:"bool"},required:!1,description:""},limit:{type:{name:"number"},required:!1,description:""},showSearchForm:{type:{name:"bool"},required:!1,description:""},showCreateButton:{type:{name:"bool"},required:!1,description:""},searchFilters:{type:{name:"arrayOf",value:{name:"string"}},required:!1,description:""},preselectedSearchFields:{type:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!1},value:{name:"union",value:[{name:"string"},{name:"number"},{name:"arrayOf",value:{name:"number"}},{name:"arrayOf",value:{name:"string"}}],required:!1},hidden:{name:"bool",required:!1}}}},required:!1,description:""},disableSimpleSearch:{type:{name:"bool"},required:!1,description:""},simpleSearchFields:{type:{name:"string"},required:!1,description:""},onSelectChange:{type:{name:"func"},required:!1,description:""},selectionStyle:{type:{name:"custom",raw:"selectionStylePropType"},required:!1,description:""},selection:{type:{name:"arrayOf",value:{name:"union",value:[{name:"string"},{name:"number"}]}},required:!1,description:""},selectOnRowClick:{type:{name:"bool"},required:!1,description:""},parent:{type:{name:"shape",value:{id:{name:"string",required:!1},value:{name:"string",required:!1}}},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/entity-list/src/main.js"]={name:"EntityListApp",docgenInfo:EntityListApp.__docgenInfo,path:"packages/entity-list/src/main.js"})},2202:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _formField=__webpack_require__(2441),_editableValueFactory2=_interopRequireDefault(__webpack_require__(2291)),_formattedValueFactory2=_interopRequireDefault(__webpack_require__(2292)),_defaultMapping2=_interopRequireDefault(__webpack_require__(2442));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default={formFieldFactory:_formField.formFieldFactory,editableValueFactory:_editableValueFactory2.default,formattedValueFactory:_formattedValueFactory2.default,defaultMapping:_defaultMapping2.default}},2203:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var SET_INITIALIZED=exports.SET_INITIALIZED="entityList/SET_INITIALIZED",INITIALIZE=exports.INITIALIZE="entityList/INITIALIZE",SET_SHOW_SEARCH_FORM=exports.SET_SHOW_SEARCH_FORM="entityList/SET_SHOW_SEARCH_FORM",SET_ENTITY_NAME=exports.SET_ENTITY_NAME="entityList/SET_ENTITY_NAME",SET_ENTITY_MODEL=exports.SET_ENTITY_MODEL="entityList/SET_ENTITY_MODEL",SET_SHOW_CREATE_BUTTON=exports.SET_SHOW_CREATE_BUTTON="entityList/SET_SHOW_CREATE_BUTTON",SET_PARENT=exports.SET_PARENT="entityList/SET_PARENT";exports.setInitialized=function(){var initialized=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{type:SET_INITIALIZED,payload:{initialized:initialized}}},exports.initialize=function(){return{type:INITIALIZE}},exports.setEntityModel=function(entityModel){return{type:SET_ENTITY_MODEL,payload:{entityModel:entityModel}}},exports.setShowSearchForm=function(showSearchForm){return{type:SET_SHOW_SEARCH_FORM,payload:{showSearchForm:showSearchForm}}},exports.setEntityName=function(entityName){return{type:SET_ENTITY_NAME,payload:{entityName:entityName}}},exports.setShowCreateButton=function(showCreateButton){return{type:SET_SHOW_CREATE_BUTTON,payload:{showCreateButton:showCreateButton}}},exports.setParent=function(parent){return{type:SET_PARENT,payload:{parent:parent}}}},2204:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var INITIALIZE=exports.INITIALIZE="list/INITIALIZE",SET_INITIALIZED=exports.SET_INITIALIZED="list/SET_INITIALIZED",REQUEST_ENTITIES=exports.REQUEST_ENTITIES="list/REQUEST_ENTITIES",SET_ENTITIES=exports.SET_ENTITIES="list/SET_ENTITIES",SET_FORM_DEFINITION=exports.SET_FORM_DEFINITION="list/SET_FORM_DEFINITION",SET_ENTITY_MODEL=exports.SET_ENTITY_MODEL="list/SET_ENTITY_MODEL",SET_SORTING=exports.SET_SORTING="list/SET_SORTING",SET_LIMIT=exports.SET_LIMIT="list/SET_LIMIT",SET_CURRENT_PAGE=exports.SET_CURRENT_PAGE="list/SET_CURRENT_PAGE",SET_ENTITY_COUNT=exports.SET_ENTITY_COUNT="list/SET_ENTITY_COUNT",ADD_ENTITIES_TO_STORE=exports.ADD_ENTITIES_TO_STORE="list/ADD_ENTITIES_TO_STORE",CLEAR_ENTITY_STORE=exports.CLEAR_ENTITY_STORE="list/CLEAR_ENTITIES_CACHE",RESET_DATA_SET=exports.RESET_DATA_SET="list/RESET_DATA_SET",SET_IN_PROGRESS=exports.SET_IN_PROGRESS="list/SET_IN_PROGRESS",CHANGE_PAGE=exports.CHANGE_PAGE="list/CHANGE_PAGE",REFRESH=exports.REFRESH="list/REFRESH",SET_SHOW_SEARCH_FORM=exports.SET_SHOW_SEARCH_FORM="list/SET_SEARCH_FORM",SET_SEARCH_FILTERS=exports.SET_SEARCH_FILTERS="list/SET_SEARCH_FILTERS",SET_LIST_FORM_NAME=(exports.SET_SIMPLE_SEARCH_FIELDS="list/SET_SIMPLE_SEARCH_FIELDS",exports.SET_LIST_FORM_NAME="list/SET_LIST_FORM_NAME"),ON_ROW_CLICK=exports.ON_ROW_CLICK="list/ON_ROW_CLICK",NAVIGATE_TO_CREATE=exports.NAVIGATE_TO_CREATE="entityList/NAVIGATE_TO_CREATE",SET_CREATE_PERMISSION=exports.SET_CREATE_PERMISSION="list/SET_CREATE_PERMISSION",SET_SELECTABLE=exports.SET_SELECTABLE="list/SET_SELECTABLE",ON_SELECT_CHANGE=exports.ON_SELECT_CHANGE="list/ON_ROW_SELECT",SET_SELECTION=exports.SET_SELECTION="list/SET_SELECTION",SET_ENDPOINT=exports.SET_ENDPOINT="list/SET_ENDPOINT";exports.initialize=function(){return{type:INITIALIZE}},exports.setInitialized=function(){var initialized=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{type:SET_INITIALIZED,payload:{initialized:initialized}}},exports.requestEntities=function(page,show){return{type:REQUEST_ENTITIES,payload:{page:page,show:show}}},exports.setEntities=function(entities){return{type:SET_ENTITIES,payload:{entities:entities}}},exports.addEntitiesToStore=function(page,entities){return{type:ADD_ENTITIES_TO_STORE,payload:{page:page,entities:entities}}},exports.clearEntityStore=function(){return{type:CLEAR_ENTITY_STORE}},exports.setEntityCount=function(entityCount){return{type:SET_ENTITY_COUNT,payload:{entityCount:entityCount}}},exports.setFormDefinition=function(formDefinition){return{type:SET_FORM_DEFINITION,payload:{formDefinition:formDefinition}}},exports.setEntityModel=function(entityModel){return{type:SET_ENTITY_MODEL,payload:{entityModel:entityModel}}},exports.setSorting=function(sorting){return{type:SET_SORTING,payload:{sorting:sorting}}},exports.setLimit=function(limit){return{type:SET_LIMIT,payload:{limit:limit}}},exports.resetDataSet=function(){return{type:RESET_DATA_SET}},exports.setCurrentPage=function(currentPage){return{type:SET_CURRENT_PAGE,payload:{currentPage:currentPage}}},exports.setInProgress=function(inProgress){return{type:SET_IN_PROGRESS,payload:{inProgress:inProgress}}},exports.changePage=function(page){return{type:CHANGE_PAGE,payload:{page:page}}},exports.refresh=function(){return{type:REFRESH}},exports.setShowSearchForm=function(showSearchForm){return{type:SET_SHOW_SEARCH_FORM,payload:{showSearchForm:showSearchForm}}},exports.setSearchFilters=function(searchFilters){return{type:SET_SEARCH_FILTERS,payload:{searchFilters:searchFilters}}},exports.setListFormName=function(listFormName){return{type:SET_LIST_FORM_NAME,payload:{listFormName:listFormName}}},exports.onRowClick=function(id){return{type:ON_ROW_CLICK,payload:{id:id}}},exports.navigateToCreate=function(){return{type:NAVIGATE_TO_CREATE}},exports.setCreatePermission=function(createPermission){return{type:SET_CREATE_PERMISSION,payload:{createPermission:createPermission}}},exports.setSelectable=function(selectable){return{type:SET_SELECTABLE,payload:{selectable:selectable}}},exports.onSelectChange=function(keys,isSelected){return{type:ON_SELECT_CHANGE,payload:{keys:keys,isSelected:isSelected}}},exports.setSelection=function(selection){return{type:SET_SELECTION,payload:{selection:selection}}},exports.setEndpoint=function(endpoint){return{type:SET_ENDPOINT,payload:{endpoint:endpoint}}}},2208:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var LOAD_RELATION_ENTITIES=exports.LOAD_RELATION_ENTITIES="formData/LOAD_RELATION_ENTITIES",SET_RELATION_ENTITIES=exports.SET_RELATION_ENTITIES="formData/SET_RELATION_ENTITIES",SET_RELATION_ENTITIES_LOADING=exports.SET_RELATION_ENTITIES_LOADING="formData/SET_RELATION_ENTITIES_LOADING";exports.loadRelationEntities=function(fieldName,entityName,options){return{type:LOAD_RELATION_ENTITIES,payload:{fieldName:fieldName,entityName:entityName,options:options}}},exports.setRelationEntityLoading=function(fieldName){return{type:SET_RELATION_ENTITIES_LOADING,payload:{fieldName:fieldName}}},exports.setRelationEntities=function(fieldName,entities){var moreEntitiesAvailable=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:SET_RELATION_ENTITIES,payload:{fieldName:fieldName,entities:entities,moreEntitiesAvailable:moreEntitiesAvailable}}}},2227:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.modeFitsScopes=exports.isAction=void 0;var obj,_actionComponentTypes=__webpack_require__(2272),_actionComponentTypes2=(obj=_actionComponentTypes)&&obj.__esModule?obj:{default:obj};exports.isAction=function(componentType){return!!componentType&&Object.values(_actionComponentTypes2.default).indexOf(componentType)>=0},exports.modeFitsScopes=function(mode,scopes){return!mode||!scopes||scopes.length<0||scopes.includes(mode)}},2228:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ACTION_INVOKE=exports.ACTION_INVOKE="actions/ACTION_INVOKE",ACTION_INVOKED=(exports.ACTION_IN_PROGRESS="actions/ACTION_IN_PROGRESS",exports.ACTION_INVOKED="actions/ACTION_INVOKED");exports.actionInvoke=function(definition,entity,ids,parent){return{type:ACTION_INVOKE,payload:{definition:definition,entity:entity,ids:ids,parent:parent}}},exports.actionInvoked=function(definition,entity,ids,response){return{type:ACTION_INVOKED,payload:{definition:definition,entity:entity,ids:ids,response:response}}}},2231:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.isValidSelection=function(selectedCount,_ref){var minSelection=_ref.minSelection,maxSelection=_ref.maxSelection;return!(notEnough(selectedCount,minSelection)||tooMany(selectedCount,maxSelection))},exports.selectionText=function(selectedCount,_ref2,intl){var minSelection=_ref2.minSelection,maxSelection=_ref2.maxSelection;return notEnough(selectedCount,minSelection)?intl.formatMessage({id:"client.component.actions.notEnoughSelected"},{minSelection:minSelection}):tooMany(selectedCount,maxSelection)?intl.formatMessage({id:"client.component.actions.tooManySelected"},{maxSelection:maxSelection}):null};var notEnough=function(selectedCount,minSelection){return minSelection&&selectedCount<minSelection},tooMany=function(selectedCount,maxSelection){return maxSelection&&selectedCount>maxSelection}},2232:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var LOAD_TOOLTIP=exports.LOAD_TOOLTIP="formData/LOAD_TOOLTIP",SET_TOOLTIP=exports.SET_TOOLTIP="formData/SET_TOOLTIP";exports.loadTooltip=function(entity,id){return{type:LOAD_TOOLTIP,payload:{entity:entity,id:id}}},exports.setToolTip=function(entity,id,tooltip){return{type:SET_TOOLTIP,payload:{entity:entity,id:id,tooltip:tooltip}}}},2239:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relatedEntityErrorsField=exports.entityValidatorErrorsField=exports.generalErrorField=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_forOwn3=_interopRequireDefault(__webpack_require__(2215)),_reduce3=_interopRequireDefault(__webpack_require__(901));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var generalErrorField=exports.generalErrorField="_error",entityValidatorErrorsField=exports.entityValidatorErrorsField="entityValidatorErrors",relatedEntityErrorsField=exports.relatedEntityErrorsField="relatedEntityErrors",getFieldErrors=function(formErrors){var fieldErrors=_extends({},formErrors);return delete fieldErrors[generalErrorField],fieldErrors},getGeneralErrors=function(formErrors){return formErrors[generalErrorField]};exports.default={hasFieldErrors:function(formErrors){return Object.keys(getFieldErrors(formErrors)).length>=1},getFieldErrors:getFieldErrors,getValidatorErrors:function(formErrors){var errors=getGeneralErrors(formErrors);return(0,_reduce3.default)(errors[entityValidatorErrorsField],function(result,value){return[].concat(_toConsumableArray(result),_toConsumableArray(value))},[])},hasValidatorErrors:function(formErrors){var errors=getGeneralErrors(formErrors);return!!(errors&&errors[entityValidatorErrorsField]&&Object.keys(errors[entityValidatorErrorsField]).length>=1)},hasRelatedEntityErrors:function(formErrors){var errors=getGeneralErrors(formErrors);return!!(errors&&errors[relatedEntityErrorsField]&&errors[relatedEntityErrorsField].length>=1)},getFirstErrorField:function(formErrors){return Object.keys(getFieldErrors(formErrors))[0]},getRelatedEntityErrorsCompact:function(formErrors){var relatedEntityErrors=getGeneralErrors(formErrors).relatedEntityErrors;return(0,_reduce3.default)(relatedEntityErrors,function(result,relatedEntityError){var key=relatedEntityError.key,model=relatedEntityError.model,paths=relatedEntityError.paths,entityValidatorErrors=relatedEntityError.entityValidatorErrors,r=[].concat(_toConsumableArray(result));return(0,_forOwn3.default)(paths,function(values,fieldName){(0,_forOwn3.default)(values,function(errors,errorKey){r.push.apply(r,_toConsumableArray(errors.map(function(e){return e+" ("+fieldName+", "+model+", "+key+")"})))})}),entityValidatorErrors&&Object.keys(entityValidatorErrors).length>=1&&r.push.apply(r,_toConsumableArray((0,_reduce3.default)(entityValidatorErrors,function(result,value){return[].concat(_toConsumableArray(result),_toConsumableArray(value.map(function(e){return e+" ("+model+", "+key+")"})))},[]))),r},[])},addErrors:function(errors,field,fieldErrors){return _extends({},errors,(obj={},key=field,value=_extends({},errors[field]||{},fieldErrors||{}),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj));var obj,key,value}}},2241:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Object.freeze({FIELD_SET:"field-set",FIELD:"field",ACTION:"action",LAYOUT:"layout",TABLE:"table",SUB_TABLE:"sub-table",DISPLAY:"display",FULLTEXT_SEARCH:"fulltext-search",SEARCH_FILTER:"search-filter"})},2244:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.searchFilterTransformer=exports.selectEntitiesTransformer=exports.defaultEntitiesTransformer=exports.entitiesListTransformer=exports.defaultModelTransformer=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.fetchModel=fetchModel;var _rest2=_interopRequireDefault(__webpack_require__(897)),_get3=_interopRequireDefault(__webpack_require__(898)),_reduce3=_interopRequireDefault(__webpack_require__(901)),_consoleLogger2=_interopRequireDefault(__webpack_require__(170)),_effects=__webpack_require__(44);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _marked=regeneratorRuntime.mark(fetchModel),defaultModelTransformer=exports.defaultModelTransformer=function(json){var model={};json.fields.forEach(function(field){model[field.fieldName]=_extends({},field)}),json.relations.forEach(function(relation){model[relation.relationName]={type:"relation",targetEntity:relation.targetEntity,multi:relation.multi}});var createPermission=function(json){return!(!json.createPermission||"boolean"!=typeof json.createPermission)&&json.createPermission}(json);return{model:model,createPermission:createPermission}};function fetchModel(entityName){var resp,transformer=arguments.length>1&&void 0!==arguments[1]?arguments[1]:defaultModelTransformer;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_effects.call)(_rest2.default.requestSaga,"entities/"+entityName+"/model");case 2:return resp=_context.sent,_context.abrupt("return",transformer(resp.body));case 4:case"end":return _context.stop()}},_marked,this)}exports.entitiesListTransformer=function(json){return json.data.map(function(entity){return _extends({__key:entity.key,__model:entity.model},(0,_reduce3.default)(entity.paths,function(result,value,key){return _extends({},result,function(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}({},key,getFieldValues(value)))},{}))})};var getFieldValues=function getFieldValues(path){var type=path.type;return"field"===type?path.value:"entity"===type?{type:"string",value:path.value?path.value.display:""}:"entity-list"===type?path.value.map(function(v){return{type:"string",value:v.display}}):"display-expression"===type?{type:"html",value:path.value}:"multi"===type?path.value.map(function(v){return getFieldValues(v)}):(_consoleLogger2.default.log("Unable to map type "+type),{type:"string",value:""})};exports.defaultEntitiesTransformer=function(json){return json},exports.selectEntitiesTransformer=function(json){return json.data.map(function(e){return{display:e.display,key:e.key}})},exports.searchFilterTransformer=function(json){return json.data.map(function(e){return{display:e.display,key:e.key,uniqueId:(0,_get3.default)(e,"paths.unique_id.value.value",null)}})}},2246:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFormFieldFlat=exports.getFields=exports.searchFormTransformer=exports.getColumnDefinition=exports.getEndpoint=exports.getSelectable=exports.getSorting=exports.defaultFormTransformer=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.fetchForm=fetchForm;var _uniq3=_interopRequireDefault(__webpack_require__(2245)),_actions2=_interopRequireDefault(__webpack_require__(2185)),_form2=_interopRequireDefault(__webpack_require__(2176)),_rest2=_interopRequireDefault(__webpack_require__(897)),_effects=__webpack_require__(44);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var _marked=regeneratorRuntime.mark(fetchForm),defaultFormTransformer=exports.defaultFormTransformer=function(json){return json.form};function fetchForm(formName){var response,transformer=arguments.length>1&&void 0!==arguments[1]?arguments[1]:defaultFormTransformer;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_effects.call)(_rest2.default.requestSaga,"forms/"+formName,{acceptedStatusCodes:[404]});case 2:if(!(response=_context.sent).body){_context.next=9;break}return _context.next=6,(0,_effects.call)(transformer,response.body);case 6:_context.t0=_context.sent,_context.next=10;break;case 9:_context.t0=null;case 10:return _context.abrupt("return",_context.t0);case 11:case"end":return _context.stop()}},_marked,this)}var getTable=function(formDefinition){return formDefinition.children.find(function(child){return child.componentType===_form2.default.componentTypes.TABLE})},isDisplayableChild=(exports.getSorting=function(formDefinition){var table=getTable(formDefinition);return table.sorting?table.sorting:[]},exports.getSelectable=function(formDefinition){return!1!==getTable(formDefinition).selectable},exports.getEndpoint=function(formDefinition){return getTable(formDefinition).endpoint||null},function(child){return!child.hidden}),getColumnDefinition=exports.getColumnDefinition=function(table){return table.children.filter(function(column){return!column.hidden}).filter(function(column){return column.children.filter(isDisplayableChild).length>0}).map(function(c){return{id:c.id,label:c.label,sortable:c.sortable,children:c.children.filter(isDisplayableChild)}})},searchChildren=(exports.searchFormTransformer=function(json){return json.form},exports.getFields=function(formDefinition){var fields=getColumnDefinition(getTable(formDefinition)).reduce(function(accumulator,current){return[].concat(_toConsumableArray(accumulator),_toConsumableArray(current.children.filter(function(child){return!_actions2.default.isAction(child.componentType)}).map(function(child){return child.id})))},[]);return(0,_uniq3.default)(fields)},exports.getFormFieldFlat=function(formDefinition){return searchChildren(formDefinition)},function searchChildren(node){return"field-set"===node.componentType?node.children.reduce(function(acc,value){return _extends({},acc,function(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}({},value.id,value.dataType))},{}):node.children?node.children.reduce(function(acc,value){return _extends({},acc,searchChildren(value))},{}):void 0})},2247:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.selectionStylePropType=exports.default=void 0;var obj,_propTypes=__webpack_require__(2174),_propTypes2=(obj=_propTypes)&&obj.__esModule?obj:{default:obj};var selectionStyles={SINGLE:"single",MULTI:"multi",NONE:"none"},selectionStylePropType=_propTypes2.default.oneOf(Object.keys(selectionStyles).map(function(key){return selectionStyles[key]}));exports.default=selectionStyles,exports.selectionStylePropType=selectionStylePropType},2272:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Object.freeze({ACTION:"action",REPORT:"report",ACTION_GROUP:"action-group"})},2273:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Object.freeze({CUSTOM:"custom",SIMPLE:"simple",REPORT:"report",DIVIDER:"divider"})},2274:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _download=__webpack_require__(2387);exports.default={downloadUrl:_download.downloadUrl,openUrl:_download.openUrl,downloadSupportedByBrowser:_download.downloadSupportedByBrowser}},2275:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reportSettingsDefinitionPropType=exports.getFormDefinition=exports.getModel=exports.getFormDataDefaults=exports.transformValues=exports.getGroupedValues=exports.submitActions=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_propTypes2=_interopRequireDefault(__webpack_require__(7)),_reduce3=_interopRequireDefault(__webpack_require__(901));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}exports.submitActions=Object.freeze({DISPLAY:"display",DOWNLOAD:"download"}),exports.getGroupedValues=function(settingsDefinition,values){var groupValues=function(name){return _defineProperty({},name,(settingsDefinition[name]||[]).reduce(function(result,field){return _extends({},result,_defineProperty({},field.id,values[field.id]))},{}))};return _extends({},groupValues("generalSettings"),groupValues("recipientSettings"))},exports.transformValues=function(values){var transform=function(v){return v.key?v.key:v};return(0,_reduce3.default)(values,function(result,value,key){return _extends({},result,_defineProperty({},key,Array.isArray(value)?value.map(transform):transform(value)))},{})},exports.getFormDataDefaults=function(settingsDefinition){var extractDefaultValues=function(name){return(settingsDefinition[name]||[]).reduce(function(result,field){return _extends({},result,field.options?_defineProperty({},field.id,field.options):{})},{})};return{relationEntities:_extends({},extractDefaultValues("generalSettings"),extractDefaultValues("recipientSettings"))}},exports.getModel=function(settingsDefinition){var extractModelFields=function(name){return(settingsDefinition[name]||[]).reduce(function(result,field){return _extends({},result,_defineProperty({},field.id,_extends({},field.targetEntity?{targetEntity:field.targetEntity}:{},field.validation?{validation:field.validation}:{},field.multi?{multi:field.multi}:{})))},{})};return _extends({},extractModelFields("generalSettings"),extractModelFields("recipientSettings"))},exports.getFormDefinition=function(settingsDefinition,intl){var msg=function(id){return intl.formatMessage({id:id})},extractFields=function(name){return(settingsDefinition[name]||[]).map(function(field){return{children:[{componentType:"field",dataType:field.dataType,defaultValue:field.defaultValue,id:field.id,label:field.label||field.description,path:field.id}],componentType:"field-set",hidden:!1,id:field.id,label:field.label||field.description,readonly:field.disabled,scopes:[]}})};return{componentType:"form",label:null,modelid:"Bill_report_settings",readonly:!1,children:[{componentType:"layout",id:"generalSettings",label:msg("client.common.report.generalSettings"),layoutType:"vertical-box",children:extractFields("generalSettings")},{componentType:"layout",id:"recipientSettings",label:msg("client.common.report.recipientSettings"),layoutType:"vertical-box",children:extractFields("recipientSettings")}]}},exports.reportSettingsDefinitionPropType=_propTypes2.default.shape({customSettings:_propTypes2.default.shape({form:_propTypes2.default.object,entity:_propTypes2.default.object}),generalSettings:_propTypes2.default.array,recipient:_propTypes2.default.array,description:_propTypes2.default.shape({name:_propTypes2.default.string.isRequired})})},2276:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_reactRedux=__webpack_require__(110),_actionEmitter=__webpack_require__(263),_actionEmitter2=(obj=_actionEmitter)&&obj.__esModule?obj:{default:obj};var mapActionCreators={emitAction:function(action){return _actionEmitter2.default.dispatchEmittedAction(action)}};exports.default=(0,_reactRedux.connect)(null,mapActionCreators)},2279:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var OPEN_ADVANCED_SEARCH=exports.OPEN_ADVANCED_SEARCH="formData/OPEN_ADVANCED_SEARCH",ADVANCED_SEARCH_UPDATE=exports.ADVANCED_SEARCH_UPDATE="formData/ADVANCED_SEARCH_UPDATE",ADVANCED_SEARCH_CLOSE=exports.ADVANCED_SEARCH_CLOSE="formData/ADVANCED_SEARCH_CLOSE";exports.openAdvancedSearch=function(listApp,onSelect,formField,modelField,value){return{type:OPEN_ADVANCED_SEARCH,payload:{listApp:listApp,onSelect:onSelect,formField:formField,modelField:modelField,value:value}}},exports.advancedSearchUpdate=function(ids){return{type:ADVANCED_SEARCH_UPDATE,payload:{ids:ids}}},exports.advancedSearchClose=function(){return{type:ADVANCED_SEARCH_CLOSE}}},2281:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react2=_interopRequireDefault(__webpack_require__(0)),_appFactory2=(_interopRequireDefault(__webpack_require__(111)),_interopRequireDefault(__webpack_require__(266))),_externalEvents2=_interopRequireDefault(__webpack_require__(899)),_formData2=_interopRequireDefault(__webpack_require__(2191)),_notifier2=_interopRequireDefault(__webpack_require__(168)),_actionEmitter2=_interopRequireDefault(__webpack_require__(263)),_propTypes2=_interopRequireDefault(__webpack_require__(7)),_reducers=__webpack_require__(2429),_reducers2=_interopRequireDefault(_reducers),_FormContainer2=_interopRequireDefault(__webpack_require__(2452));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EXTERNAL_EVENTS=["onSubmit","onCancel","onChange","emitAction"],initApp=function(id,input){var events=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},publicPath=arguments[3],content=_react2.default.createElement(_FormContainer2.default,{listApp:input.listApp}),store=_appFactory2.default.createStore(_reducers2.default,_reducers.sagas,input,"simple-form");return _actionEmitter2.default.addToStore(store,events.emitAction),_externalEvents2.default.addToStore(store,events),_formData2.default.addToStore(store,input.formData),_notifier2.default.addToStore(store,!1),_appFactory2.default.createApp("simple-form",content,store,{input:input,events:events,actions:[],publicPath:publicPath,textResourceModules:["component","common"]})};_appFactory2.default.registerAppInRegistry("simple-form",initApp);var SimpleFormApp=function(_React$Component){function SimpleFormApp(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SimpleFormApp);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(SimpleFormApp.__proto__||Object.getPrototypeOf(SimpleFormApp)).call(this,props)),events=EXTERNAL_EVENTS.reduce(function(events,event){return props[event]&&(events[event]=props[event]),events},{});return _this.app=initApp("id",props,events),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(SimpleFormApp,_react2.default.Component),_createClass(SimpleFormApp,[{key:"render",value:function(){return _react2.default.createElement("div",null,this.app.renderComponent())}}]),SimpleFormApp}();SimpleFormApp.propTypes=_extends({hideButton:_propTypes2.default.bool,submitText:_propTypes2.default.string,cancelText:_propTypes2.default.string,form:_propTypes2.default.object.isRequired,model:_propTypes2.default.object.isRequired,formData:_formData2.default.formDataPropType},EXTERNAL_EVENTS.reduce(function(propTypes,event){return propTypes[event]=_propTypes2.default.func,propTypes},{})),exports.default=SimpleFormApp,SimpleFormApp.__docgenInfo={description:"",methods:[],displayName:"SimpleFormApp",props:{hideButton:{type:{name:"bool"},required:!1,description:""},submitText:{type:{name:"string"},required:!1,description:""},cancelText:{type:{name:"string"},required:!1,description:""},form:{type:{name:"object"},required:!0,description:""},model:{type:{name:"object"},required:!0,description:""},formData:{type:{name:"custom",raw:"formData.formDataPropType"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/simple-form/src/main.js"]={name:"SimpleFormApp",docgenInfo:SimpleFormApp.__docgenInfo,path:"packages/simple-form/src/main.js"})},2291:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_react2=_interopRequireDefault(__webpack_require__(0)),_toccoUi=__webpack_require__(73),_get3=_interopRequireDefault(__webpack_require__(898));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var settings_REMOTE_SEARCH_RESULT_LIMIT=50,settings_REMOTE_SUGGESTION_LIMIT=10,settings_REMOTE_SUGGESTION_ORDER_FIELD="update_timestamp",settings_SELECT_LIMIT=1e4;exports.default=function(type){return function(formField,modelField,props,events,utils){var options=getOptions(type,formField,modelField,utils);return _react2.default.createElement(_toccoUi.EditableValue,_extends({type:type,events:events},props,{options:options}))}};var getOptions=function(type,formField,modelField,utils){var options={};switch(type){case"single-select":case"multi-select":options.options=(0,_get3.default)(utils,["relationEntities",formField.id,"data"],[]),options.isLoading=(0,_get3.default)(utils,["relationEntities",formField.id,"isLoading"],!1),options.tooltips=(0,_get3.default)(utils.tooltips,modelField.targetEntity,null),options.loadTooltip=function(id){return utils.loadTooltip(modelField.targetEntity,id)},utils.intl&&(options.noResultsText=utils.intl.formatMessage({id:"client.component.remoteselect.noResultsText"})),options.fetchOptions=function(){return utils.loadRelationEntities(formField.id,modelField.targetEntity,{forceReload:!1,limit:settings_SELECT_LIMIT})};break;case"remote":case"multi-remote":options.options=(0,_get3.default)(utils,["relationEntities",formField.id,"data"],[]),options.moreOptionsAvailable=(0,_get3.default)(utils,["relationEntities",formField.id,"moreEntitiesAvailable"],!1),options.isLoading=(0,_get3.default)(utils,["relationEntities",formField.id,"isLoading"],!1),options.fetchOptions=function(){return utils.loadRelationEntities(formField.id,modelField.targetEntity,{forceReload:!0,limit:settings_REMOTE_SUGGESTION_LIMIT,sorting:[{field:settings_REMOTE_SUGGESTION_ORDER_FIELD,order:"desc"}],formBase:formField.formBase})},options.searchOptions=function(searchTerm){return utils.loadRelationEntities(formField.id,modelField.targetEntity,{searchTerm:searchTerm,limit:settings_REMOTE_SEARCH_RESULT_LIMIT,forceReload:!0,formBase:formField.formBase})},options.openAdvancedSearch=function(value){return utils.openAdvancedSearch(formField,modelField,value)},options.tooltips=(0,_get3.default)(utils.tooltips,modelField.targetEntity,null),options.loadTooltip=function(id){return utils.loadTooltip(modelField.targetEntity,id)},utils.intl&&(options.noResultsText=utils.intl.formatMessage({id:"client.component.remoteselect.noResultsText"}),options.moreOptionsAvailableText=utils.intl.formatMessage({id:"client.component.remoteselect.moreOptionsAvailableText"}));break;case"search-filter":options.isMulti=formField.multiple,options.options=utils.searchFilters,options.fetchOptions=function(){return utils.loadSearchFilters(formField.model,formField.group)},utils.intl&&(options.noResultsText=utils.intl.formatMessage({id:"client.component.searchfilter.noResultsText"}));break;case"document":options.field=formField.id,options.upload=utils.uploadDocument,options.uploadText=utils.intl.formatMessage({id:"client.component.upload.upload"}),options.uploadingText=utils.intl.formatMessage({id:"client.component.upload.uploading"}),options.downloadText=utils.intl.formatMessage({id:"client.component.upload.downloadTitle"}),options.deleteText=utils.intl.formatMessage({id:"client.component.upload.deleteTitle"});break;case"phone":options.customPhoneRegex=modelField.customPhoneRegex,options.defaultCountry=modelField.defaultCountry;break;case"duration":utils.intl&&(options.hoursLabel=utils.intl.formatMessage({id:"client.component.duration.hoursLabel"}),options.minutesLabel=utils.intl.formatMessage({id:"client.component.duration.minutesLabel"}));break;case"number":case"decimal":case"moneyamount":options.prePointDigits=(0,_get3.default)(modelField,"validation.decimalDigits.prePointDigits",null),options.postPointDigits=(0,_get3.default)(modelField,"validation.decimalDigits.postPointDigits",null),options.minValue=(0,_get3.default)(modelField,"validation.numberRange.fromIncluding",null),options.maxValue=(0,_get3.default)(modelField,"validation.numberRange.toIncluding",null);break;case"integer":options.prePointDigits=(0,_get3.default)(modelField,"validation.decimalDigits.prePointDigits",null),options.minValue=(0,_get3.default)(modelField,"validation.numberRange.fromIncluding",null),options.maxValue=(0,_get3.default)(modelField,"validation.numberRange.toIncluding",null)}return options}},2292:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_react=__webpack_require__(0),_react2=(obj=_react)&&obj.__esModule?obj:{default:obj},_toccoUi=__webpack_require__(73);exports.default=function(type){return function(formField,modelField,properties,events,utils){return _react2.default.createElement("output",null,_react2.default.createElement(_toccoUi.FormattedValue,{type:type,value:properties.value}))}}},2293:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultFormTransformer=exports.getFieldNames=exports.getDefaultValues=exports.getFieldDefinitions=exports.getFieldId=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.fetchForm=fetchForm;var _componentTypes2=_interopRequireDefault(__webpack_require__(2241)),_rest2=_interopRequireDefault(__webpack_require__(897)),_effects=__webpack_require__(44);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _marked=regeneratorRuntime.mark(fetchForm);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}exports.getFieldId=function(formName,fieldName){return"input-"+formName+"-"+fieldName},exports.getFieldDefinitions=function(formDefinition){return getFieldsOfChildren(formDefinition.children)};var getFieldsOfChildren=function getFieldsOfChildren(children){for(var result=[],i=0;i<children.length;i++){children[i].children&&result.push.apply(result,_toConsumableArray(getFieldsOfChildren(children[i].children)));var componentType=children[i].componentType;[_componentTypes2.default.FIELD,_componentTypes2.default.DISPLAY,_componentTypes2.default.SEARCH_FILTER,_componentTypes2.default.FULLTEXT_SEARCH].includes(componentType)&&result.push(children[i])}return result},defaultFormTransformer=(exports.getDefaultValues=function(fieldDefinitions){return fieldDefinitions.filter(function(f){return f.defaultValue}).reduce(function(valueObj,field){return _extends({},valueObj,(obj={},key=field.id,value=field.defaultValue,key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj));var obj,key,value},{})},exports.getFieldNames=function(fieldDefinitions){return fieldDefinitions.map(function(f){return f.path||f.id})},exports.defaultFormTransformer=function(json){return json.form});function fetchForm(formName){var response,transformer=arguments.length>1&&void 0!==arguments[1]?arguments[1]:defaultFormTransformer;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_effects.call)(_rest2.default.requestSaga,"forms/"+formName);case 2:return response=_context.sent,_context.next=5,(0,_effects.call)(transformer,response.body);case 5:return _context.abrupt("return",_context.sent);case 6:case"end":return _context.stop()}},_marked,this)}},2294:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDirtyFields=exports.entityToFormValues=exports.transformFieldNameBack=exports.transformFieldName=exports.formValuesToEntity=exports.validationErrorToFormError=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_forOwn3=_interopRequireDefault(__webpack_require__(2215)),_isEqual3=_interopRequireDefault(__webpack_require__(2280)),_formErrors=__webpack_require__(2239);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}exports.validationErrorToFormError=function(entity,errors){var result=_defineProperty({},_formErrors.generalErrorField,_defineProperty({},_formErrors.relatedEntityErrorsField,[]));return errors?(errors.forEach(function(error){error.model===entity.model&&error.key===entity.key?(result=_extends({},result,error.paths),error.hasOwnProperty(_formErrors.entityValidatorErrorsField)&&(result[_formErrors.generalErrorField][_formErrors.entityValidatorErrorsField]=error[_formErrors.entityValidatorErrorsField])):result[_formErrors.generalErrorField][_formErrors.relatedEntityErrorsField].push(error)}),result):result},exports.formValuesToEntity=function(values,dirtyFields,entityName,entityId,entityModel){var entity={model:entityName,paths:{},key:entityId,version:values.__version};return Object.keys(values).forEach(function(key){if("__version"!==(fieldName=key)&&(!dirtyFields||dirtyFields.includes(fieldName))){var transformedKey=transformFieldNameBack(key),type=getType(key,entityModel);"field"===type?entity.paths[transformedKey]=values[key]:"entity"===type?entity.paths[transformedKey]=values[key]&&values[key].key?{key:values[key].key}:null:"entity-list"===type&&(entity.paths[transformedKey]=values[key]?values[key].map(function(value){return{key:value.key}}):[])}var fieldName}),entity};var getType=function(fieldName,entityModel){var modelField=entityModel[fieldName];return modelField.relationName?modelField.multi?"entity-list":"entity":"field"},transformFieldName=exports.transformFieldName=function(fieldName){return fieldName.replace(/\./g,"--")},transformFieldNameBack=exports.transformFieldNameBack=function(fieldName){return fieldName.replace(/--/g,".")};exports.entityToFormValues=function(entity){if(!entity||!entity.paths)return{};var result={},paths=entity.paths;return Object.keys(entity.paths).forEach(function(key){var field=paths[key];"entity"===field.type||"entity-list"===field.type||"display-expression"===field.type?result[transformFieldName(key)]=field.value:result[transformFieldName(key)]=field.value?field.value.value:null}),result.__version=entity.version,result},exports.getDirtyFields=function(initialValues,values,isCreate){var dirtyFields=[];return(0,_forOwn3.default)(values,function(value,key){!isCreate&&(0,_isEqual3.default)(value,initialValues[key])||dirtyFields.push(key)}),dirtyFields}},2295:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Object.freeze({VERTICAL_BOX:"vertical-box",HORIZONTAL_BOX:"horizontal-box"})},2296:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_model=__webpack_require__(2444),_model2=(obj=_model)&&obj.__esModule?obj:{default:obj},_type=__webpack_require__(2445);exports.default={modelValidators:_model2.default,syncValidators:_type.syncValidators,asyncValidators:_type.asyncValidators}},2298:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var INITIALIZE_QUESTION_FORM=exports.INITIALIZE_QUESTION_FORM="simpleForm/INITIALIZE_QUESTION_FORM",ADVANCED_SEARCH_UPDATE=exports.ADVANCED_SEARCH_UPDATE="simpleForm/ADVANCED_SEARCH_UPDATE",SUBMIT=exports.SUBMIT="simpleForm/SUBMIT",CANCEL=exports.CANCEL="simpleForm/CANCEL";exports.initializeForm=function(){return{type:INITIALIZE_QUESTION_FORM,payload:{}}},exports.submit=function(){return{type:SUBMIT}},exports.cancel=function(){return{type:CANCEL}},exports.advancedSearchUpdate=function(field,ids){return{type:ADVANCED_SEARCH_UPDATE,payload:{field:field,ids:ids}}}},2299:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UPLOAD_DOCUMENT=exports.UPLOAD_DOCUMENT="form/UPLOAD_DOCUMENT";exports.uploadDocument=function(file,field){return{type:UPLOAD_DOCUMENT,payload:{file:file,field:field}}}},2300:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.searchValuesSelector=exports.entityListSelector=exports.searchFormSelector=exports.inputSelector=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=sagas,exports.initialize=initialize,exports.setInitialFormValues=setInitialFormValues,exports.transformFieldNames=transformFieldNames,exports.submitSearchFrom=submitSearchFrom,exports.loadSearchForm=loadSearchForm,exports.getEntityModel=getEntityModel,exports.loadSearchFilters=loadSearchFilters,exports.resetSearch=resetSearch,exports.getSearchFormValues=getSearchFormValues,exports.advancedSearchUpdate=advancedSearchUpdate;var _form2=_interopRequireDefault(__webpack_require__(2176)),_rest2=_interopRequireDefault(__webpack_require__(897)),_reduce3=_interopRequireDefault(__webpack_require__(901)),_actions2=_interopRequireDefault(__webpack_require__(2201)),_getFormValues2=_interopRequireDefault(__webpack_require__(2222)),formActionTypes=_interopRequireWildcard(__webpack_require__(2209)),actions=_interopRequireWildcard(__webpack_require__(2189)),_forms=__webpack_require__(2246),_searchForm=__webpack_require__(2466),_entities=__webpack_require__(2244),_actions4=__webpack_require__(2203),_searchFormValidation=__webpack_require__(2467),_effects=__webpack_require__(44);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var _marked=regeneratorRuntime.mark(sagas),_marked2=regeneratorRuntime.mark(initialize),_marked3=regeneratorRuntime.mark(setInitialFormValues),_marked4=regeneratorRuntime.mark(transformFieldNames),_marked5=regeneratorRuntime.mark(submitSearchFrom),_marked6=regeneratorRuntime.mark(loadSearchForm),_marked7=regeneratorRuntime.mark(getEntityModel),_marked8=regeneratorRuntime.mark(loadSearchFilters),_marked9=regeneratorRuntime.mark(resetSearch),_marked10=regeneratorRuntime.mark(getSearchFormValues),_marked11=regeneratorRuntime.mark(advancedSearchUpdate),inputSelector=exports.inputSelector=function(state){return state.input},searchFormSelector=exports.searchFormSelector=function(state){return state.searchForm},entityListSelector=exports.entityListSelector=function(state){return state.entityList},searchValuesSelector=exports.searchValuesSelector=(0,_getFormValues2.default)("searchForm"),FORM_ID="searchForm";function sagas(){return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_effects.all)([(0,_effects.fork)(_effects.takeLatest,actions.INITIALIZE,initialize),(0,_effects.fork)(_effects.takeLatest,actions.LOAD_SEARCH_FILTERS,loadSearchFilters),(0,_effects.fork)(_effects.takeLatest,formActionTypes.CHANGE,submitSearchFrom),(0,_effects.fork)(_effects.takeLatest,actions.SUBMIT_SEARCH_FORM,submitSearchFrom),(0,_effects.fork)(_effects.takeLatest,actions.RESET_SEARCH,resetSearch),(0,_effects.fork)(_effects.takeLatest,actions.ADVANCED_SEARCH_UPDATE,advancedSearchUpdate)]);case 2:case"end":return _context.stop()}},_marked,this)}function initialize(_ref){var _ref2,searchFormName,formDefinition,searchFormVisible=_ref.payload.searchFormVisible;return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,(0,_effects.select)(searchFormSelector);case 2:if(_ref2=_context2.sent,searchFormName=_ref2.searchFormName,_ref2.initialized){_context2.next=18;break}if(!searchFormVisible){_context2.next=12;break}return _context2.next=9,(0,_effects.call)(loadSearchForm,searchFormName);case 9:_context2.t0=_context2.sent,_context2.next=13;break;case 12:_context2.t0=null;case 13:return formDefinition=_context2.t0,_context2.next=16,(0,_effects.call)(setInitialFormValues,searchFormVisible,formDefinition);case 16:return _context2.next=18,(0,_effects.put)(actions.setInitialized());case 18:case"end":return _context2.stop()}},_marked2,this)}function setInitialFormValues(searchFormVisible,formDefinition){var _ref3,preselectedSearchFields,parent,_ref4,model,formValues,fieldDefinitions,fromDefaultValues,transformedFromValues;return regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,(0,_effects.select)(inputSelector);case 2:return _ref3=_context3.sent,preselectedSearchFields=_ref3.preselectedSearchFields,parent=_ref3.parent,_context3.next=7,(0,_effects.call)(getEntityModel);case 7:if(_ref4=_context3.sent,model=_ref4.model,!preselectedSearchFields){_context3.next=15;break}return _context3.next=12,(0,_effects.call)(_searchForm.getPreselectedValues,preselectedSearchFields,model,null,searchFormVisible);case 12:_context3.t0=_context3.sent,_context3.next=16;break;case 15:_context3.t0={};case 16:if(formValues=_context3.t0,parent&&!formValues.hasOwnProperty(parent.reverseRelationName)&&(formValues[parent.reverseRelationName]={key:parent.key}),!searchFormVisible||!formDefinition){_context3.next=26;break}return _context3.next=21,(0,_effects.call)(_form2.default.getFieldDefinitions,formDefinition);case 21:return fieldDefinitions=_context3.sent,_context3.next=24,(0,_effects.call)(_form2.default.getDefaultValues,fieldDefinitions);case 24:fromDefaultValues=_context3.sent,formValues=_extends({},fromDefaultValues,formValues);case 26:return _context3.next=28,(0,_effects.call)(transformFieldNames,formValues);case 28:return transformedFromValues=_context3.sent,_context3.next=31,(0,_effects.put)(_actions2.default.initialize(FORM_ID,transformedFromValues));case 31:return _context3.next=33,(0,_effects.put)(actions.setValuesInitialized(!0));case 33:case"end":return _context3.stop()}},_marked3,this)}function transformFieldNames(formValues){return regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.abrupt("return",(0,_reduce3.default)(formValues,function(acc,val,key){return _extends({},acc,_defineProperty({},_form2.default.transformFieldName(key),val))},{}));case 1:case"end":return _context4.stop()}},_marked4,this)}function submitSearchFrom(){var values,_ref5,formDefinition,errors;return regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,(0,_effects.put)(_actions2.default.startSubmit(FORM_ID));case 2:return _context5.next=4,(0,_effects.select)((0,_getFormValues2.default)(FORM_ID));case 4:return values=_context5.sent,_context5.next=7,(0,_effects.select)(searchFormSelector);case 7:return _ref5=_context5.sent,formDefinition=_ref5.formDefinition,_context5.next=11,(0,_effects.call)(_searchFormValidation.validateSearchFields,values,formDefinition);case 11:return errors=_context5.sent,_context5.next=14,(0,_effects.put)(_actions2.default.stopSubmit(FORM_ID,errors));case 14:if(0!==Object.keys(errors).length){_context5.next=17;break}return _context5.next=17,(0,_effects.put)(actions.executeSearch());case 17:case"end":return _context5.stop()}},_marked5,this)}function loadSearchForm(searchFormName){var formDefinition;return regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,(0,_effects.call)(_forms.fetchForm,searchFormName,_forms.searchFormTransformer);case 2:if(!(formDefinition=_context6.sent)){_context6.next=10;break}return _context6.next=6,(0,_effects.put)(actions.setFormDefinition(formDefinition));case 6:return _context6.next=8,(0,_effects.put)(actions.setFormFieldsFlat((0,_forms.getFormFieldFlat)(formDefinition)));case 8:_context6.next=12;break;case 10:return _context6.next=12,(0,_effects.put)(actions.setShowFullTextSearchForm(!0));case 12:return _context6.abrupt("return",formDefinition);case 13:case"end":return _context6.stop()}},_marked6,this)}function getEntityModel(){var entityList;return regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,(0,_effects.select)(entityListSelector);case 2:if((entityList=_context7.sent).initialized){_context7.next=6;break}return _context7.next=6,(0,_effects.take)(_actions4.SET_INITIALIZED);case 6:return _context7.next=8,(0,_effects.select)(entityListSelector);case 8:return entityList=_context7.sent,_context7.abrupt("return",entityList.entityModel);case 10:case"end":return _context7.stop()}},_marked7,this)}function loadSearchFilters(_ref6){var model,group,_ref7,searchFilter,query,requestOptions,searchFilters,payload=_ref6.payload;return regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return model=payload.model,group=payload.group,_context8.next=3,(0,_effects.select)(searchFormSelector);case 3:if(_ref7=_context8.sent,searchFilter=_ref7.searchFilter){_context8.next=13;break}return query={conditions:_extends({entity:model},group?{"relSearch_filter_group.unique_id":group}:{}),fields:["unique_id"]},requestOptions={method:"GET"},_context8.next=10,(0,_effects.call)(_rest2.default.fetchEntities,"Search_filter",query,requestOptions,_entities.searchFilterTransformer);case 10:return searchFilters=_context8.sent,_context8.next=13,(0,_effects.put)(actions.setSearchFilter(searchFilters));case 13:return _context8.abrupt("return",searchFilter);case 14:case"end":return _context8.stop()}},_marked8,this)}function resetSearch(){return regeneratorRuntime.wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return _context9.next=2,(0,_effects.put)(_actions2.default.reset("searchForm"));case 2:return _context9.next=4,(0,_effects.call)(submitSearchFrom);case 4:case"end":return _context9.stop()}},_marked9,this)}function getSearchFormValues(){var _ref8,searchValues;return regeneratorRuntime.wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:return _context10.next=2,(0,_effects.select)(searchFormSelector);case 2:if(_ref8=_context10.sent,_ref8.valuesInitialized){_context10.next=7;break}return _context10.next=7,(0,_effects.take)(actions.SET_VALUES_INITIALIZED);case 7:return _context10.next=9,(0,_effects.select)(searchValuesSelector);case 9:return searchValues=_context10.sent,_context10.abrupt("return",(0,_reduce3.default)(searchValues,function(result,value,key){return _extends({},result,!Array.isArray(value)||value.length?_defineProperty({},_form2.default.transformFieldNameBack(key),value):{})},{}));case 11:case"end":return _context10.stop()}},_marked10,this)}function advancedSearchUpdate(_ref10){var _ref10$payload=_ref10.payload,field=_ref10$payload.field,ids=_ref10$payload.ids;return regeneratorRuntime.wrap(function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:return _context11.next=2,(0,_effects.put)(_actions2.default.change(FORM_ID,_form2.default.transformFieldName(field),ids));case 2:case"end":return _context11.stop()}},_marked11,this)}},2379:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _storeStorage=__webpack_require__(2380);exports.default={get:_storeStorage.get,set:_storeStorage.set}},2380:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var storage={};exports.get=function(id){return storage[id]},exports.set=function(id,store){storage[id]=store}},2381:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _saga2=_interopRequireDefault(__webpack_require__(427)),_reducer2=_interopRequireDefault(__webpack_require__(111)),_errorLogging2=_interopRequireDefault(__webpack_require__(264)),_reducer4=_interopRequireDefault(__webpack_require__(2382)),_sagas2=_interopRequireDefault(__webpack_require__(2383));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(store,config){_reducer2.default.injectReducers(store,{actions:_reducer4.default}),store.sagaMiddleware.run(_saga2.default.autoRestartSaga(_sagas2.default,config,_errorLogging2.default.logError))}},2382:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=reducer;var ACTION_HANDLERS={},initialState={};function reducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:initialState,action=arguments[1],handler=ACTION_HANDLERS[action.type];return handler?handler(state,action):state}reducer.__docgenInfo={description:"",methods:[],displayName:"reducer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/app-extensions/src/actions/modules/reducer.js"]={name:"reducer",docgenInfo:reducer.__docgenInfo,path:"packages/app-extensions/src/actions/modules/reducer.js"})},2383:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=sagas,exports.invokeAction=invokeAction;var actions=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(2228)),_actionHandlers2=_interopRequireDefault(__webpack_require__(2384)),_preActions2=_interopRequireDefault(__webpack_require__(2390)),_effects=__webpack_require__(44);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _marked=regeneratorRuntime.mark(sagas),_marked2=regeneratorRuntime.mark(invokeAction);function sagas(config){return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_effects.all)([(0,_effects.fork)(_effects.takeEvery,actions.ACTION_INVOKE,invokeAction,config)]);case 2:case"end":return _context.stop()}},_marked,this)}function invokeAction(config,_ref){var definition,entity,ids,parent,_ref2,abort,params,actionHandler,response,payload=_ref.payload;return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return definition=payload.definition,entity=payload.entity,ids=payload.ids,parent=payload.parent,_context2.next=3,(0,_effects.call)(_preActions2.default.run,definition,ids,config);case 3:if(_ref2=_context2.sent,abort=_ref2.abort,params=_ref2.params,abort){_context2.next=14;break}return actionHandler=_actionHandlers2.default[definition.actionType],_context2.next=10,(0,_effects.call)(actionHandler,definition,entity,ids,parent,params,config);case 10:if(!(response=_context2.sent)||!response.success){_context2.next=14;break}return _context2.next=14,(0,_effects.put)(actions.actionInvoked(definition,entity,ids,response));case 14:case"end":return _context2.stop()}},_marked2,this)}},2384:function(module,exports,__webpack_require__){"use strict";var _actionTypes$SIMPLE$a;Object.defineProperty(exports,"__esModule",{value:!0});var _actionTypes2=_interopRequireDefault(__webpack_require__(2273)),_simpleAction2=_interopRequireDefault(__webpack_require__(2385)),_report2=_interopRequireDefault(__webpack_require__(2386));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}exports.default=(_defineProperty(_actionTypes$SIMPLE$a={},_actionTypes2.default.SIMPLE,_simpleAction2.default),_defineProperty(_actionTypes$SIMPLE$a,_actionTypes2.default.REPORT,_report2.default),_actionTypes$SIMPLE$a)},2385:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validationErrorCompact=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=_callee,exports.invokeRequest=invokeRequest;var _errorLogging2=_interopRequireDefault(__webpack_require__(264)),_rest2=_interopRequireDefault(__webpack_require__(897)),_notifier2=_interopRequireDefault(__webpack_require__(168)),_effects=__webpack_require__(44);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _marked=regeneratorRuntime.mark(_callee),_marked2=regeneratorRuntime.mark(invokeRequest);function _callee(definition,entity,ids,parent,params){var randomId,title,response;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return randomId=Math.random(),title=definition.progressMsg||"client.component.actions.defaultProgressMessage",_context.next=4,(0,_effects.put)(_notifier2.default.blockingInfo(randomId,title));case 4:return _context.next=6,(0,_effects.call)(invokeRequest,definition,entity,ids,parent,params);case 6:return response=_context.sent,_context.next=9,(0,_effects.put)(_notifier2.default.removeBlockingInfo(randomId));case 9:return _context.abrupt("return",response);case 10:case"end":return _context.stop()}},_marked,this)}function invokeRequest(definition,entity,ids,parent,params){var response,success,type,title,icon;return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,(0,_effects.call)(_rest2.default.requestSaga,definition.endpoint,{method:"POST",body:_extends({ids:ids,entity:entity,parent:parent},params),acceptedErrorCodes:["VALIDATION_FAILED"]});case 3:if(!(response=_context2.sent).body||"VALIDATION_FAILED"!==response.body.errorCode){_context2.next=9;break}return _context2.next=7,(0,_effects.put)(_notifier2.default.info("error","client.component.actions.validationError",validationErrorCompact(response.body.errors),"exclamation"));case 7:_context2.next=15;break;case 9:return success=!0===response.body.success,type=success?"success":"warning",title=response.body.message||"client.component.actions.successDefault",icon=success?"check":"exclamation",_context2.next=15,(0,_effects.put)(_notifier2.default.info(type,title,null,icon));case 15:return _context2.abrupt("return",response.body);case 18:if(_context2.prev=18,_context2.t0=_context2.catch(0),_context2.t0 instanceof _rest2.default.ClientQuestionCancelledException){_context2.next=23;break}return _context2.next=23,(0,_effects.put)(_errorLogging2.default.logError("client.common.unexpectedError","client.component.actions.errorText",_context2.t0));case 23:case"end":return _context2.stop()}},_marked2,this,[[0,18]])}var validationErrorCompact=exports.validationErrorCompact=function(errors){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=errors[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var error=_step.value;if(error.entityValidatorErrors)return getFirstElement(error.entityValidatorErrors)[0];if(error.paths)return getFirstElement(getFirstElement(error.paths))[0]}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return null},getFirstElement=function(obj){return Object.keys(obj).length>=1?obj[Object.keys(obj)[0]]:void 0}},2386:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=_callee,exports.displayReportSettings=displayReportSettings,exports.awaitSettingsSubmit=awaitSettingsSubmit,exports.handleReportGenerations=handleReportGenerations,exports.handleSuccessfulReport=handleSuccessfulReport,exports.handleFailedReport=handleFailedReport,exports.handleFailedGenerationsRequest=handleFailedGenerationsRequest;var _react2=_interopRequireDefault(__webpack_require__(0)),_reduxSaga=__webpack_require__(265),_v2=_interopRequireDefault(__webpack_require__(906)),_saga2=_interopRequireDefault(__webpack_require__(427)),_download2=_interopRequireDefault(__webpack_require__(2274)),_report=__webpack_require__(2275),_rest2=_interopRequireDefault(__webpack_require__(897)),_notifier2=_interopRequireDefault(__webpack_require__(168)),_ReportSettings2=_interopRequireDefault(__webpack_require__(2388)),_effects=__webpack_require__(44);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _marked=regeneratorRuntime.mark(_callee),_marked2=regeneratorRuntime.mark(displayReportSettings),_marked3=regeneratorRuntime.mark(awaitSettingsSubmit),_marked4=regeneratorRuntime.mark(handleReportGenerations),_marked5=regeneratorRuntime.mark(handleSuccessfulReport),_marked6=regeneratorRuntime.mark(handleFailedReport),_marked7=regeneratorRuntime.mark(handleFailedGenerationsRequest);function _callee(actionDefinition,entity,ids,parent,params,config){var answerChannel,settingsModalId;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_effects.call)(_reduxSaga.channel);case 2:return answerChannel=_context.sent,_context.next=5,(0,_effects.call)(displayReportSettings,actionDefinition,entity,ids,answerChannel,config);case 5:return settingsModalId=_context.sent,_context.next=8,(0,_effects.call)(awaitSettingsSubmit,actionDefinition,answerChannel,settingsModalId,entity,ids);case 8:case"end":return _context.stop()}},_marked,this)}function displayReportSettings(actionDefinition,entity,ids,answerChannel,config){var options,resource,_ref,settingsDefinition,onSubmit,settingsModalId;return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return options={queryParams:{model:entity,keys:ids.join(",")}},resource="report/"+actionDefinition.reportId+"/settings",_context2.next=4,(0,_effects.call)(_rest2.default.requestSaga,resource,options);case 4:return _ref=_context2.sent,settingsDefinition=_ref.body,onSubmit=function(submitAction,formValues){return answerChannel.put({submitAction:submitAction,formValues:formValues})},_context2.next=9,(0,_effects.call)(_v2.default);case 9:return settingsModalId=_context2.sent,_context2.next=12,(0,_effects.put)(_notifier2.default.modalComponent(settingsModalId,settingsDefinition.description.name,null,function(){return _react2.default.createElement(_ReportSettings2.default,{listApp:config.listApp,formApp:config.formApp,onSubmit:onSubmit,settingsDefinition:settingsDefinition})},!0));case 12:return _context2.abrupt("return",settingsModalId);case 13:case"end":return _context2.stop()}},_marked2,this)}function awaitSettingsSubmit(definition,answerChannel,settingsModalId,entity,ids){var _ref2,submitAction,formValues,body,requestOptions,resource,generationsResponse;return regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=3,(0,_effects.take)(answerChannel);case 3:return _ref2=_context3.sent,submitAction=_ref2.submitAction,formValues=_ref2.formValues,body=_extends({entityModel:entity,entityIds:ids},formValues),requestOptions={method:"POST",body:body,acceptedStatusCodes:[400]},resource="report/"+definition.reportId+"/generations",_context3.next=11,(0,_effects.call)(_rest2.default.requestSaga,resource,requestOptions);case 11:if(400!==(generationsResponse=_context3.sent).status){_context3.next=17;break}return _context3.next=15,(0,_effects.call)(handleFailedGenerationsRequest,settingsModalId,generationsResponse);case 15:_context3.next=19;break;case 17:return _context3.next=19,(0,_effects.call)(handleReportGenerations,settingsModalId,generationsResponse,submitAction);case 19:_context3.next=0;break;case 21:case"end":return _context3.stop()}},_marked3,this)}function handleReportGenerations(settingsModalId,generationsResponse,submitAction){var pollingUrl,blockingInfoId,completed;return regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,(0,_effects.put)(_notifier2.default.removeModalComponent(settingsModalId));case 2:return pollingUrl=generationsResponse.headers.get("Location"),_context4.next=5,(0,_effects.call)(_v2.default);case 5:return blockingInfoId=_context4.sent,_context4.next=8,(0,_effects.put)(_notifier2.default.blockingInfo(blockingInfoId,"client.common.report.inProgress",null,"file-pdf"));case 8:return _context4.next=10,(0,_effects.call)(_saga2.default.checkStatusLoop,_rest2.default.requestSaga,pollingUrl,"in_progress");case 10:return completed=_context4.sent,_context4.next=13,(0,_effects.put)(_notifier2.default.removeBlockingInfo(blockingInfoId));case 13:if("completed"!==completed.body.status){_context4.next=18;break}return _context4.next=16,(0,_effects.call)(handleSuccessfulReport,completed,submitAction);case 16:_context4.next=20;break;case 18:return _context4.next=20,(0,_effects.call)(handleFailedReport);case 20:case"end":return _context4.stop()}},_marked4,this)}function handleSuccessfulReport(completed,submitAction){var outputJobId,outputJob,_outputJob$paths$docu,fileName,binaryLink;return regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return outputJobId=completed.body.outputJobId,_context5.next=3,(0,_effects.call)(_rest2.default.fetchEntity,"Output_job",outputJobId,{paths:["document"]});case 3:if(outputJob=_context5.sent,_outputJob$paths$docu=outputJob.paths.document.value.value,fileName=_outputJob$paths$docu.fileName,binaryLink=_outputJob$paths$docu.binaryLink,submitAction!==_report.submitActions.DOWNLOAD){_context5.next=10;break}return _context5.next=8,(0,_effects.call)(_download2.default.downloadUrl,binaryLink,fileName);case 8:_context5.next=13;break;case 10:if(submitAction!==_report.submitActions.DISPLAY){_context5.next=13;break}return _context5.next=13,(0,_effects.call)(_download2.default.openUrl,binaryLink);case 13:return _context5.next=15,(0,_effects.put)(_notifier2.default.info("success","client.common.report.successful",null));case 15:case"end":return _context5.stop()}},_marked5,this)}function handleFailedReport(){return regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,(0,_effects.put)(_notifier2.default.info("error","client.common.report.failed",null));case 2:case"end":return _context6.stop()}},_marked6,this)}function handleFailedGenerationsRequest(modalId,generationsResponse){var message;return regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return"client.common.report.failedGenerationTitle",message=generationsResponse.body.message||"client.common.report.failedGenerationMessage",_context7.next=4,(0,_effects.put)(_notifier2.default.info("warning","client.common.report.failedGenerationTitle",message));case 4:case"end":return _context7.stop()}},_marked7,this)}},2387:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.downloadUrl=function(url,fileName){var a=document.createElement("a");a.href=url,a.download=fileName||url.split("/").pop(),a.target="_blank",document.body.appendChild(a),a.click(),window.URL.revokeObjectURL&&window.URL.revokeObjectURL(url),a.remove&&a.remove()},exports.openUrl=function(url){var a=document.createElement("a");a.href=url,a.target="_blank",document.body.appendChild(a),a.click(),window.URL.revokeObjectURL&&window.URL.revokeObjectURL(url),a.remove&&a.remove()},exports.downloadSupportedByBrowser=function(){var a=document.createElement("a"),result=void 0!==a.download;return a.remove&&a.remove(),result}},2388:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react2=_interopRequireDefault(__webpack_require__(0)),_propTypes2=_interopRequireDefault(__webpack_require__(7)),_toccoUi=__webpack_require__(73),_reactIntl=__webpack_require__(32),_download2=_interopRequireDefault(__webpack_require__(2274)),_rest2=_interopRequireDefault(__webpack_require__(897)),_simpleFormConnector2=_interopRequireDefault(__webpack_require__(2276)),_report=__webpack_require__(2275),_StyledReportSettings2=_interopRequireDefault(__webpack_require__(2389));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ReportSettings=function(_React$Component){function ReportSettings(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ReportSettings);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ReportSettings.__proto__||Object.getPrototypeOf(ReportSettings)).call(this,props));return _this.handleSettingsChange=function(values,valid){_this.setState(_extends({},_this.state,{values:values,valid:valid}))},_this.handleCustomSettingsChange=function(customSettings,customSettingsValid){_this.setState(_extends({},_this.state,{customSettings:customSettings,customSettingsValid:customSettingsValid}))},_this.handleButtonClick=function(action){return function(){var groupedValues=_extends({},(0,_report.getGroupedValues)(_this.props.settingsDefinition,(0,_report.transformValues)(_this.state.values)),{customSettings:_this.state.customSettings});_this.props.onSubmit(action,groupedValues)}},_this.customSettingsDefined=props.settingsDefinition.customSettings&&props.settingsDefinition.customSettings.entity,_this.state={valid:!1,customSettingsValid:!_this.customSettingsDefined},_this.SimpleFormContainer=(0,_simpleFormConnector2.default)(props.formApp),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ReportSettings,_react2.default.Component),_createClass(ReportSettings,[{key:"render",value:function(){var _this2=this,settingsDefinition=this.props.settingsDefinition;return _react2.default.createElement(_StyledReportSettings2.default,null,_react2.default.createElement(this.SimpleFormContainer,{listApp:this.props.listApp,form:(0,_report.getFormDefinition)(settingsDefinition,this.context.intl),model:(0,_report.getModel)(settingsDefinition),noButtons:!0,onChange:function(_ref){var values=_ref.values,valid=_ref.valid;_this2.handleSettingsChange(values,valid)},formData:(0,_report.getFormDataDefaults)(settingsDefinition)}),this.customSettingsDefined&&_react2.default.createElement(this.SimpleFormContainer,{listApp:this.props.listApp,form:settingsDefinition.customSettings.form.form,model:_rest2.default.defaultModelTransformer(settingsDefinition.customSettings.entity),noButtons:!0,onChange:function(_ref2){var values=_ref2.values,valid=_ref2.valid;_this2.handleCustomSettingsChange(values,valid)}}),_react2.default.createElement(_toccoUi.ButtonGroup,null,_download2.default.downloadSupportedByBrowser()&&_react2.default.createElement(_toccoUi.Button,{ink:"primary",disabled:!this.state.customSettingsValid||!this.state.valid,icon:"file-download",onClick:this.handleButtonClick(_report.submitActions.DOWNLOAD)},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"client.common.report.download"})),_react2.default.createElement(_toccoUi.Button,{disabled:!this.state.customSettingsValid||!this.state.valid,icon:"file",onClick:this.handleButtonClick(_report.submitActions.DISPLAY)},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"client.common.report.display"}))))}}]),ReportSettings}();ReportSettings.contextTypes={intl:_reactIntl.intlShape},ReportSettings.propTypes={onSubmit:_propTypes2.default.func.isRequired,listApp:_propTypes2.default.func.isRequired,formApp:_propTypes2.default.func.isRequired,settingsDefinition:_report.reportSettingsDefinitionPropType.isRequired},exports.default=ReportSettings,ReportSettings.__docgenInfo={description:"",methods:[{name:"handleSettingsChange",docblock:null,modifiers:[],params:[{name:"values",type:null},{name:"valid",type:null}],returns:null},{name:"handleCustomSettingsChange",docblock:null,modifiers:[],params:[{name:"customSettings",type:null},{name:"customSettingsValid",type:null}],returns:null},{name:"handleButtonClick",docblock:null,modifiers:[],params:[{name:"action",type:null}],returns:null}],displayName:"ReportSettings",props:{onSubmit:{type:{name:"func"},required:!0,description:""},listApp:{type:{name:"func"},required:!0,description:""},formApp:{type:{name:"func"},required:!0,description:""},settingsDefinition:{type:{name:"custom",raw:"reportSettingsDefinitionPropType.isRequired"},required:!1,description:""}},context:{intl:{type:{name:"custom",raw:"intlShape"},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/app-extensions/src/actions/components/ReportSettings.js"]={name:"ReportSettings",docgenInfo:ReportSettings.__docgenInfo,path:"packages/app-extensions/src/actions/components/ReportSettings.js"})},2389:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var strings,raw,obj,_templateObject=(strings=["\n  && {\n    > div:first-of-type {\n      margin-bottom: 20px;\n    }\n  }\n"],raw=["\n  && {\n    > div:first-of-type {\n      margin-bottom: 20px;\n    }\n  }\n"],Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))),_styledComponents=__webpack_require__(5);var StyledReportSettings=((obj=_styledComponents)&&obj.__esModule?obj:{default:obj}).default.div(_templateObject);exports.default=StyledReportSettings},2390:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _preAction2=_interopRequireDefault(__webpack_require__(2391)),_confirm2=_interopRequireDefault(__webpack_require__(2392)),_initialForm2=_interopRequireDefault(__webpack_require__(2393));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var preActions=[_confirm2.default,_initialForm2.default];exports.default={run:(0,_preAction2.default)(preActions)}},2391:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_effects=__webpack_require__(44);exports.default=function(preAction){return regeneratorRuntime.mark(function _callee(definition,ids,config){var abort,i,params,handler,response;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:abort=!1,i=0,params={};case 3:if(abort||!preAction[i]){_context.next=14;break}if(!(handler=preAction[i]).shouldRun(definition)){_context.next=11;break}return _context.next=8,(0,_effects.call)(handler.run,params,definition,ids,config);case 8:response=_context.sent,abort=response.abort,params=_extends({},params,response.params);case 11:i++,_context.next=3;break;case 14:return _context.abrupt("return",{abort:abort,params:params});case 15:case"end":return _context.stop()}},_callee,this)})}},2392:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.answer=void 0,exports.run=run;var _react2=_interopRequireDefault(__webpack_require__(0)),_reduxSaga=__webpack_require__(265),_reactIntl=__webpack_require__(32),_notifier2=_interopRequireDefault(__webpack_require__(168)),_effects=__webpack_require__(44);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _marked=regeneratorRuntime.mark(run),answer=exports.answer=function(_answer){return{answer:_answer}};function run(params,definition,ids){var answerChannel,onYes,onCancel,message,response;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_effects.call)(_reduxSaga.channel);case 2:return answerChannel=_context.sent,onYes=function(){return answerChannel.put(answer(!0))},onCancel=function(){return answerChannel.put(answer(null))},message=_react2.default.createElement(_reactIntl.FormattedMessage,{id:definition.confirmMessage||"client.component.actions.defaultConfirmMessage",values:{length:ids.length}}),_context.next=8,(0,_effects.put)(_notifier2.default.confirm("client.component.actions.confirmTitle",message,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"client.common.yes"}),_react2.default.createElement(_reactIntl.FormattedMessage,{id:"client.common.cancel"}),onYes,onCancel));case 8:return _context.next=10,(0,_effects.take)(answerChannel);case 10:return response=_context.sent,_context.abrupt("return",{abort:null==response.answer});case 12:case"end":return _context.stop()}},_marked,this)}exports.default={shouldRun:function(actionDefinition){return!0===actionDefinition.showConfirmMessage},run:run}},2393:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.formValues=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_slicedToArray=function(){return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.run=run;var _react2=_interopRequireDefault(__webpack_require__(0)),_reduxSaga=__webpack_require__(265),_notifier2=_interopRequireDefault(__webpack_require__(168)),_rest2=_interopRequireDefault(__webpack_require__(897)),_simpleFormConnector2=_interopRequireDefault(__webpack_require__(2276)),_effects=__webpack_require__(44);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _marked=regeneratorRuntime.mark(run),formValues=exports.formValues=function(_formValues){return{formValues:_formValues}};function run(params,_ref,ids,config){var answerChannel,_ref2,_ref3,model,form,id,onSend,onCancel,SimpleFormContainer,response,formDataEntityModel=_ref.formDataEntityModel,formDataTitle=_ref.formDataTitle,formDataMessage=_ref.formDataMessage;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_effects.call)(_reduxSaga.channel);case 2:return answerChannel=_context.sent,_context.next=5,(0,_effects.all)([(0,_effects.call)(_rest2.default.fetchModel,formDataEntityModel),(0,_effects.call)(_rest2.default.fetchForm,formDataEntityModel+"_detail")]);case 5:return _ref2=_context.sent,_ref3=_slicedToArray(_ref2,2),model=_ref3[0],form=_ref3[1],id=(new Date).valueOf(),onSend=function(_ref4){var values=_ref4.values;return answerChannel.put(formValues(values))},onCancel=function(){return answerChannel.put(formValues(null))},SimpleFormContainer=(0,_simpleFormConnector2.default)(config.formApp),_context.next=15,(0,_effects.put)(_notifier2.default.modalComponent(id,formDataTitle,formDataMessage,function(){return _react2.default.createElement(SimpleFormContainer,{listApp:config.listApp,onSubmit:onSend,onCancel:onCancel,form:form,model:model})}));case 15:return _context.next=17,(0,_effects.take)(answerChannel);case 17:return response=_context.sent,_context.next=20,(0,_effects.put)(_notifier2.default.removeModalComponent(id));case 20:return _context.abrupt("return",_extends({abort:null===response.formValues},response.formValues?{params:{formData:{model:formDataEntityModel,paths:response.formValues}}}:{}));case 21:case"end":return _context.stop()}},_marked,this)}exports.default={shouldRun:function(actionDefinition){return!!actionDefinition.formDataEntityModel},run:run}},2394:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_reactRedux=__webpack_require__(110),_actions=__webpack_require__(2228),_Action=__webpack_require__(2395),_Action2=(obj=_Action)&&obj.__esModule?obj:{default:obj};var mapActionCreators={onClick:_actions.actionInvoke};exports.default=(0,_reactRedux.connect)(null,mapActionCreators)(_Action2.default)},2395:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _propTypes2=_interopRequireDefault(__webpack_require__(7)),_react2=_interopRequireDefault(__webpack_require__(0)),_omit3=_interopRequireDefault(__webpack_require__(2229)),_actionComponentTypes2=_interopRequireDefault(__webpack_require__(2272)),_actions=__webpack_require__(2227),_ActionGroup2=_interopRequireDefault(__webpack_require__(2416)),_SingleAction2=_interopRequireDefault(__webpack_require__(2418));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Action=function(_ref){var definition=_ref.definition,_onClick=_ref.onClick,ids=_ref.ids,parent=_ref.parent,entity=_ref.entity,mode=_ref.mode,callback=_ref.callback;if(!(0,_actions.modeFitsScopes)(mode,definition.scopes))return null;var ActionType=definition.componentType===_actionComponentTypes2.default.ACTION_GROUP?_ActionGroup2.default:_SingleAction2.default;return _react2.default.createElement("span",{className:"action",style:{marginBottom:".5em",display:"inline-block"}},_react2.default.createElement(ActionType,{definition:definition,onClick:function(definition){_onClick((0,_omit3.default)(definition,["label"]),entity,ids,parent,callback)},selectedCount:ids?ids.length:0}))};Action.propTypes={definition:_propTypes2.default.shape({type:_propTypes2.default.string,useLabel:_propTypes2.default.string,icon:_propTypes2.default.string,label:_propTypes2.default.string,config:_propTypes2.default.object}).isRequired,ids:_propTypes2.default.array,entity:_propTypes2.default.string,onClick:_propTypes2.default.func.isRequired,callback:_propTypes2.default.func,mode:_propTypes2.default.string,parent:_propTypes2.default.shape({key:_propTypes2.default.string.isRequired,model:_propTypes2.default.string.isRequired,reverseRelationName:_propTypes2.default.string})},exports.default=Action,Action.__docgenInfo={description:"",methods:[],displayName:"Action",props:{definition:{type:{name:"shape",value:{type:{name:"string",required:!1},useLabel:{name:"string",required:!1},icon:{name:"string",required:!1},label:{name:"string",required:!1},config:{name:"object",required:!1}}},required:!0,description:""},ids:{type:{name:"array"},required:!1,description:""},entity:{type:{name:"string"},required:!1,description:""},onClick:{type:{name:"func"},required:!0,description:""},callback:{type:{name:"func"},required:!1,description:""},mode:{type:{name:"string"},required:!1,description:""},parent:{type:{name:"shape",value:{key:{name:"string",required:!0},model:{name:"string",required:!0},reverseRelationName:{name:"string",required:!1}}},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/app-extensions/src/actions/components/Action.js"]={name:"Action",docgenInfo:Action.__docgenInfo,path:"packages/app-extensions/src/actions/components/Action.js"})},2416:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _propTypes2=_interopRequireDefault(__webpack_require__(7)),_react2=_interopRequireDefault(__webpack_require__(0)),_reactIntl=__webpack_require__(32),_toccoUi=__webpack_require__(73),_GroupElement2=_interopRequireDefault(__webpack_require__(2417)),_selectionHelper=__webpack_require__(2231);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MainAction=function(_ref,context){var definition=_ref.definition,selectedCount=_ref.selectedCount,_onClick=_ref.onClick,validSelection=(0,_selectionHelper.isValidSelection)(selectedCount,definition),title=(0,_selectionHelper.selectionText)(selectedCount,definition,context.intl),disabled=!0===definition.readonly||!validSelection;return _react2.default.createElement(_toccoUi.Menu.Item,{look:"raised"},_react2.default.createElement(_toccoUi.Button,{disabled:disabled,icon:definition.icon,label:definition.label,onClick:function(){_onClick(definition)},title:title}))};MainAction.contextTypes={intl:_reactIntl.intlShape},MainAction.propTypes={definition:_propTypes2.default.object.isRequired,onClick:_propTypes2.default.func.isRequired,selectedCount:_propTypes2.default.number};var ActionGroup=function(_ref2,context){var definition=_ref2.definition,onClick=_ref2.onClick,selectedCount=_ref2.selectedCount;return definition.action&&Object.keys(definition.action).length>0?_react2.default.createElement(_toccoUi.Menu.Button,{look:"raised"},_react2.default.createElement(_toccoUi.Menu.Item,null,_react2.default.createElement(_toccoUi.Menu.ButtonGroup,null,_react2.default.createElement(MainAction,{definition:definition.action,onClick:onClick,selectedCount:selectedCount}),_react2.default.createElement(_toccoUi.Menu.ItemFlyout,{isToggleable:!0!==definition.readonly,label:definition.label},_react2.default.createElement(_toccoUi.Menu.Stack,null,definition.children.map(function(actionDefinition,idx){return _react2.default.createElement(_GroupElement2.default,{definition:actionDefinition,key:idx,onClick:onClick,selectedCount:selectedCount})})))))):_react2.default.createElement(_toccoUi.Menu.Button,{look:"raised"},_react2.default.createElement(_toccoUi.Menu.ItemFlyout,{isToggleable:!0!==definition.readonly,label:definition.label},_react2.default.createElement(_toccoUi.Menu.Stack,null,definition.children.map(function(actionDefinition,idx){return _react2.default.createElement(_GroupElement2.default,{definition:actionDefinition,key:idx,onClick:onClick,selectedCount:selectedCount})}))))};ActionGroup.contextTypes={intl:_reactIntl.intlShape},ActionGroup.propTypes={definition:_propTypes2.default.object.isRequired,onClick:_propTypes2.default.func.isRequired,selectedCount:_propTypes2.default.number},exports.default=ActionGroup,ActionGroup.__docgenInfo={description:"",methods:[],displayName:"ActionGroup",props:{definition:{type:{name:"object"},required:!0,description:""},onClick:{type:{name:"func"},required:!0,description:""},selectedCount:{type:{name:"number"},required:!1,description:""}},context:{intl:{type:{name:"custom",raw:"intlShape"},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/app-extensions/src/actions/components/ActionGroup.js"]={name:"ActionGroup",docgenInfo:ActionGroup.__docgenInfo,path:"packages/app-extensions/src/actions/components/ActionGroup.js"})},2417:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _propTypes2=_interopRequireDefault(__webpack_require__(7)),_react2=_interopRequireDefault(__webpack_require__(0)),_reactIntl=__webpack_require__(32),_toccoUi=__webpack_require__(73),_actionTypes2=_interopRequireDefault(__webpack_require__(2273)),_selectionHelper=__webpack_require__(2231);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GroupElement=function(_ref,context){var definition=_ref.definition,_onClick=_ref.onClick,selectedCount=_ref.selectedCount;if(definition.actionType===_actionTypes2.default.DIVIDER)return _react2.default.createElement("hr",null);var validSelection=(0,_selectionHelper.isValidSelection)(selectedCount,definition),title=(0,_selectionHelper.selectionText)(selectedCount,definition,context.intl),disabled=!0===definition.readonly||!validSelection;return _react2.default.createElement(_toccoUi.Menu.Item,{look:"raised"},_react2.default.createElement(_toccoUi.Button,{disabled:disabled,icon:definition.icon,label:definition.label,onClick:function(){return!disabled&&_onClick(definition)},title:title}))};GroupElement.contextTypes={intl:_reactIntl.intlShape},GroupElement.propTypes={definition:_propTypes2.default.object.isRequired,onClick:_propTypes2.default.func.isRequired,onSelect:_propTypes2.default.func,selectedCount:_propTypes2.default.number},exports.default=GroupElement,GroupElement.__docgenInfo={description:"",methods:[],displayName:"GroupElement",props:{definition:{type:{name:"object"},required:!0,description:""},onClick:{type:{name:"func"},required:!0,description:""},onSelect:{type:{name:"func"},required:!1,description:""},selectedCount:{type:{name:"number"},required:!1,description:""}},context:{intl:{type:{name:"custom",raw:"intlShape"},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/app-extensions/src/actions/components/GroupElement.js"]={name:"GroupElement",docgenInfo:GroupElement.__docgenInfo,path:"packages/app-extensions/src/actions/components/GroupElement.js"})},2418:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_propTypes2=_interopRequireDefault(__webpack_require__(7)),_react2=_interopRequireDefault(__webpack_require__(0)),_toccoUi=__webpack_require__(73),_reactIntl=__webpack_require__(32),_selectionHelper=__webpack_require__(2231);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SingleAction=function(_ref,context){var definition=_ref.definition,_onClick=_ref.onClick,selectedCount=_ref.selectedCount,validSelection=(0,_selectionHelper.isValidSelection)(selectedCount,definition),title=(0,_selectionHelper.selectionText)(selectedCount,definition,context.intl);return _react2.default.createElement(_toccoUi.Button,_extends({look:"raised",onClick:function(e){_onClick(definition),e.stopPropagation()},icon:definition.icon},definition.label&&"NO"===definition.useLabel?{title:definition.label}:{label:definition.label},(!0===definition.readonly||!validSelection)&&{disabled:!0},{title:title}))};SingleAction.contextTypes={intl:_reactIntl.intlShape},SingleAction.propTypes={definition:_propTypes2.default.object.isRequired,onClick:_propTypes2.default.func,selectedCount:_propTypes2.default.number},exports.default=SingleAction,SingleAction.__docgenInfo={description:"",methods:[],displayName:"SingleAction",props:{definition:{type:{name:"object"},required:!0,description:""},onClick:{type:{name:"func"},required:!1,description:""},selectedCount:{type:{name:"number"},required:!1,description:""}},context:{intl:{type:{name:"custom",raw:"intlShape"},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/app-extensions/src/actions/components/SingleAction.js"]={name:"SingleAction",docgenInfo:SingleAction.__docgenInfo,path:"packages/app-extensions/src/actions/components/SingleAction.js"})},2419:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.formDataPropType=exports.addToStore=exports.tooltipSelector=exports.relationEntitiesSelector=void 0;var _redux=__webpack_require__(169),_propTypes2=_interopRequireDefault(__webpack_require__(7)),_reducer2=_interopRequireDefault(__webpack_require__(111)),_reducer4=_interopRequireDefault(__webpack_require__(2420)),_reducer6=_interopRequireDefault(__webpack_require__(2421)),_sagas2=_interopRequireDefault(__webpack_require__(2422)),_sagas4=_interopRequireDefault(__webpack_require__(2423)),_sagas6=_interopRequireDefault(__webpack_require__(2424)),_actions=__webpack_require__(2208);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.relationEntitiesSelector=function(store){return store.formData.relationEntities.data},exports.tooltipSelector=function(store){return store.formData.tooltips.data},exports.addToStore=function(store,values){_reducer2.default.injectReducers(store,{formData:(0,_redux.combineReducers)({relationEntities:_reducer4.default,tooltips:_reducer6.default})}),store.sagaMiddleware.run(_sagas2.default),store.sagaMiddleware.run(_sagas4.default),store.sagaMiddleware.run(_sagas6.default),values&&values.relationEntities&&Object.keys(values.relationEntities).forEach(function(field){store.dispatch((0,_actions.setRelationEntities)(field,values.relationEntities[field],!1))})},exports.formDataPropType=_propTypes2.default.shape({relationEntities:_propTypes2.default.objectOf(_propTypes2.default.array)})},2420:function(module,exports,__webpack_require__){"use strict";var _ACTION_HANDLERS;Object.defineProperty(exports,"__esModule",{value:!0}),exports.setRelationEntitiesLoading=exports.setRelationEntities=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=function(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:initialState,action=arguments[1],handler=ACTION_HANDLERS[action.type];return handler?handler(state,action):state};var actions=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(2208));function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var setRelationEntities=exports.setRelationEntities=function(state,_ref){var _ref$payload=_ref.payload,fieldName=_ref$payload.fieldName,entities=_ref$payload.entities,moreEntitiesAvailable=_ref$payload.moreEntitiesAvailable;return _extends({},state,{data:_extends({},state.data,_defineProperty({},fieldName,{data:entities,isLoading:!1,moreEntitiesAvailable:moreEntitiesAvailable}))})},setRelationEntitiesLoading=exports.setRelationEntitiesLoading=function(state,_ref2){var fieldName=_ref2.payload.fieldName;return _extends({},state,{data:_extends({},state.data,_defineProperty({},fieldName,{isLoading:!0,data:[]}))})},ACTION_HANDLERS=(_defineProperty(_ACTION_HANDLERS={},actions.SET_RELATION_ENTITIES,setRelationEntities),_defineProperty(_ACTION_HANDLERS,actions.SET_RELATION_ENTITIES_LOADING,setRelationEntitiesLoading),_ACTION_HANDLERS),initialState={data:{}}},2421:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setToolTip=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=function(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:initialState,action=arguments[1],handler=ACTION_HANDLERS[action.type];return handler?handler(state,action):state};var actions=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(2232));function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var setToolTip=exports.setToolTip=function(state,_ref){var _ref$payload=_ref.payload,entity=_ref$payload.entity,id=_ref$payload.id,tooltip=_ref$payload.tooltip;return _extends({},state,{data:_extends({},state.data,_defineProperty({},entity,_extends({},state.data[entity],_defineProperty({},id,tooltip))))})},ACTION_HANDLERS=_defineProperty({},actions.SET_TOOLTIP,setToolTip),initialState={data:{}}},2422:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getQuery=exports.fieldDataSelector=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=sagas,exports.loadRelationEntity=loadRelationEntity;var obj,relationEntitiesActions=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(2208)),_rest=__webpack_require__(897),_rest2=(obj=_rest)&&obj.__esModule?obj:{default:obj},_effects=__webpack_require__(44);var _marked=regeneratorRuntime.mark(sagas),_marked2=regeneratorRuntime.mark(loadRelationEntity);function sagas(){return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_effects.all)([(0,_effects.fork)(_effects.takeEvery,relationEntitiesActions.LOAD_RELATION_ENTITIES,loadRelationEntity)]);case 2:case"end":return _context.stop()}},_marked,this)}function loadRelationEntity(_ref){var fieldData,query,requestOptions,entities,moreEntitiesAvailable,_ref$payload=_ref.payload,fieldName=_ref$payload.fieldName,entityName=_ref$payload.entityName,_ref$payload$options=_ref$payload.options,options=void 0===_ref$payload$options?{}:_ref$payload$options;return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,(0,_effects.select)(fieldDataSelector,fieldName);case 2:if(fieldData=_context2.sent,dataLoaded(fieldData)&&!options.forceReload){_context2.next=16;break}return _context2.next=6,(0,_effects.put)(relationEntitiesActions.setRelationEntityLoading(fieldName));case 6:return _context2.next=8,(0,_effects.call)(getQuery,options);case 8:return query=_context2.sent,requestOptions={method:"GET"},_context2.next=12,(0,_effects.call)(_rest2.default.fetchEntities,entityName,query,requestOptions,selectEntitiesTransformer);case 12:return entities=_context2.sent,moreEntitiesAvailable=!!options.limit&&entities.length>options.limit,_context2.next=16,(0,_effects.put)(relationEntitiesActions.setRelationEntities(fieldName,options.limit?entities.splice(0,options.limit):entities,moreEntitiesAvailable));case 16:case"end":return _context2.stop()}},_marked2,this)}var fieldDataSelector=exports.fieldDataSelector=function(state,fieldName){return state.formData.relationEntities.data[fieldName]},dataLoaded=function(fieldData){return!!(fieldData&&fieldData.data&&fieldData.data.length>0)},getQuery=exports.getQuery=function(options){return _extends({},options.limit?{limit:options.limit+1}:{},options.searchTerm?{search:options.searchTerm}:{},options.sorting?{sorting:options.sorting}:{},options.formBase?{form:options.formBase+"_list"}:{},{fields:[],relations:[]})},selectEntitiesTransformer=function(json){return json.data.map(function(e){return{display:e.display,key:e.key}})}},2423:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tooltipSelector=void 0,exports.default=sagas,exports.loadToolTip=loadToolTip;var _get3=_interopRequireDefault(__webpack_require__(898)),tooltipActions=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(2232)),_rest2=_interopRequireDefault(__webpack_require__(897)),_effects=__webpack_require__(44);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _marked=regeneratorRuntime.mark(sagas),_marked2=regeneratorRuntime.mark(loadToolTip);function sagas(){return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_effects.all)([(0,_effects.fork)(_effects.takeEvery,tooltipActions.LOAD_TOOLTIP,loadToolTip)]);case 2:case"end":return _context.stop()}},_marked,this)}var tooltipSelector=exports.tooltipSelector=function(state,entityName,id){return(0,_get3.default)(state,"formData.tooltips.data."+entityName+"."+id,null)};function loadToolTip(_ref){var response,display,_ref$payload=_ref.payload,entity=_ref$payload.entity,id=_ref$payload.id;return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!entity){_context2.next=11;break}return _context2.next=3,(0,_effects.select)(tooltipSelector,entity,id);case 3:if(null!=_context2.sent){_context2.next=11;break}return _context2.next=7,(0,_effects.call)(_rest2.default.requestSaga,"entity/"+entity+"/"+id+"/display/tooltip",{});case 7:return response=_context2.sent,display=response.body.display,_context2.next=11,(0,_effects.put)(tooltipActions.setToolTip(entity,id,display));case 11:case"end":return _context2.stop()}},_marked2,this)}},2424:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.textResourceSelector=void 0,exports.default=sagas,exports.openAdvancedSearch=openAdvancedSearch,exports.closeAdvancedSearch=closeAdvancedSearch;var _reduxSaga=__webpack_require__(265),_join3=_interopRequireDefault(__webpack_require__(2278)),_v2=_interopRequireDefault(__webpack_require__(906)),_notifier2=_interopRequireDefault(__webpack_require__(168)),_rest2=_interopRequireDefault(__webpack_require__(897)),advancedSearchActions=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(2279)),_utils=__webpack_require__(2425),_effects=__webpack_require__(44);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _marked=regeneratorRuntime.mark(sagas),_marked2=regeneratorRuntime.mark(openAdvancedSearch),_marked3=regeneratorRuntime.mark(closeAdvancedSearch),textResourceSelector=exports.textResourceSelector=function(state,key){return state.intl.messages[key]||key};function sagas(){return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_effects.all)([(0,_effects.fork)(_effects.takeEvery,advancedSearchActions.OPEN_ADVANCED_SEARCH,openAdvancedSearch)]);case 2:case"end":return _context.stop()}},_marked,this)}function openAdvancedSearch(_ref){var listApp,onSelect,formField,modelField,value,multi,entity,fieldId,label,fieldFormBase,formBase,answerChannel,modalId,advancedSearchTitle,selection,advancedSearchComponent,payload=_ref.payload;return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return listApp=payload.listApp,onSelect=payload.onSelect,formField=payload.formField,modelField=payload.modelField,value=payload.value,multi=modelField.multi,entity=modelField.targetEntity,fieldId=formField.id,label=formField.label,fieldFormBase=formField.formBase,formBase=fieldFormBase||entity,_context2.next=6,(0,_effects.call)(_reduxSaga.channel);case 6:return answerChannel=_context2.sent,_context2.next=9,(0,_effects.call)(_v2.default);case 9:return modalId=_context2.sent,_context2.next=12,(0,_effects.select)(textResourceSelector,"client.common.advancedSearch");case 12:return advancedSearchTitle=_context2.sent,_context2.next=15,(0,_effects.call)(_utils.getSelection,value,multi);case 15:return selection=_context2.sent,advancedSearchComponent=(0,_utils.getAdvancedSearchComponent)(listApp,entity,formBase,selection,function(ids){answerChannel.put(advancedSearchActions.advancedSearchUpdate(ids))},function(){answerChannel.put(advancedSearchActions.advancedSearchClose())},fieldId,multi),_context2.next=19,(0,_effects.put)(_notifier2.default.modalComponent(modalId,label+": "+advancedSearchTitle,null,advancedSearchComponent,!0));case 19:return _context2.next=21,(0,_effects.spawn)(closeAdvancedSearch,answerChannel,modalId,fieldId,entity,onSelect,multi);case 21:case"end":return _context2.stop()}},_marked2,this)}function closeAdvancedSearch(answerChannel,modalId,fieldId,entity,onSelect,multi){var modalOpen,_ref2,payload,type,query,entities,value;return regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:modalOpen=!0;case 1:if(!modalOpen){_context3.next=34;break}return _context3.next=4,(0,_effects.take)(answerChannel);case 4:if(_ref2=_context3.sent,payload=_ref2.payload,(type=_ref2.type)!==advancedSearchActions.ADVANCED_SEARCH_UPDATE){_context3.next=28;break}if(!(payload.ids&&payload.ids.length>0)){_context3.next=20;break}return query={tql:"IN(pk,"+(0,_join3.default)(payload.ids,",")+")"},_context3.next=12,(0,_effects.call)(_rest2.default.fetchEntities,entity,query);case 12:return entities=_context3.sent,_context3.next=15,(0,_effects.call)(_utils.getValue,entities,multi);case 15:return value=_context3.sent,_context3.next=18,(0,_effects.put)(onSelect(fieldId,value));case 18:_context3.next=22;break;case 20:return _context3.next=22,(0,_effects.put)(onSelect(fieldId,[]));case 22:if(multi){_context3.next=26;break}return _context3.next=25,(0,_effects.put)(_notifier2.default.removeModalComponent(modalId));case 25:modalOpen=!1;case 26:_context3.next=32;break;case 28:if(type!==advancedSearchActions.ADVANCED_SEARCH_CLOSE){_context3.next=32;break}return _context3.next=31,(0,_effects.put)(_notifier2.default.removeModalComponent(modalId));case 31:modalOpen=!1;case 32:_context3.next=1;break;case 34:case"end":return _context3.stop()}},_marked3,this)}},2425:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAdvancedSearchComponent=exports.getValue=exports.getSelection=void 0;var _react2=_interopRequireDefault(__webpack_require__(0)),_AdvancedSearchContainer2=_interopRequireDefault(__webpack_require__(2426));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.getSelection=function(value,multi){return value?multi?value.map(function(v){return v.key}):[value.key]:[]},exports.getValue=function(entities,multi){return multi?entities:entities.length>0?{key:entities[0].key,display:entities[0].display}:null},exports.getAdvancedSearchComponent=function(listApp,entity,formBase,selection,onSelectionChange,onOkClick,fieldId,multi){return function(){return _react2.default.createElement(_AdvancedSearchContainer2.default,{ListApp:listApp,entityName:entity,formBase:formBase,selection:selection,onSelectionChange:onSelectionChange,onOkClick:onOkClick,field:fieldId,multi:multi})}}},2426:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _reactRedux=__webpack_require__(110),_actionEmitter2=_interopRequireDefault(__webpack_require__(263)),_AdvancedSearch2=_interopRequireDefault(__webpack_require__(2427));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mapActionCreators={emitAction:_actionEmitter2.default.dispatchEmittedAction};exports.default=(0,_reactRedux.connect)(null,mapActionCreators)(_AdvancedSearch2.default)},2427:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _propTypes2=_interopRequireDefault(__webpack_require__(7)),_react2=_interopRequireDefault(__webpack_require__(0)),_toccoUi=__webpack_require__(73),_reactIntl=__webpack_require__(32),_v2=_interopRequireDefault(__webpack_require__(906));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AdvancedSearch=function(props){return _react2.default.createElement("div",null,_react2.default.createElement(props.ListApp,{id:"advancedSearch-"+(0,_v2.default)(),keepStore:!1,entityName:props.entityName,formBase:props.formBase,limit:5,showSearchForm:!0,onSelectChange:function(selection){props.onSelectionChange(selection)},selection:props.selection,showCreateButton:!1,emitAction:props.emitAction,selectionStyle:props.multi?"multi":"single",selectOnRowClick:!0}),_react2.default.createElement("div",{style:{margin:"5px"}},_react2.default.createElement(_toccoUi.Button,{look:"raised",onClick:props.onOkClick},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"client.common.ok"}))))};AdvancedSearch.propTypes={ListApp:_propTypes2.default.func.isRequired,entityName:_propTypes2.default.string.isRequired,formBase:_propTypes2.default.string.isRequired,emitAction:_propTypes2.default.func.isRequired,selection:_propTypes2.default.array,field:_propTypes2.default.string,onSelectionChange:_propTypes2.default.func,onOkClick:_propTypes2.default.func,appId:_propTypes2.default.string,showSearchForm:_propTypes2.default.bool,multi:_propTypes2.default.bool},exports.default=AdvancedSearch,AdvancedSearch.__docgenInfo={description:"",methods:[],displayName:"AdvancedSearch",props:{ListApp:{type:{name:"func"},required:!0,description:""},entityName:{type:{name:"string"},required:!0,description:""},formBase:{type:{name:"string"},required:!0,description:""},emitAction:{type:{name:"func"},required:!0,description:""},selection:{type:{name:"array"},required:!1,description:""},field:{type:{name:"string"},required:!1,description:""},onSelectionChange:{type:{name:"func"},required:!1,description:""},onOkClick:{type:{name:"func"},required:!1,description:""},appId:{type:{name:"string"},required:!1,description:""},showSearchForm:{type:{name:"bool"},required:!1,description:""},multi:{type:{name:"bool"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/app-extensions/src/formData/advancedSearch/AdvancedSearch.js"]={name:"AdvancedSearch",docgenInfo:AdvancedSearch.__docgenInfo,path:"packages/app-extensions/src/formData/advancedSearch/AdvancedSearch.js"})},2429:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sagas=void 0;var _reducer2=_interopRequireDefault(__webpack_require__(2221)),_simpleForm=__webpack_require__(2432),_simpleForm2=_interopRequireDefault(_simpleForm);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default={simpleForm:_simpleForm2.default,form:_reducer2.default};exports.sagas=[_simpleForm.sagas]},2432:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sagas=void 0;var _reducer2=_interopRequireDefault(__webpack_require__(2433)),_sagas2=_interopRequireDefault(__webpack_require__(2434));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.sagas=_sagas2.default,exports.default=_reducer2.default},2433:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=reducer;var ACTION_HANDLERS={},initialState={};function reducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:initialState,action=arguments[1],handler=ACTION_HANDLERS[action.type];return handler?handler(state,action):state}reducer.__docgenInfo={description:"",methods:[],displayName:"reducer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/simple-form/src/modules/simpleForm/reducer.js"]={name:"reducer",docgenInfo:reducer.__docgenInfo,path:"packages/simple-form/src/modules/simpleForm/reducer.js"})},2434:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.selector=exports.inputSelector=void 0,exports.default=sagas,exports.initialize=initialize,exports.submit=submit,exports.cancel=cancel,exports.change=change,exports.advancedSearchUpdate=advancedSearchUpdate;var _getFormValues2=_interopRequireDefault(__webpack_require__(2222)),_actions2=_interopRequireDefault(__webpack_require__(2201)),_isValid2=_interopRequireDefault(__webpack_require__(2435)),_actionTypes=__webpack_require__(2209),_externalEvents2=_interopRequireDefault(__webpack_require__(899)),_form2=_interopRequireDefault(__webpack_require__(2176)),actions=_interopRequireWildcard(__webpack_require__(2298)),documentActions=_interopRequireWildcard(__webpack_require__(2299)),documentSagas=_interopRequireWildcard(__webpack_require__(2450)),_effects=__webpack_require__(44);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _marked=regeneratorRuntime.mark(sagas),_marked2=regeneratorRuntime.mark(initialize),_marked3=regeneratorRuntime.mark(submit),_marked4=regeneratorRuntime.mark(cancel),_marked5=regeneratorRuntime.mark(change),_marked6=regeneratorRuntime.mark(advancedSearchUpdate),FORM_ID="simpleForm",inputSelector=exports.inputSelector=function(state){return state.input};exports.selector=function(state){return state.simpleForm};function sagas(){return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_effects.all)([(0,_effects.fork)(_effects.takeEvery,actions.INITIALIZE_QUESTION_FORM,initialize),(0,_effects.fork)(_effects.takeEvery,actions.SUBMIT,submit),(0,_effects.fork)(_effects.takeEvery,actions.CANCEL,cancel),(0,_effects.fork)(_effects.takeLatest,documentActions.UPLOAD_DOCUMENT,documentSagas.uploadDocument),(0,_effects.fork)(_effects.takeLatest,actions.ADVANCED_SEARCH_UPDATE,advancedSearchUpdate),(0,_effects.fork)(_effects.takeLatest,_actionTypes.CHANGE,change),(0,_effects.fork)(_effects.takeLatest,_actionTypes.UPDATE_SYNC_ERRORS,change),(0,_effects.fork)(_effects.takeLatest,_actionTypes.INITIALIZE,change)]);case 2:case"end":return _context.stop()}},_marked,this)}function initialize(){var _ref,form,fieldDefinitions,defaultValues;return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,(0,_effects.select)(inputSelector);case 2:return _ref=_context2.sent,form=_ref.form,_context2.next=6,(0,_effects.call)(_form2.default.getFieldDefinitions,form);case 6:return fieldDefinitions=_context2.sent,_context2.next=9,(0,_effects.call)(_form2.default.getDefaultValues,fieldDefinitions);case 9:return defaultValues=_context2.sent,_context2.next=12,(0,_effects.put)(_actions2.default.initialize(FORM_ID,defaultValues));case 12:case"end":return _context2.stop()}},_marked2,this)}function submit(){var values;return regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,(0,_effects.select)((0,_getFormValues2.default)(FORM_ID));case 2:return values=_context3.sent,_context3.next=5,(0,_effects.put)(_externalEvents2.default.fireExternalEvent("onSubmit",{values:values}));case 5:case"end":return _context3.stop()}},_marked3,this)}function cancel(){var values;return regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,(0,_effects.select)((0,_getFormValues2.default)(FORM_ID));case 2:return values=_context4.sent,_context4.next=5,(0,_effects.put)(_externalEvents2.default.fireExternalEvent("onCancel",{values:values}));case 5:case"end":return _context4.stop()}},_marked4,this)}function change(){var values,valid;return regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,(0,_effects.select)((0,_getFormValues2.default)(FORM_ID));case 2:return values=_context5.sent,_context5.next=5,(0,_effects.select)((0,_isValid2.default)(FORM_ID));case 5:return valid=_context5.sent,_context5.next=8,(0,_effects.put)(_externalEvents2.default.fireExternalEvent("onChange",{values:values,valid:valid}));case 8:case"end":return _context5.stop()}},_marked5,this)}function advancedSearchUpdate(_ref2){var _ref2$payload=_ref2.payload,field=_ref2$payload.field,ids=_ref2$payload.ids;return regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,(0,_effects.put)(_actions2.default.change(FORM_ID,_form2.default.transformFieldName(field),ids));case 2:case"end":return _context6.stop()}},_marked6,this)}},2437:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_react2=_interopRequireDefault(__webpack_require__(0)),_Field2=_interopRequireDefault(__webpack_require__(2326)),_get3=_interopRequireDefault(__webpack_require__(898)),_pick3=_interopRequireDefault(__webpack_require__(905)),_toccoUi=__webpack_require__(73),_consoleLogger2=_interopRequireDefault(__webpack_require__(170)),_ReduxFormFieldAdapter2=_interopRequireDefault(__webpack_require__(2440)),_formDefinition=__webpack_require__(2293),_reduxForm=__webpack_require__(2294),_actions2=_interopRequireDefault(__webpack_require__(2185)),_componentTypes2=_interopRequireDefault(__webpack_require__(2241)),_layoutTypes2=_interopRequireDefault(__webpack_require__(2295)),_actions3=__webpack_require__(2227);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}exports.default=function(entity,model,formName,formDefinition,formValues,formFieldUtils,formFieldMapping,readOnlyFormFieldMapping,beforeRenderField,mode,componentMapping){var isReadOnlyForm=formDefinition.readonly,createAction=function(child,key){return _react2.default.createElement(_actions2.default.Action,{definition:child,entity:entity.model,ids:[].concat(_toConsumableArray(entity.key?[entity.key]:[])),mode:mode,key:"detailAction"+key})},createFieldSet=function(fieldSet,key){var fieldDefinition=fieldSet.children.find(function(child){return!(0,_actions3.isAction)(child.componentType)});if(!fieldDefinition)return null;var formDefinitionField=_extends({},fieldDefinition,(0,_pick3.default)(fieldSet,["label","hidden","readonly","scopes"])),fieldName=formDefinitionField.path||formDefinitionField.id,entityField=entity?entity.paths[fieldName]:null,modelSelector=formDefinitionField.path?formDefinitionField.path.split(".")[0]:formDefinitionField.id,modelField=model[modelSelector];return function(formDefinitionField,entityField){if(mode&&formDefinitionField.scopes&&formDefinitionField.scopes.length>0&&!formDefinitionField.scopes.includes(mode))return!1;if(formDefinitionField.hidden)return!1;if(beforeRenderField&&!1===beforeRenderField(formDefinitionField.id))return!1;if(entityField&&!(0,_get3.default)(entityField,"value.readable",!0))return!1;return!(isReadOnlyForm&&function(fieldName,formValues){if(formValues.hasOwnProperty(fieldName)){var value=formValues[fieldName];return null==value||""===value||Array.isArray(value)&&0===value.length}return!1}((0,_reduxForm.transformFieldName)(formDefinitionField.id),formValues))}(formDefinitionField,entityField)?_react2.default.createElement(_Field2.default,{key:key,readOnlyForm:isReadOnlyForm,name:(0,_reduxForm.transformFieldName)(fieldName),id:(0,_formDefinition.getFieldId)(formName,fieldName),component:_ReduxFormFieldAdapter2.default,formDefinitionField:formDefinitionField,entityField:entityField,modelField:modelField,formFieldUtils:formFieldUtils,formFieldMapping:formFieldMapping,readOnlyFormFieldMapping:readOnlyFormFieldMapping,format:null}):null},createLayoutComponent=function(field,type,key,traverser){var _layoutMap,elements=traverser();if(Array.isArray(elements)&&(elements=elements.filter(function(el){return el})),!elements||Array.isArray(elements)&&0===elements.length)return null;var content=field.label?_react2.default.createElement(_toccoUi.Panel.Wrapper,{isFramed:!0,isOpen:!0},_react2.default.createElement(_toccoUi.Panel.Header,null,_react2.default.createElement(_toccoUi.Typography.H4,null,field.label)),_react2.default.createElement(_toccoUi.Panel.Body,null,elements)):elements,LayoutComponent=(_defineProperty(_layoutMap={},_layoutTypes2.default.HORIZONTAL_BOX,_toccoUi.Layout.Container),_defineProperty(_layoutMap,_layoutTypes2.default.VERTICAL_BOX,_toccoUi.Layout.Box),_layoutMap)[type];return LayoutComponent?_react2.default.createElement(LayoutComponent,{key:key},content):(_consoleLogger2.default.logWarning('Layout type "'+type+'" for box "'+field.id+'" is unknown.'),_react2.default.createElement("div",{key:key},content))};return function(){return function formTraverser(children){for(var result=[],_loop=function(i){var child=children[i];if(child.componentType===_componentTypes2.default.LAYOUT)result.push(createLayoutComponent(child,child.layoutType,i,function(){return formTraverser(child.children)}));else if((0,_actions3.isAction)(child.componentType))result.push(createAction(child,i));else if(child.componentType===_componentTypes2.default.FIELD_SET)result.push(createFieldSet(child,i));else if(componentMapping&&componentMapping[child.componentType]){var component=componentMapping[child.componentType],fieldName=child.id,modelField=model[fieldName];return{v:component(child,modelField,i)}}},i=0;i<children.length;i++){var _ret=_loop(i);if("object"===(void 0===_ret?"undefined":_typeof(_ret)))return _ret.v}return result}(formDefinition.children)}}},2440:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _propTypes2=_interopRequireDefault(__webpack_require__(7)),_omit3=_interopRequireDefault(__webpack_require__(2229)),_reactIntl=__webpack_require__(32),_formField2=_interopRequireDefault(__webpack_require__(2202));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ReduxFormFieldAdapter=function(props){var input=props.input,_props$meta=props.meta,dirty=_props$meta.dirty,touched=_props$meta.touched,error=_props$meta.error,submitting=_props$meta.submitting,id=props.id,formDefinitionField=props.formDefinitionField,entityField=props.entityField,modelField=props.modelField,formFieldUtils=props.formFieldUtils,readOnlyForm=props.readOnlyForm,events=function(input){return(0,_omit3.default)(input,["name","value","onChange"])}(input),fomFieldData={formDefinitionField:formDefinitionField,modelField:modelField,id:id,value:input.value,dirty:dirty,touched:touched,submitting:submitting,events:events,error:error,onChange:input.onChange,entityField:entityField,utils:formFieldUtils,readOnlyForm:readOnlyForm},resources={mandatoryTitle:props.intl.formatMessage({id:"client.component.form.mandatoryFieldTitle"})},mapping=readOnlyForm?props.readOnlyFormFieldMapping:props.formFieldMapping;return _formField2.default.formFieldFactory(mapping,fomFieldData,resources)};ReduxFormFieldAdapter.propTypes={intl:_reactIntl.intlShape.isRequired,id:_propTypes2.default.string,input:_propTypes2.default.shape({value:_propTypes2.default.any,name:_propTypes2.default.string,onChange:_propTypes2.default.func}).isRequired,meta:_propTypes2.default.shape({touched:_propTypes2.default.bool,error:_propTypes2.default.objectOf(_propTypes2.default.arrayOf(_propTypes2.default.oneOfType([_propTypes2.default.node,_propTypes2.default.string]))),dirty:_propTypes2.default.bool,submitting:_propTypes2.default.bool}).isRequired,formDefinitionField:_propTypes2.default.object.isRequired,entityField:_propTypes2.default.object,formFieldUtils:_propTypes2.default.object.isRequired,modelField:_propTypes2.default.object,readOnlyForm:_propTypes2.default.bool,formFieldMapping:_propTypes2.default.objectOf(_propTypes2.default.oneOfType([_propTypes2.default.func,_propTypes2.default.objectOf(_propTypes2.default.func)])).isRequired,readOnlyFormFieldMapping:_propTypes2.default.objectOf(_propTypes2.default.oneOfType([_propTypes2.default.func,_propTypes2.default.objectOf(_propTypes2.default.func)])).isRequired},exports.default=(0,_reactIntl.injectIntl)(ReduxFormFieldAdapter)},2441:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.formFieldFactory=void 0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_react2=_interopRequireDefault(__webpack_require__(0)),_get3=_interopRequireDefault(__webpack_require__(898)),_toccoUi=__webpack_require__(73),_consoleLogger2=_interopRequireDefault(__webpack_require__(170));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var formFieldFactory=exports.formFieldFactory=function(mapping,data){var resources=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var formDefinitionField=data.formDefinitionField,modelField=data.modelField,entityField=data.entityField,id=data.id,value=data.value,dirty=data.dirty,touched=data.touched,onChange=data.onChange,onBlur=data.onBlur,events=data.events,error=data.error,utils=data.utils,submitting=data.submitting,readOnly=data.readOnlyForm||formDefinitionField.readonly||submitting||!(0,_get3.default)(entityField,"writable",!0),mandatory=!readOnly&&(0,_get3.default)(modelField,"validation.mandatory",!1),valueField=valueFieldFactory(mapping,formDefinitionField,modelField,{id:id,value:value,onChange:onChange,onBlur:onBlur,readOnly:readOnly,mandatory:mandatory},events,utils);return _react2.default.createElement(_toccoUi.FormField,{key:id,id:id,label:formDefinitionField.label,mandatory:mandatory,mandatoryTitle:resources.mandatoryTitle,error:error,touched:touched,dirty:dirty},valueField)}catch(exception){return _consoleLogger2.default.logError("Error creating formField",exception),_react2.default.createElement("span",null)}},valueFieldFactory=function(mapping,formField,modelField,props,events,utils){var typeFactory=mapping[formField[formField.dataType?"dataType":"componentType"]];return typeFactory?"object"!==(void 0===typeFactory?"undefined":_typeof(typeFactory))||(typeFactory=typeFactory[modelField.type])?typeFactory(formField,modelField,props,events,utils):(_consoleLogger2.default.log("FormType '"+formField.dataType+"' not present in typeFactoryMap for model field type "+modelField.type),_react2.default.createElement("span",null)):(_consoleLogger2.default.log("FormType '"+formField.dataType+"' not present in typeFactoryMap"),_react2.default.createElement("span",null))};formFieldFactory.__docgenInfo={description:"",methods:[],displayName:"formFieldFactory"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/app-extensions/src/formField/formField.js"]={name:"formFieldFactory",docgenInfo:formFieldFactory.__docgenInfo,path:"packages/app-extensions/src/formField/formField.js"})},2442:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _editableValueFactory2=_interopRequireDefault(__webpack_require__(2291)),_formattedValueFactory2=_interopRequireDefault(__webpack_require__(2292));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default={binary:(0,_editableValueFactory2.default)("document"),birthdate:(0,_editableValueFactory2.default)("birthdate"),boolean:(0,_editableValueFactory2.default)("boolean"),code:(0,_editableValueFactory2.default)("code"),counter:(0,_editableValueFactory2.default)("number"),"data-amount":(0,_editableValueFactory2.default)("number"),date:(0,_editableValueFactory2.default)("date"),datetime:(0,_editableValueFactory2.default)("datetime"),decimal:(0,_editableValueFactory2.default)("decimal"),display:(0,_formattedValueFactory2.default)("html"),duration:(0,_editableValueFactory2.default)("duration"),document:(0,_editableValueFactory2.default)("document"),email:(0,_editableValueFactory2.default)("email"),html:(0,_editableValueFactory2.default)("text"),image:(0,_editableValueFactory2.default)("document"),identifier:(0,_editableValueFactory2.default)("string"),latitude:(0,_editableValueFactory2.default)("number"),login:(0,_editableValueFactory2.default)("string"),long:(0,_editableValueFactory2.default)("number"),longitude:(0,_editableValueFactory2.default)("number"),moneyamount:(0,_editableValueFactory2.default)("moneyamount"),"multi-remote-field":(0,_editableValueFactory2.default)("multi-remote"),"multi-select-box":(0,_editableValueFactory2.default)("multi-select"),"named-upload":(0,_editableValueFactory2.default)("document"),integer:(0,_editableValueFactory2.default)("number"),percent:(0,_editableValueFactory2.default)("number"),phone:(0,_editableValueFactory2.default)("phone"),"pulldown-date":(0,_editableValueFactory2.default)("date-range"),range:{number:(0,_editableValueFactory2.default)("number"),counter:(0,_editableValueFactory2.default)("number"),date:(0,_editableValueFactory2.default)("date-range"),birthdate:(0,_editableValueFactory2.default)("date-range")},"single-remote-field":(0,_editableValueFactory2.default)("remote"),remote:(0,_editableValueFactory2.default)("remote"),"search-filter":(0,_editableValueFactory2.default)("search-filter"),"single-select-box":(0,_editableValueFactory2.default)("single-select"),sorting:(0,_editableValueFactory2.default)("number"),string:(0,_editableValueFactory2.default)("string"),text:(0,_editableValueFactory2.default)("text"),time:(0,_editableValueFactory2.default)("time"),"text-area":(0,_editableValueFactory2.default)("text"),upload:(0,_editableValueFactory2.default)("document"),url:(0,_editableValueFactory2.default)("url"),uuid:(0,_editableValueFactory2.default)("string"),"ch.tocco.nice2.model.form.components.simple.UploadField":(0,_editableValueFactory2.default)("document"),"ch.tocco.nice2.model.form.components.simple.UuidField":(0,_editableValueFactory2.default)("string")}},2443:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _forOwn3=_interopRequireDefault(__webpack_require__(2215)),_get3=_interopRequireDefault(__webpack_require__(898)),_validators2=_interopRequireDefault(__webpack_require__(2296)),_formErrors2=_interopRequireDefault(__webpack_require__(2239));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(entityModel){return function(values){return validate(values,entityModel)}};var validate=function(values,entityModel){var errors={};return errors=validateModel(values,entityModel,errors),errors=validateTypes(values,entityModel,errors)},validateTypes=function(values,entityModel,errors){return(0,_forOwn3.default)(values,function(value,key){if(value){var type=(0,_get3.default)(entityModel,key+".type"),typeValidator=_validators2.default.syncValidators[type];if(typeValidator){var validatorError=typeValidator(value,entityModel[key]);validatorError&&(errors=_formErrors2.default.addErrors(errors,key,validatorError))}}}),errors},validateModel=function(values,entityModel,errors){return(0,_forOwn3.default)(entityModel,function(fieldModel){var valueSelector=function(fieldModel){return"relation"===fieldModel.type?fieldModel.relationName:fieldModel.fieldName}(fieldModel),fieldValue=values[valueSelector];(0,_forOwn3.default)(_validators2.default.modelValidators,function(validator,name){var validatorValue=function(fieldModel,selector){if(fieldModel.validation)return fieldModel.validation[selector]}(fieldModel,name);if(validatorValue){var validatorErrors=validator(fieldValue,validatorValue);validatorErrors&&(errors=_formErrors2.default.addErrors(errors,valueSelector,validatorErrors))}})}),errors}},2444:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.postPointValidator=exports.maxNumberValidator=exports.maxLengthValidator=exports.minLengthValidator=exports.mandatoryValidator=void 0;var _react2=_interopRequireDefault(__webpack_require__(0)),_reactIntl=__webpack_require__(32),_isEmpty3=_interopRequireDefault(__webpack_require__(2216));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mandatoryValidator=exports.mandatoryValidator=function(value,isMandatory){return isMandatory&&("number"!=typeof value||isNaN(value))&&(!value||(0,_isEmpty3.default)(value))?{mandatory:[_react2.default.createElement(_reactIntl.FormattedMessage,{key:"syncValidationRequired",id:"client.component.form.syncValidationRequired"})]}:null},minLengthValidator=exports.minLengthValidator=function(value,minLength){return value&&value.length<minLength?{minLength:[_react2.default.createElement(_reactIntl.FormattedMessage,{key:"syncValidationMinLength",id:"client.component.form.syncValidationMinLength",values:{minLength:minLength}})]}:null},maxLengthValidator=exports.maxLengthValidator=function(value,maxLength){return value&&value.length>maxLength?{maxLength:[_react2.default.createElement(_reactIntl.FormattedMessage,{key:"syncValidationMaxLength",id:"client.component.form.syncValidationMaxLength",values:{maxLength:maxLength}})]}:null},maxNumberValidator=exports.maxNumberValidator=function(value,maxValue){return value&&value>maxValue?{maxNumber:[_react2.default.createElement(_reactIntl.FormattedMessage,{key:"syncValidationMaxNumber",id:"client.component.form.syncValidationMaxNumber",values:{maxValue:maxValue}})]}:null},postPointValidator=exports.postPointValidator=function(value,limit){if(null!=value&&value.toString().includes(".")){var decimalNumber=parseFloat(value.toString().split(".")[1]);if(decimalNumber&&decimalNumber.toString().length>limit)return{postPoint:[_react2.default.createElement(_reactIntl.FormattedMessage,{key:"syncValidationPostPoint",id:"client.component.form.syncValidationPostPoint",values:{limit:limit}})]}}return null};exports.default={mandatory:mandatoryValidator,minLength:minLengthValidator,maxLength:maxLengthValidator,maxNumber:maxNumberValidator,postPoint:postPointValidator}},2445:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asyncValidators=exports.syncValidators=exports.phoneValidator=exports.urlValidator=void 0;var _react2=_interopRequireDefault(__webpack_require__(0)),_reactIntl=__webpack_require__(32),_isURL2=_interopRequireDefault(__webpack_require__(2446));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var fn,_ref,urlValidator=exports.urlValidator=function(value){return(0,_isURL2.default)(value)?null:{format:[_react2.default.createElement(_reactIntl.FormattedMessage,{key:"invalidUrl",id:"client.component.form.invalidUrl"})]}},phoneValidator=exports.phoneValidator=(fn=regeneratorRuntime.mark(function _callee(value){var libphone,isValidCustomRegex,isValidPhoneNumber,fieldModel=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,__webpack_require__.e(9).then(__webpack_require__.t.bind(null,912,7));case 2:if(libphone=_context.sent,isValidCustomRegex=fieldModel.customPhoneRegex&&value.match(fieldModel.customPhoneRegex),isValidPhoneNumber=libphone.isValidNumber(value,fieldModel.defaultCountry||"CH"),!isValidCustomRegex&&!isValidPhoneNumber){_context.next=7;break}return _context.abrupt("return",null);case 7:return _context.abrupt("return",{format:[_react2.default.createElement(_reactIntl.FormattedMessage,{key:"invalidPhoneNumber",id:"client.component.form.invalidPhoneNumber"})]});case 8:case"end":return _context.stop()}},_callee,void 0)}),_ref=function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){return function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}("next")})},function(_x){return _ref.apply(this,arguments)});exports.syncValidators={url:urlValidator},exports.asyncValidators={phone:phoneValidator}},2449:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Object.freeze({CREATE:"create",UPDATE:"update"})},2450:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uploadDocument=uploadDocument;var _actions2=_interopRequireDefault(__webpack_require__(2201)),_errorLogging2=_interopRequireDefault(__webpack_require__(264)),_utils=__webpack_require__(2451),_effects=__webpack_require__(44);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _marked=regeneratorRuntime.mark(uploadDocument),FORM_ID="simpleForm";function uploadDocument(_ref){var file,field,uploadResponse,documentFormValue,payload=_ref.payload;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return file=payload.file,field=payload.field,_context.prev=1,_context.next=4,(0,_effects.call)(_utils.uploadRequest,file);case 4:if(!(uploadResponse=_context.sent).success){_context.next=13;break}return _context.next=8,(0,_effects.call)(_utils.documentToFormValueTransformer,uploadResponse,file);case 8:return documentFormValue=_context.sent,_context.next=11,(0,_effects.put)(_actions2.default.change(FORM_ID,field,documentFormValue));case 11:_context.next=14;break;case 13:throw new Error("upload not successful: "+JSON.stringify(uploadResponse));case 14:_context.next=22;break;case 16:return _context.prev=16,_context.t0=_context.catch(1),_context.next=20,(0,_effects.put)(_actions2.default.change(FORM_ID,field,{id:null,timestamp:Date.now()}));case 20:return _context.next=22,(0,_effects.put)(_errorLogging2.default.logError("client.component.form.uploadFailedTitle","client.component.form.uploadFailedMessage",_context.t0));case 22:case"end":return _context.stop()}},_marked,this,[[1,16]])}},2451:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.documentToFormValueTransformer=exports.uploadRequest=void 0;var obj,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_pick2=__webpack_require__(905),_pick3=(obj=_pick2)&&obj.__esModule?obj:{default:obj};exports.uploadRequest=function(file){var data=new FormData;return data.append("file",file),fetch("/nice2/upload",{method:"POST",credentials:"include",body:data}).then(function(response){return response.json()})},exports.documentToFormValueTransformer=function(uploadResponse,file){var responseAttributes=(0,_pick3.default)(uploadResponse,["id","fileName"]),mimeType=uploadResponse.contentType;return _extends({},responseAttributes,{mimeType:mimeType,binaryLink:file.preview,thumbnailLink:mimeType.startsWith("image")?file.preview:null,preview:!0})}},2452:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_reactRedux=__webpack_require__(110),_redux=__webpack_require__(169),_form2=_interopRequireDefault(__webpack_require__(2176)),_formData2=_interopRequireDefault(__webpack_require__(2191)),_reactIntl=__webpack_require__(32),_Form2=_interopRequireDefault(__webpack_require__(2453)),_actions=__webpack_require__(2298),_actions2=__webpack_require__(2299);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=(0,_reactRedux.connect)(function(state,props){return{noButtons:state.input.noButtons,title:state.input.title,description:state.input.description,submitText:state.input.submitText,cancelText:state.input.cancelText,model:state.input.model,formDefinition:state.input.form,validate:_form2.default.syncValidation(state.input.model),relationEntities:_formData2.default.relationEntitiesSelector(state),tooltips:_formData2.default.tooltipSelector(state),listApp:state.input.listApp}},function(dispatch,props){return _extends({},(0,_redux.bindActionCreators)({initializeForm:_actions.initializeForm,onSubmit:_actions.submit,onCancel:_actions.cancel,loadRelationEntities:_formData2.default.loadRelationEntities,loadTooltip:_formData2.default.loadTooltip,uploadDocument:_actions2.uploadDocument},dispatch),{openAdvancedSearch:function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return dispatch(_formData2.default.openAdvancedSearch.apply(_formData2.default,[props.listApp,_actions.advancedSearchUpdate].concat(args)))}})})((0,_reactIntl.injectIntl)(_Form2.default))},2453:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_Form=__webpack_require__(2454),_Form2=(obj=_Form)&&obj.__esModule?obj:{default:obj};exports.default=_Form2.default},2454:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react2=_interopRequireDefault(__webpack_require__(0)),_propTypes2=_interopRequireDefault(__webpack_require__(7)),_form2=_interopRequireDefault(__webpack_require__(2176)),_formField2=_interopRequireDefault(__webpack_require__(2202)),_toccoUi=__webpack_require__(73),_reduxForm2=_interopRequireDefault(__webpack_require__(2219)),_reactIntl=__webpack_require__(32);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Form=function(_React$Component){function Form(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Form);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Form.__proto__||Object.getPrototypeOf(Form)).call(this,props));return _initialiseProps.call(_this),_this.formBuilder=_this.createFormBuilder(props),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Form,_react2.default.Component),_createClass(Form,[{key:"componentWillMount",value:function(){this.props.initializeForm()}},{key:"componentWillReceiveProps",value:function(props){this.formBuilder=this.createFormBuilder(props)}}]),Form}(),_initialiseProps=function(){var _this2=this;this.msg=function(id){return _this2.props.intl.formatMessage({id:id})},this.createFormBuilder=function(props){var formFieldUtils={relationEntities:props.relationEntities,loadRelationEntities:props.loadRelationEntities,loadRemoteEntity:props.loadRemoteEntity,remoteEntities:props.remoteEntities,loadSearchFilters:props.loadSearchFilters,searchFilters:props.searchFilters,uploadDocument:props.uploadDocument,intl:_this2.props.intl,openAdvancedSearch:props.openAdvancedSearch,loadTooltip:props.loadTooltip,tooltips:props.tooltips};return _form2.default.initFormBuilder(void 0,props.model,"simpleForm",props.formDefinition,props.formValues,formFieldUtils,_formField2.default.defaultMapping,{},_this2.shouldRenderField,"simple")},this.handleCancel=function(){_this2.props.onCancel()},this.sleep=function(ms){return new Promise(function(resolve){return setTimeout(resolve,ms)})},this.handleSubmit=function(values){return _this2.sleep(400).then(function(){_this2.props.onSubmit()})},this.render=function(){return _react2.default.createElement("form",{onSubmit:_this2.props.handleSubmit(_this2.handleSubmit),className:"form form-horizontal"},_this2.formBuilder(),!_this2.props.noButtons&&_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement(_toccoUi.Button,{disabled:_this2.props.submitting,ink:"primary",label:_this2.props.submitText||_this2.msg("client.simple-form.defaultOk"),pending:_this2.props.submitting,type:"submit"}),_react2.default.createElement(_toccoUi.Button,{disabled:_this2.props.submitting,label:_this2.props.cancelText||_this2.msg("client.simple-form.defaultCancel"),onClick:_this2.handleCancel})))}};Form.propTypes={intl:_reactIntl.intlShape.isRequired,initializeForm:_propTypes2.default.func.isRequired,uploadDocument:_propTypes2.default.func.isRequired,handleSubmit:_propTypes2.default.func.isRequired,onSubmit:_propTypes2.default.func.isRequired,onCancel:_propTypes2.default.func.isRequired,formDefinition:_propTypes2.default.object.isRequired,model:_propTypes2.default.object.isRequired,submitting:_propTypes2.default.bool.isRequired,cancelText:_propTypes2.default.string,submitText:_propTypes2.default.string,noButtons:_propTypes2.default.bool,openAdvancedSearch:_propTypes2.default.func.isRequired,tooltips:_propTypes2.default.objectOf(_propTypes2.default.objectOf(_propTypes2.default.string)),loadTooltip:_propTypes2.default.func.isRequired},exports.default=(0,_reduxForm2.default)({form:"simpleForm",destroyOnUnmount:!1})(Form),Form.__docgenInfo={description:"",methods:[{name:"msg",docblock:null,modifiers:[],params:[{name:"id",type:null}],returns:null},{name:"createFormBuilder",docblock:null,modifiers:[],params:[{name:"props",type:null}],returns:null},{name:"handleCancel",docblock:null,modifiers:[],params:[],returns:null},{name:"sleep",docblock:null,modifiers:[],params:[{name:"ms",type:null}],returns:null},{name:"handleSubmit",docblock:null,modifiers:[],params:[{name:"values",type:null}],returns:null},{name:"render",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Form",props:{intl:{type:{name:"custom",raw:"intlShape.isRequired"},required:!1,description:""},initializeForm:{type:{name:"func"},required:!0,description:""},uploadDocument:{type:{name:"func"},required:!0,description:""},handleSubmit:{type:{name:"func"},required:!0,description:""},onSubmit:{type:{name:"func"},required:!0,description:""},onCancel:{type:{name:"func"},required:!0,description:""},formDefinition:{type:{name:"object"},required:!0,description:""},model:{type:{name:"object"},required:!0,description:""},submitting:{type:{name:"bool"},required:!0,description:""},cancelText:{type:{name:"string"},required:!1,description:""},submitText:{type:{name:"string"},required:!1,description:""},noButtons:{type:{name:"bool"},required:!1,description:""},openAdvancedSearch:{type:{name:"func"},required:!0,description:""},tooltips:{type:{name:"objectOf",value:{name:"objectOf",value:{name:"string"}}},required:!1,description:""},loadTooltip:{type:{name:"func"},required:!0,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/simple-form/src/components/Form/Form.js"]={name:"Form",docgenInfo:Form.__docgenInfo,path:"packages/simple-form/src/components/Form/Form.js"})},2458:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sagas=void 0;var _reducer2=_interopRequireDefault(__webpack_require__(2221)),_entityList=__webpack_require__(2459),_entityList2=_interopRequireDefault(_entityList),_list=__webpack_require__(2462),_list2=_interopRequireDefault(_list),_searchForm=__webpack_require__(2469),_searchForm2=_interopRequireDefault(_searchForm);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default={entityList:_entityList2.default,list:_list2.default,searchForm:_searchForm2.default,form:_reducer2.default};exports.sagas=[_entityList.sagas,_list.sagas,_searchForm.sagas]},2459:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sagas=void 0;var _reducer2=_interopRequireDefault(__webpack_require__(2460)),_sagas2=_interopRequireDefault(__webpack_require__(2461));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.sagas=_sagas2.default,exports.default=_reducer2.default},2460:function(module,exports,__webpack_require__){"use strict";var _ACTION_HANDLERS;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:initialState,action=arguments[1],handler=ACTION_HANDLERS[action.type];return handler?handler(state,action):state};var obj,_reducer=__webpack_require__(111),_reducer2=(obj=_reducer)&&obj.__esModule?obj:{default:obj},actions=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(2203));function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ACTION_HANDLERS=(_defineProperty(_ACTION_HANDLERS={},actions.SET_INITIALIZED,_reducer2.default.singleTransferReducer("initialized")),_defineProperty(_ACTION_HANDLERS,actions.SET_ENTITY_NAME,_reducer2.default.singleTransferReducer("entityName")),_defineProperty(_ACTION_HANDLERS,actions.SET_ENTITY_MODEL,_reducer2.default.singleTransferReducer("entityModel")),_defineProperty(_ACTION_HANDLERS,actions.SET_SHOW_SEARCH_FORM,_reducer2.default.singleTransferReducer("showSearchForm")),_defineProperty(_ACTION_HANDLERS,actions.SET_SHOW_CREATE_BUTTON,_reducer2.default.singleTransferReducer("showCreateButton")),_defineProperty(_ACTION_HANDLERS,actions.SET_PARENT,_reducer2.default.singleTransferReducer("parent")),_ACTION_HANDLERS),initialState={initialized:!1,entityName:"",entityModel:{},showSearchForm:!1,showCreateButton:!1,parent:null}},2461:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.entityListSelector=void 0,exports.default=sagas,exports.loadEntityModel=loadEntityModel,exports.initialize=initialize;var obj,_isEmpty2=__webpack_require__(2216),_isEmpty3=(obj=_isEmpty2)&&obj.__esModule?obj:{default:obj},actions=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(2203)),_entities=__webpack_require__(2244),_effects=__webpack_require__(44);var _marked=regeneratorRuntime.mark(sagas),_marked2=regeneratorRuntime.mark(loadEntityModel),_marked3=regeneratorRuntime.mark(initialize),entityListSelector=exports.entityListSelector=function(state){return state.entityList};function sagas(){return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_effects.all)([(0,_effects.fork)(_effects.takeLatest,actions.INITIALIZE,initialize)]);case 2:case"end":return _context.stop()}},_marked,this)}function loadEntityModel(entityName,entityModel){var loadedModel;return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!(0,_isEmpty3.default)(entityModel)){_context2.next=6;break}return _context2.next=3,(0,_effects.call)(_entities.fetchModel,entityName);case 3:return loadedModel=_context2.sent,_context2.next=6,(0,_effects.put)(actions.setEntityModel(loadedModel));case 6:case"end":return _context2.stop()}},_marked2,this)}function initialize(){var _ref,entityModel,entityName;return regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,(0,_effects.select)(entityListSelector);case 2:if(_ref=_context3.sent,entityModel=_ref.entityModel,entityName=_ref.entityName,_ref.initialized){_context3.next=11;break}return _context3.next=9,(0,_effects.call)(loadEntityModel,entityName,entityModel);case 9:return _context3.next=11,(0,_effects.put)(actions.setInitialized());case 11:case"end":return _context3.stop()}},_marked3,this)}},2462:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sagas=void 0;var _reducer2=_interopRequireDefault(__webpack_require__(2463)),_sagas2=_interopRequireDefault(__webpack_require__(2464));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.sagas=_sagas2.default,exports.default=_reducer2.default},2463:function(module,exports,__webpack_require__){"use strict";var _ACTION_HANDLERS;Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=function(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:initialState,action=arguments[1],handler=ACTION_HANDLERS[action.type];return handler?handler(state,action):state};var _reducer2=_interopRequireDefault(__webpack_require__(111)),_uniq3=_interopRequireDefault(__webpack_require__(2245)),actions=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(2204));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var comparator=function(a,b){return a-b},ACTION_HANDLERS=(_defineProperty(_ACTION_HANDLERS={},actions.SET_INITIALIZED,_reducer2.default.singleTransferReducer("initialized")),_defineProperty(_ACTION_HANDLERS,actions.SET_ENTITIES,_reducer2.default.singleTransferReducer("entities")),_defineProperty(_ACTION_HANDLERS,actions.SET_FORM_DEFINITION,_reducer2.default.singleTransferReducer("formDefinition")),_defineProperty(_ACTION_HANDLERS,actions.SET_ENTITY_MODEL,_reducer2.default.singleTransferReducer("entityModel")),_defineProperty(_ACTION_HANDLERS,actions.SET_LIMIT,_reducer2.default.singleTransferReducer("limit")),_defineProperty(_ACTION_HANDLERS,actions.SET_CURRENT_PAGE,_reducer2.default.singleTransferReducer("currentPage")),_defineProperty(_ACTION_HANDLERS,actions.SET_SORTING,_reducer2.default.singleTransferReducer("sorting")),_defineProperty(_ACTION_HANDLERS,actions.SET_ENTITY_COUNT,_reducer2.default.singleTransferReducer("entityCount")),_defineProperty(_ACTION_HANDLERS,actions.ADD_ENTITIES_TO_STORE,function(state,_ref){var payload=_ref.payload;return _extends({},state,{entityStore:_extends({},state.entityStore,_defineProperty({},payload.page,payload.entities))})}),_defineProperty(_ACTION_HANDLERS,actions.CLEAR_ENTITY_STORE,function(state){return _extends({},state,{entityStore:{}})}),_defineProperty(_ACTION_HANDLERS,actions.SET_IN_PROGRESS,_reducer2.default.singleTransferReducer("inProgress")),_defineProperty(_ACTION_HANDLERS,actions.SET_SHOW_SEARCH_FORM,_reducer2.default.singleTransferReducer("showSearchForm")),_defineProperty(_ACTION_HANDLERS,actions.SET_SEARCH_FILTERS,_reducer2.default.singleTransferReducer("searchFilters")),_defineProperty(_ACTION_HANDLERS,actions.SET_CREATE_PERMISSION,_reducer2.default.singleTransferReducer("createPermission")),_defineProperty(_ACTION_HANDLERS,actions.SET_SELECTABLE,_reducer2.default.singleTransferReducer("selectable")),_defineProperty(_ACTION_HANDLERS,actions.SET_ENDPOINT,_reducer2.default.singleTransferReducer("endpoint")),_defineProperty(_ACTION_HANDLERS,actions.SET_SELECTION,function(state,_ref2){var payload=_ref2.payload;return _extends({},state,{selection:(0,_uniq3.default)(payload.selection).sort(comparator)})}),_ACTION_HANDLERS),initialState={initialized:!1,entityModel:{},entities:[],limit:10,currentPage:1,sorting:null,formDefinition:null,entityCount:0,entityStore:{},inProgress:!1,showSearchForm:!0,searchFilters:[],createPermission:!1,selectable:!1,selection:[]}},2464:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.searchFormSelector=exports.listSelector=exports.entityListSelector=exports.inputSelector=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=sagas,exports.initialize=initialize,exports.loadData=loadData,exports.getBasicQuery=getBasicQuery,exports.prepareEndpointUrl=prepareEndpointUrl,exports.countEntities=countEntities,exports.changePage=changePage,exports.setSorting=setSorting,exports.getSearchFilter=getSearchFilter,exports.fetchEntitiesAndAddToStore=fetchEntitiesAndAddToStore,exports.requestEntities=requestEntities,exports.displayEntity=displayEntity,exports.loadFormDefinition=loadFormDefinition,exports.loadEntityModel=loadEntityModel,exports.onRowClick=onRowClick,exports.navigateToCreate=navigateToCreate,exports.onSelectChange=onSelectChange,exports.actionInvoked=actionInvoked;var _isEmpty3=_interopRequireDefault(__webpack_require__(2216)),_union3=_interopRequireDefault(__webpack_require__(920)),_externalEvents2=_interopRequireDefault(__webpack_require__(899)),_actions2=_interopRequireDefault(__webpack_require__(2185)),_actionEmitter2=_interopRequireDefault(__webpack_require__(263)),_rest2=_interopRequireDefault(__webpack_require__(897)),_omit3=_interopRequireDefault(__webpack_require__(2229)),_fetchOptions=__webpack_require__(2465),actions=_interopRequireWildcard(__webpack_require__(2204)),searchFormActions=_interopRequireWildcard(__webpack_require__(2189)),_sagas=__webpack_require__(2300),_forms=__webpack_require__(2246),_entities=__webpack_require__(2244),_selection=__webpack_require__(2468),_selectionStyles2=_interopRequireDefault(__webpack_require__(2247)),_effects=__webpack_require__(44);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _marked=regeneratorRuntime.mark(sagas),_marked2=regeneratorRuntime.mark(initialize),_marked3=regeneratorRuntime.mark(loadData),_marked4=regeneratorRuntime.mark(getBasicQuery),_marked5=regeneratorRuntime.mark(prepareEndpointUrl),_marked6=regeneratorRuntime.mark(countEntities),_marked7=regeneratorRuntime.mark(changePage),_marked8=regeneratorRuntime.mark(setSorting),_marked9=regeneratorRuntime.mark(getSearchFilter),_marked10=regeneratorRuntime.mark(fetchEntitiesAndAddToStore),_marked11=regeneratorRuntime.mark(requestEntities),_marked12=regeneratorRuntime.mark(displayEntity),_marked13=regeneratorRuntime.mark(loadFormDefinition),_marked14=regeneratorRuntime.mark(loadEntityModel),_marked15=regeneratorRuntime.mark(onRowClick),_marked16=regeneratorRuntime.mark(navigateToCreate),_marked17=regeneratorRuntime.mark(onSelectChange),_marked18=regeneratorRuntime.mark(actionInvoked),inputSelector=exports.inputSelector=function(state){return state.input},entityListSelector=exports.entityListSelector=function(state){return state.entityList},listSelector=exports.listSelector=function(state){return state.list},searchFormSelector=exports.searchFormSelector=function(state){return state.searchForm};function sagas(){return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_effects.all)([(0,_effects.fork)(_effects.takeLatest,actions.INITIALIZE,initialize),(0,_effects.fork)(_effects.takeLatest,actions.CHANGE_PAGE,changePage),(0,_effects.fork)(_effects.takeLatest,searchFormActions.EXECUTE_SEARCH,loadData,1),(0,_effects.fork)(_effects.takeEvery,actions.SET_SORTING,setSorting),(0,_effects.fork)(_effects.takeEvery,actions.RESET_DATA_SET,loadData,1),(0,_effects.fork)(_effects.takeLatest,actions.REFRESH,loadData),(0,_effects.fork)(_effects.takeLatest,actions.ON_ROW_CLICK,onRowClick),(0,_effects.fork)(_effects.takeLatest,actions.ON_SELECT_CHANGE,onSelectChange),(0,_effects.fork)(_effects.takeEvery,_actions2.default.actions.ACTION_INVOKED,actionInvoked)]);case 2:case"end":return _context.stop()}},_marked,this)}function initialize(){var _ref,entityName,_ref2,formBase,listView,formDefinition,entityModel;return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,(0,_effects.put)(actions.setInProgress(!0));case 2:return _context2.next=4,(0,_effects.select)(entityListSelector);case 4:return _ref=_context2.sent,entityName=_ref.entityName,_context2.next=8,(0,_effects.select)(inputSelector);case 8:return _ref2=_context2.sent,formBase=_ref2.formBase,_context2.next=12,(0,_effects.select)(listSelector);case 12:if(listView=_context2.sent,formDefinition=listView.formDefinition,entityModel=listView.entityModel,listView.initialized){_context2.next=21;break}return _context2.next=17,(0,_effects.all)([(0,_effects.call)(loadEntityModel,entityName,entityModel),(0,_effects.call)(loadFormDefinition,formDefinition,formBase)]);case 17:return _context2.next=19,(0,_effects.call)(loadData,1);case 19:_context2.next=23;break;case 21:return _context2.next=23,(0,_effects.call)(loadData);case 23:return _context2.next=25,(0,_effects.put)(actions.setInProgress(!1));case 25:return _context2.next=27,(0,_effects.put)(actions.setInitialized());case 27:case"end":return _context2.stop()}},_marked2,this)}function loadData(page){var _ref3,currentPage;return regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,(0,_effects.put)(actions.setInProgress(!0));case 2:return _context3.next=4,(0,_effects.fork)(countEntities);case 4:return _context3.next=6,(0,_effects.put)(actions.clearEntityStore());case 6:if(!page){_context3.next=11;break}return _context3.next=9,(0,_effects.put)(actions.setCurrentPage(page));case 9:_context3.next=16;break;case 11:return _context3.next=13,(0,_effects.select)(listSelector);case 13:_ref3=_context3.sent,currentPage=_ref3.currentPage,page=currentPage;case 16:return _context3.next=18,(0,_effects.call)(requestEntities,page);case 18:return _context3.next=20,(0,_effects.put)(actions.setInProgress(!1));case 20:case"end":return _context3.stop()}},_marked3,this)}function getBasicQuery(){var _ref4,formBase,inputSearchFilters,_ref5,formFieldsFlat,form,searchFormValues,searchFormFetchOptions,filters;return regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,(0,_effects.select)(inputSelector);case 2:return _ref4=_context4.sent,formBase=_ref4.formBase,inputSearchFilters=_ref4.searchFilters,_context4.next=7,(0,_effects.select)(searchFormSelector);case 7:return _ref5=_context4.sent,formFieldsFlat=_ref5.formFieldsFlat,form=formBase+"_list",_context4.next=12,(0,_effects.call)(_sagas.getSearchFormValues);case 12:return searchFormValues=_context4.sent,_context4.next=15,(0,_effects.call)(_fetchOptions.getFetchOptionsFromSearchForm,searchFormValues,formFieldsFlat);case 15:return searchFormFetchOptions=_context4.sent,_context4.next=18,(0,_effects.call)(getSearchFilter,inputSearchFilters,searchFormFetchOptions.filters);case 18:return filters=_context4.sent,_context4.abrupt("return",_extends({},(0,_omit3.default)(searchFormFetchOptions,"filters"),{filters:filters,form:form}));case 20:case"end":return _context4.stop()}},_marked4,this)}function prepareEndpointUrl(endpoint){var _ref6,parent;return regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,(0,_effects.select)(inputSelector);case 2:return _ref6=_context5.sent,parent=_ref6.parent,_context5.abrupt("return",parent?endpoint.replace("{parentKey}",parent.key):endpoint);case 5:case"end":return _context5.stop()}},_marked5,this)}function countEntities(){var _ref7,entityName,_ref8,endpoint,query,preparedEndpoint,requestOptions,entityCount;return regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,(0,_effects.select)(inputSelector);case 2:return _ref7=_context6.sent,entityName=_ref7.entityName,_context6.next=6,(0,_effects.select)(listSelector);case 6:return _ref8=_context6.sent,endpoint=_ref8.endpoint,_context6.next=10,(0,_effects.call)(getBasicQuery);case 10:if(query=_context6.sent,!endpoint){_context6.next=17;break}return _context6.next=14,(0,_effects.call)(prepareEndpointUrl,endpoint);case 14:_context6.t0=_context6.sent,_context6.next=18;break;case 17:_context6.t0=endpoint;case 18:return preparedEndpoint=_context6.t0,requestOptions=_extends({method:endpoint?"GET":"POST"},preparedEndpoint?{endpoint:preparedEndpoint}:{}),_context6.next=22,(0,_effects.call)(_rest2.default.fetchEntityCount,entityName,query,requestOptions);case 22:return entityCount=_context6.sent,_context6.next=25,(0,_effects.put)(actions.setEntityCount(entityCount));case 25:case"end":return _context6.stop()}},_marked6,this)}function changePage(_ref9){var page,payload=_ref9.payload;return regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return page=payload.page,_context7.next=3,(0,_effects.put)(actions.setInProgress(!0));case 3:return _context7.next=5,(0,_effects.put)(actions.setCurrentPage(page));case 5:return _context7.next=7,(0,_effects.call)(requestEntities,page);case 7:return _context7.next=9,(0,_effects.put)(actions.setInProgress(!1));case 9:case"end":return _context7.stop()}},_marked7,this)}function setSorting(){var _ref10;return regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return _context8.next=2,(0,_effects.select)(listSelector);case 2:if(_ref10=_context8.sent,!_ref10.initialized){_context8.next=7;break}return _context8.next=7,(0,_effects.call)(loadData,1);case 7:case"end":return _context8.stop()}},_marked8,this)}function getSearchFilter(inputSearchFilters,searchInputsFilters){return regeneratorRuntime.wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return _context9.next=2,(0,_effects.call)(_union3.default,inputSearchFilters,searchInputsFilters);case 2:return _context9.abrupt("return",_context9.sent);case 3:case"end":return _context9.stop()}},_marked9,this)}function fetchEntitiesAndAddToStore(page){var _ref11,entityName,_ref12,entityStore,sorting,limit,formDefinition,endpoint,paths,basicQuery,query,preparedEndpoint,requestOptions,entities;return regeneratorRuntime.wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:return _context10.next=2,(0,_effects.select)(inputSelector);case 2:return _ref11=_context10.sent,entityName=_ref11.entityName,_context10.next=6,(0,_effects.select)(listSelector);case 6:if(_ref12=_context10.sent,entityStore=_ref12.entityStore,sorting=_ref12.sorting,limit=_ref12.limit,formDefinition=_ref12.formDefinition,endpoint=_ref12.endpoint,entityStore[page]){_context10.next=34;break}return _context10.next=15,(0,_effects.call)(_forms.getFields,formDefinition);case 15:return paths=_context10.sent,_context10.next=18,(0,_effects.call)(getBasicQuery);case 18:if(basicQuery=_context10.sent,query=_extends({},basicQuery,{page:page,sorting:sorting,limit:limit,paths:paths}),!endpoint){_context10.next=26;break}return _context10.next=23,(0,_effects.call)(prepareEndpointUrl,endpoint);case 23:_context10.t0=_context10.sent,_context10.next=27;break;case 26:_context10.t0=endpoint;case 27:return preparedEndpoint=_context10.t0,requestOptions=_extends({method:endpoint?"GET":"POST"},preparedEndpoint?{endpoint:preparedEndpoint}:{}),_context10.next=31,(0,_effects.call)(_rest2.default.fetchEntities,entityName,query,requestOptions,_entities.entitiesListTransformer);case 31:return entities=_context10.sent,_context10.next=34,(0,_effects.put)(actions.addEntitiesToStore(page,entities));case 34:case"end":return _context10.stop()}},_marked10,this)}function requestEntities(page){var list;return regeneratorRuntime.wrap(function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:return _context11.next=2,(0,_effects.select)(listSelector);case 2:if(list=_context11.sent,list.entityStore[page]){_context11.next=7;break}return _context11.next=7,(0,_effects.call)(fetchEntitiesAndAddToStore,page);case 7:return _context11.next=9,(0,_effects.call)(displayEntity,page);case 9:return _context11.next=11,(0,_effects.spawn)(fetchEntitiesAndAddToStore,page+1);case 11:case"end":return _context11.stop()}},_marked11,this)}function displayEntity(page){var list,entities;return regeneratorRuntime.wrap(function(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:return _context12.next=2,(0,_effects.select)(listSelector);case 2:return list=_context12.sent,entities=list.entityStore[page],_context12.next=6,(0,_effects.put)(actions.setEntities(entities));case 6:case"end":return _context12.stop()}},_marked12,this)}function loadFormDefinition(formDefinition,formBase){var _formDefinition,sorting,selectable,endpoint;return regeneratorRuntime.wrap(function(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:if(null!==formDefinition){_context13.next=21;break}return _context13.next=3,(0,_effects.call)(_forms.fetchForm,formBase+"_list");case 3:return _formDefinition=_context13.sent,_context13.next=6,(0,_effects.put)(actions.setFormDefinition(_formDefinition));case 6:return _context13.next=8,(0,_effects.call)(_forms.getSorting,_formDefinition);case 8:return sorting=_context13.sent,_context13.next=11,(0,_effects.put)(actions.setSorting(sorting));case 11:return _context13.next=13,(0,_effects.call)(_forms.getSelectable,_formDefinition);case 13:return selectable=_context13.sent,_context13.next=16,(0,_effects.put)(actions.setSelectable(selectable));case 16:return _context13.next=18,(0,_effects.call)(_forms.getEndpoint,_formDefinition);case 18:return endpoint=_context13.sent,_context13.next=21,(0,_effects.put)(actions.setEndpoint(endpoint));case 21:case"end":return _context13.stop()}},_marked13,this)}function loadEntityModel(entityName,entityModel){var _ref13,model,createPermission;return regeneratorRuntime.wrap(function(_context14){for(;;)switch(_context14.prev=_context14.next){case 0:if(!(0,_isEmpty3.default)(entityModel)){_context14.next=10;break}return _context14.next=3,(0,_effects.call)(_entities.fetchModel,entityName);case 3:return _ref13=_context14.sent,model=_ref13.model,createPermission=_ref13.createPermission,_context14.next=8,(0,_effects.put)(actions.setEntityModel(model));case 8:return _context14.next=10,(0,_effects.put)(actions.setCreatePermission(createPermission));case 10:case"end":return _context14.stop()}},_marked14,this)}function onRowClick(_ref14){var _ref15,list,selected,payload=_ref14.payload;return regeneratorRuntime.wrap(function(_context15){for(;;)switch(_context15.prev=_context15.next){case 0:return _context15.next=2,(0,_effects.select)(inputSelector);case 2:if(_ref15=_context15.sent,!0!==_ref15.selectOnRowClick){_context15.next=11;break}return _context15.next=7,(0,_effects.select)(listSelector);case 7:return list=_context15.sent,selected=list.selection.includes(payload.id),_context15.next=11,(0,_effects.put)(actions.onSelectChange([payload.id],!selected));case 11:return _context15.next=13,(0,_effects.put)(_externalEvents2.default.fireExternalEvent("onRowClick",{id:payload.id}));case 13:case"end":return _context15.stop()}},_marked15,this)}function navigateToCreate(){return regeneratorRuntime.wrap(function(_context16){for(;;)switch(_context16.prev=_context16.next){case 0:return _context16.next=2,(0,_effects.put)(_externalEvents2.default.fireExternalEvent("onNavigateToCreate"));case 2:case"end":return _context16.stop()}},_marked16,this)}function onSelectChange(_ref16){var _ref17,currentSelection,_ref18,newSelection,_ref16$payload=_ref16.payload,keys=_ref16$payload.keys,isSelected=_ref16$payload.isSelected;return regeneratorRuntime.wrap(function(_context17){for(;;)switch(_context17.prev=_context17.next){case 0:return _context17.next=2,(0,_effects.select)(listSelector);case 2:return _ref17=_context17.sent,currentSelection=_ref17.selection,_context17.next=6,(0,_effects.select)(inputSelector);case 6:if(_ref18=_context17.sent,_ref18.selectionStyle!==_selectionStyles2.default.SINGLE){_context17.next=12;break}_context17.t0=keys,_context17.next=15;break;case 12:return _context17.next=14,(0,_effects.call)(_selection.combineSelection,currentSelection,keys,isSelected);case 14:_context17.t0=_context17.sent;case 15:return newSelection=_context17.t0,_context17.next=18,(0,_effects.put)(actions.setSelection(newSelection));case 18:return _context17.next=20,(0,_effects.put)(_externalEvents2.default.fireExternalEvent("onSelectChange",newSelection));case 20:case"end":return _context17.stop()}},_marked17,this)}function actionInvoked(action){return regeneratorRuntime.wrap(function(_context18){for(;;)switch(_context18.prev=_context18.next){case 0:return _context18.next=2,(0,_effects.call)(loadData);case 2:return _context18.next=4,(0,_effects.put)(_actionEmitter2.default.emitAction(action));case 4:case"end":return _context18.stop()}},_marked18,this)}},2465:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFetchOptionsFromSearchForm=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_reduce3=_interopRequireDefault(__webpack_require__(901)),_isObject3=_interopRequireDefault(__webpack_require__(84));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var transformSearchValue=function(value,key,formFields){if(null==value)return{};var fieldType=formFields[key];if(fieldType){if("multi-select-box"===fieldType||"multi-remote-field"===fieldType)return _defineProperty({},key+".pk",(value=Array.isArray(value)?value:[value]).map(function(v){return{value:v.key}}));if("single-select-box"===fieldType||"single-remote-field"===fieldType)return _defineProperty({},key+".pk",{value:value.key})}else{var objectBased=function(value,key){return Array.isArray(value)?_defineProperty({},key+".pk",value.map(function(v){return{value:v.key}})):(0,_isObject3.default)(value)?_defineProperty({},key+".pk",{value:value.key}):null}(value,key);if(objectBased)return objectBased}return _defineProperty({},key,{value:value})};exports.getFetchOptionsFromSearchForm=function(searchFormValues){var formFields=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_reduce3.default)(searchFormValues,function(result,value,key){var v,addition={};return"searchFilter"===key?addition.filters=(v=value,Array.isArray(v)?v.map(function(e){return e.uniqueId}):[v.uniqueId]):"txtFulltext"===key?addition.search=value:addition.conditions=_extends({},result.conditions,transformSearchValue(value,key,formFields)),_extends({},result,addition)},{})}},2466:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDisplay=exports.NOT_FOUND_DISPLAY=void 0,exports.getPreselectedValues=getPreselectedValues;var _get3=_interopRequireDefault(__webpack_require__(898)),_join3=_interopRequireDefault(__webpack_require__(2278)),_rest2=_interopRequireDefault(__webpack_require__(897)),_effects=__webpack_require__(44);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _marked=regeneratorRuntime.mark(getPreselectedValues);function getPreselectedValues(preselectedSearchFields,entityModel,loadRelationEntity,searchFormVisible){var formValues,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,preselectedSearchField,fieldName,value,transformedValue,targetEntity,query;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:formValues={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0,_context.prev=4,_iterator=preselectedSearchFields[Symbol.iterator]();case 6:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context.next=25;break}if(preselectedSearchField=_step.value,fieldName=preselectedSearchField.id,value=preselectedSearchField.value,transformedValue=value,!entityModel[fieldName]||"relation"!==entityModel[fieldName].type){_context.next=21;break}if(preselectedSearchField.hidden||!searchFormVisible){_context.next=20;break}return targetEntity=entityModel[fieldName].targetEntity,query={fields:["pk"],tql:"IN(pk,"+(0,_join3.default)(value,",")+")"},_context.next=17,(0,_effects.call)(_rest2.default.fetchEntities,targetEntity,query);case 17:transformedValue=_context.sent,_context.next=21;break;case 20:transformedValue=Array.isArray(value)?value.map(function(v){return{key:v}}):{key:value};case 21:formValues[fieldName]=transformedValue;case 22:_iteratorNormalCompletion=!0,_context.next=6;break;case 25:_context.next=31;break;case 27:_context.prev=27,_context.t0=_context.catch(4),_didIteratorError=!0,_iteratorError=_context.t0;case 31:_context.prev=31,_context.prev=32,!_iteratorNormalCompletion&&_iterator.return&&_iterator.return();case 34:if(_context.prev=34,!_didIteratorError){_context.next=37;break}throw _iteratorError;case 37:return _context.finish(34);case 38:return _context.finish(31);case 39:return _context.abrupt("return",formValues);case 40:case"end":return _context.stop()}},_marked,this,[[4,27,31,39],[32,,34,38]])}var NOT_FOUND_DISPLAY=exports.NOT_FOUND_DISPLAY="??";exports.getDisplay=function(key,entities){return(0,_get3.default)(entities.find(function(e){return e.key===key}),"display",NOT_FOUND_DISPLAY)}},2467:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateSearchFields=void 0;var _react2=_interopRequireDefault(__webpack_require__(0)),_forOwn3=_interopRequireDefault(__webpack_require__(2215)),_reactIntl=__webpack_require__(32),_form2=_interopRequireDefault(__webpack_require__(2176));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.validateSearchFields=function(values,formDefinition){var errors={};return(0,_forOwn3.default)(values,function(value,fieldName){var fieldDefinition=fieldDefinitionCache.get(fieldName);if(fieldDefinition||(fieldDefinition=getFieldDefinition(_form2.default.transformFieldNameBack(fieldName),formDefinition),fieldDefinitionCache.add(fieldName,fieldDefinition)),fieldDefinition){var fieldErrors=validateField(value,fieldDefinition);fieldErrors&&(errors[fieldName]=fieldErrors)}}),errors};var definitionCache,validateField=function(value,definition){var type=definition.dataType,typeValidator=typeValidators[type];return typeValidator?typeValidator(value):null},fieldDefinitionCache=(definitionCache={},{add:function(name,definition){definitionCache[name]=definition},get:function(name){return definitionCache[name]}}),getFieldDefinition=function getFieldDefinition(fieldName,fieldDefinition){if(fieldDefinition.id===fieldName)return fieldDefinition.children[0];var result=null;return fieldDefinition.children&&fieldDefinition.children.forEach(function(child){var fieldDefinition=getFieldDefinition(fieldName,child);fieldDefinition&&(result=fieldDefinition)}),result},typeValidators={string:function(value){if(value.length>0&&value.length<2)return{minLength:[_react2.default.createElement(_reactIntl.FormattedMessage,{key:"minLength",id:"client.entity-list.searchFormValidationMinLength",values:{minLength:2}})]}},"fulltext-search":function(value){if(value.length>0&&value.length<2)return{minLength:[_react2.default.createElement(_reactIntl.FormattedMessage,{key:"minLength",id:"client.entity-list.searchFormValidationMinLength",values:{minLength:2}})]}}}},2468:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.combineSelection=void 0;var obj,_uniq2=__webpack_require__(2245),_uniq3=(obj=_uniq2)&&obj.__esModule?obj:{default:obj};var ascendingNumberComparator=function(a,b){return a-b};exports.combineSelection=function(currentSelection,keys,isSelected){var newSelection=currentSelection.slice(),_loop=function(key){isSelected?newSelection.push(key):newSelection=newSelection.filter(function(k){return k!==key})},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=keys[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_loop(_step.value)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return(0,_uniq3.default)(newSelection).sort(ascendingNumberComparator)}},2469:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sagas=void 0;var _reducer2=_interopRequireDefault(__webpack_require__(2470)),_sagas2=_interopRequireDefault(__webpack_require__(2300));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.sagas=_sagas2.default,exports.default=_reducer2.default},2470:function(module,exports,__webpack_require__){"use strict";var _ACTION_HANDLERS;Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=function(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:initialState,action=arguments[1],handler=ACTION_HANDLERS[action.type];return handler?handler(state,action):state};var obj,_reducer=__webpack_require__(111),_reducer2=(obj=_reducer)&&obj.__esModule?obj:{default:obj},actions=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(2189));function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ACTION_HANDLERS=(_defineProperty(_ACTION_HANDLERS={},actions.SET_INITIALIZED,_reducer2.default.singleTransferReducer("initialized")),_defineProperty(_ACTION_HANDLERS,actions.SET_SEARCH_FORM_NAME,_reducer2.default.singleTransferReducer("searchFormName")),_defineProperty(_ACTION_HANDLERS,actions.SET_SIMPLE_SEARCH_FIELDS,function(state,_ref){var payload=_ref.payload,fieldArray=payload.simpleSearchFields.split(",").filter(function(s){return s}).map(function(s){return s.trim()});return fieldArray.length>0?_extends({},state,{simpleSearchFields:fieldArray}):state}),_defineProperty(_ACTION_HANDLERS,actions.SET_FORM_DEFINITION,_reducer2.default.singleTransferReducer("formDefinition")),_defineProperty(_ACTION_HANDLERS,actions.SET_SHOW_EXTENDED_SEARCH_FORM,_reducer2.default.singleTransferReducer("showExtendedSearchForm")),_defineProperty(_ACTION_HANDLERS,actions.SET_DISABLE_SIMPLE_SEARCH,_reducer2.default.singleTransferReducer("disableSimpleSearch")),_defineProperty(_ACTION_HANDLERS,actions.SET_VALUES_INITIALIZED,_reducer2.default.singleTransferReducer("valuesInitialized")),_defineProperty(_ACTION_HANDLERS,actions.SET_SEARCH_FILTER,function(state,_ref2){var searchFilter=_ref2.payload.filter;return _extends({},state,{searchFilter:searchFilter})}),_defineProperty(_ACTION_HANDLERS,actions.SET_SHOW_FULL_TEXT_SEARCH_FORM,_reducer2.default.singleTransferReducer("showFullTextSearchForm")),_defineProperty(_ACTION_HANDLERS,actions.SET_FORM_FIELDS_FLAT,_reducer2.default.singleTransferReducer("formFieldsFlat")),_ACTION_HANDLERS),initialState={initialized:!1,searchFormName:"",formDefinition:{},showExtendedSearchForm:!1,simpleSearchFields:["txtFulltext"],disableSimpleSearch:!1,valuesInitialized:!1,showFullTextSearchForm:!1}},2471:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_reactRedux=__webpack_require__(110),_reactIntl=__webpack_require__(32),_EntityList=__webpack_require__(2472),_EntityList2=(obj=_EntityList)&&obj.__esModule?obj:{default:obj},_actions=__webpack_require__(2203),_actions2=__webpack_require__(2189);var mapActionCreators={initialize:_actions.initialize,initializeSearchForm:_actions2.initialize};exports.default=(0,_reactRedux.connect)(function(state,props){return{showSearchForm:state.input.showSearchForm,showFullTextSearchForm:state.searchForm.showFullTextSearchForm}},mapActionCreators)((0,_reactIntl.injectIntl)(_EntityList2.default))},2472:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_EntityList=__webpack_require__(2473),_EntityList2=(obj=_EntityList)&&obj.__esModule?obj:{default:obj};exports.default=_EntityList2.default},2473:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes2=_interopRequireDefault(__webpack_require__(2174)),_react2=_interopRequireDefault(__webpack_require__(0)),_SearchFormContainer2=_interopRequireDefault(__webpack_require__(2474)),_FullTextSearchFormContainer2=_interopRequireDefault(__webpack_require__(2477)),_ListViewContainer2=_interopRequireDefault(__webpack_require__(2480));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EntityList=function(_React$Component){function EntityList(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EntityList),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(EntityList.__proto__||Object.getPrototypeOf(EntityList)).apply(this,arguments))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(EntityList,_react2.default.Component),_createClass(EntityList,[{key:"componentWillMount",value:function(){this.props.initialize(),this.props.initializeSearchForm(this.props.showSearchForm)}},{key:"render",value:function(){return _react2.default.createElement("div",{className:"entity-list"},this.props.showSearchForm&&(this.props.showFullTextSearchForm?_react2.default.createElement(_FullTextSearchFormContainer2.default,null):_react2.default.createElement(_SearchFormContainer2.default,null)),_react2.default.createElement(_ListViewContainer2.default,null))}}]),EntityList}();EntityList.propTypes={initialize:_propTypes2.default.func.isRequired,initializeSearchForm:_propTypes2.default.func.isRequired,showSearchForm:_propTypes2.default.bool,showFullTextSearchForm:_propTypes2.default.bool},exports.default=EntityList,EntityList.__docgenInfo={description:"",methods:[],displayName:"EntityList",props:{initialize:{type:{name:"func"},required:!0,description:""},initializeSearchForm:{type:{name:"func"},required:!0,description:""},showSearchForm:{type:{name:"bool"},required:!1,description:""},showFullTextSearchForm:{type:{name:"bool"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/entity-list/src/components/EntityList/EntityList.js"]={name:"EntityList",docgenInfo:EntityList.__docgenInfo,path:"packages/entity-list/src/components/EntityList/EntityList.js"})},2474:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _reactRedux=__webpack_require__(110),_reactIntl=__webpack_require__(32),_formData2=_interopRequireDefault(__webpack_require__(2191)),_SearchForm2=_interopRequireDefault(__webpack_require__(2475)),_actions=__webpack_require__(2189);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mapActionCreators={submitSearchForm:_actions.submitSearchForm,loadSearchFilters:_actions.loadSearchFilters,resetSearch:_actions.resetSearch,setShowExtendedSearchForm:_actions.setShowExtendedSearchForm,loadRelationEntities:_formData2.default.loadRelationEntities,loadTooltip:_formData2.default.loadTooltip,openAdvancedSearch:function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _formData2.default.openAdvancedSearch.apply(_formData2.default,[__webpack_require__(2198).default,_actions.advancedSearchUpdate].concat(args))}};exports.default=(0,_reactRedux.connect)(function(state,props){return{searchFormDefinition:state.searchForm.formDefinition,entityModel:state.list.entityModel,relationEntities:_formData2.default.relationEntitiesSelector(state),tooltips:_formData2.default.tooltipSelector(state),searchInputs:state.searchForm.searchInputs,disableSimpleSearch:state.searchForm.disableSimpleSearch,simpleSearchFields:state.searchForm.simpleSearchFields,showExtendedSearchForm:state.searchForm.showExtendedSearchForm,preselectedSearchFields:state.input.preselectedSearchFields,searchFilters:state.searchForm.searchFilter}},mapActionCreators)((0,_reactIntl.injectIntl)(_SearchForm2.default))},2475:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_SearchForm=__webpack_require__(2476),_SearchForm2=(obj=_SearchForm)&&obj.__esModule?obj:{default:obj};exports.default=_SearchForm2.default},2476:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes2=_interopRequireDefault(__webpack_require__(2174)),_react2=_interopRequireDefault(__webpack_require__(0)),_reactIntl=__webpack_require__(32),_reduxForm2=_interopRequireDefault(__webpack_require__(2219)),_toccoUi=__webpack_require__(73),_form2=_interopRequireDefault(__webpack_require__(2176)),_formField2=_interopRequireDefault(__webpack_require__(2202));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SearchForm=function(_React$Component){function SearchForm(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SearchForm);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(SearchForm.__proto__||Object.getPrototypeOf(SearchForm)).call(this,props));return _initialiseProps.call(_this),_this.formBuilder=_this.createFormBuilder(props),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(SearchForm,_react2.default.Component),_createClass(SearchForm,[{key:"componentWillReceiveProps",value:function(props){this.formBuilder=this.createFormBuilder(props)}},{key:"render",value:function(){var props=this.props;return props.searchFormDefinition.children&&0!==Object.keys(props.entityModel).length?_react2.default.createElement("form",{onSubmit:this.handleSubmit,className:"form-horizontal"},this.formBuilder(),_react2.default.createElement("div",{className:"row",style:{marginBottom:"1em"}},_react2.default.createElement("div",{className:"col-sm-9 col-sm-push-3"},_react2.default.createElement(_toccoUi.Button,{ink:"primary",label:this.msg("client.entity-list.search"),look:"raised",type:"submit"}),_react2.default.createElement("span",{style:{display:"inline-block",width:".5em"}}),_react2.default.createElement(_toccoUi.Button,{label:this.msg("client.entity-list.reset"),look:"raised",onClick:this.handleResetClick}),!props.disableSimpleSearch&&_react2.default.createElement("span",{style:{float:"right"},title:this.msg("client.entity-list.extendedSearch")},_react2.default.createElement(_toccoUi.Button,{icon:"chevron-"+(this.props.showExtendedSearchForm?"up":"down"),iconPosition:"sole",onClick:this.toggleExtendedSearchForm}))))):null}}]),SearchForm}(),_initialiseProps=function(){var _this2=this;this.createFormBuilder=function(props){var formFieldUtils={relationEntities:props.relationEntities,loadRelationEntities:props.loadRelationEntities,loadRemoteEntity:props.loadRemoteEntity,remoteEntities:props.remoteEntities,loadTooltip:props.loadTooltip,tooltips:props.tooltips,loadSearchFilters:props.loadSearchFilters,searchFilters:props.searchFilters,intl:_this2.props.intl,openAdvancedSearch:props.openAdvancedSearch};return _form2.default.initFormBuilder(props.entity,props.entityModel,props.form,props.searchFormDefinition,props.formValues,formFieldUtils,_extends({},_formField2.default.defaultMapping,{"fulltext-search":_formField2.default.editableValueFactory("string")}),_formField2.default.defaultMapping,_this2.shouldRenderField,"search")},this.handleResetClick=function(){_this2.props.resetSearch()},this.handleSubmit=function(e){e.preventDefault(),e.stopPropagation(),_this2.props.submitSearchForm()},this.msg=function(id){return _this2.props.intl.formatMessage({id:id})},this.isHidden=function(name){if(!_this2.props.preselectedSearchFields)return!1;var field=_this2.props.preselectedSearchFields.find(function(f){return f.id===name});return field&&field.hidden},this.shouldRenderField=function(name){return!_this2.isHidden(name)&&(_this2.props.disableSimpleSearch||_this2.props.showExtendedSearchForm||_this2.props.simpleSearchFields.includes(name))},this.toggleExtendedSearchForm=function(){_this2.props.setShowExtendedSearchForm(!_this2.props.showExtendedSearchForm)}};SearchForm.propTypes={intl:_reactIntl.intlShape.isRequired,entityModel:_propTypes2.default.objectOf(_propTypes2.default.shape({type:_propTypes2.default.string.isRequired,targetEntity:_propTypes2.default.string})).isRequired,searchFormDefinition:_propTypes2.default.shape({children:_propTypes2.default.array}).isRequired,submitSearchForm:_propTypes2.default.func.isRequired,resetSearch:_propTypes2.default.func.isRequired,relationEntities:_propTypes2.default.shape({entityName:_propTypes2.default.shape({loaded:_propTypes2.default.bool,data:_propTypes2.default.arrayOf(_propTypes2.default.shape({value:_propTypes2.default.string,label:_propTypes2.default.string}))})}).isRequired,loadRelationEntities:_propTypes2.default.func.isRequired,tooltips:_propTypes2.default.objectOf(_propTypes2.default.objectOf(_propTypes2.default.string)),loadTooltip:_propTypes2.default.func.isRequired,loadSearchFilters:_propTypes2.default.func.isRequired,searchFilters:_propTypes2.default.arrayOf(_propTypes2.default.shape({key:_propTypes2.default.string,display:_propTypes2.default.string})),disableSimpleSearch:_propTypes2.default.bool,simpleSearchFields:_propTypes2.default.arrayOf(_propTypes2.default.string),showExtendedSearchForm:_propTypes2.default.bool,setShowExtendedSearchForm:_propTypes2.default.func.isRequired,preselectedSearchFields:_propTypes2.default.arrayOf(_propTypes2.default.shape({id:_propTypes2.default.string.isRequired,hidden:_propTypes2.default.bool}))},exports.default=(0,_reduxForm2.default)({form:"searchForm",destroyOnUnmount:!1})(SearchForm),SearchForm.__docgenInfo={description:"",methods:[{name:"createFormBuilder",docblock:null,modifiers:[],params:[{name:"props",type:null}],returns:null},{name:"handleResetClick",docblock:null,modifiers:[],params:[],returns:null},{name:"handleSubmit",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"msg",docblock:null,modifiers:[],params:[{name:"id",type:null}],returns:null},{name:"isHidden",docblock:null,modifiers:[],params:[{name:"name",type:null}],returns:null},{name:"shouldRenderField",docblock:null,modifiers:[],params:[{name:"name",type:null}],returns:null},{name:"toggleExtendedSearchForm",docblock:null,modifiers:[],params:[],returns:null}],displayName:"SearchForm",props:{intl:{type:{name:"custom",raw:"intlShape.isRequired"},required:!1,description:""},entityModel:{type:{name:"objectOf",value:{name:"shape",value:{type:{name:"string",required:!0},targetEntity:{name:"string",required:!1}}}},required:!0,description:""},searchFormDefinition:{type:{name:"shape",value:{children:{name:"array",required:!1}}},required:!0,description:""},submitSearchForm:{type:{name:"func"},required:!0,description:""},resetSearch:{type:{name:"func"},required:!0,description:""},relationEntities:{type:{name:"shape",value:{entityName:{name:"shape",value:{loaded:{name:"bool",required:!1},data:{name:"arrayOf",value:{name:"shape",value:{value:{name:"string",required:!1},label:{name:"string",required:!1}}},required:!1}},required:!1}}},required:!0,description:""},loadRelationEntities:{type:{name:"func"},required:!0,description:""},tooltips:{type:{name:"objectOf",value:{name:"objectOf",value:{name:"string"}}},required:!1,description:""},loadTooltip:{type:{name:"func"},required:!0,description:""},loadSearchFilters:{type:{name:"func"},required:!0,description:""},searchFilters:{type:{name:"arrayOf",value:{name:"shape",value:{key:{name:"string",required:!1},display:{name:"string",required:!1}}}},required:!1,description:""},disableSimpleSearch:{type:{name:"bool"},required:!1,description:""},simpleSearchFields:{type:{name:"arrayOf",value:{name:"string"}},required:!1,description:""},showExtendedSearchForm:{type:{name:"bool"},required:!1,description:""},setShowExtendedSearchForm:{type:{name:"func"},required:!0,description:""},preselectedSearchFields:{type:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!0},hidden:{name:"bool",required:!1}}}},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/entity-list/src/components/SearchForm/SearchForm.js"]={name:"SearchForm",docgenInfo:SearchForm.__docgenInfo,path:"packages/entity-list/src/components/SearchForm/SearchForm.js"})},2477:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_reactRedux=__webpack_require__(110),_reactIntl=__webpack_require__(32),_FullTextSearchForm=__webpack_require__(2478),_FullTextSearchForm2=(obj=_FullTextSearchForm)&&obj.__esModule?obj:{default:obj};var mapActionCreators={submitSearchForm:__webpack_require__(2189).submitSearchForm};exports.default=(0,_reactRedux.connect)(null,mapActionCreators)((0,_reactIntl.injectIntl)(_FullTextSearchForm2.default))},2478:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_FullTextSearchForm=__webpack_require__(2479),_FullTextSearchForm2=(obj=_FullTextSearchForm)&&obj.__esModule?obj:{default:obj};exports.default=_FullTextSearchForm2.default},2479:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes2=_interopRequireDefault(__webpack_require__(2174)),_react2=_interopRequireDefault(__webpack_require__(0)),_reactIntl=__webpack_require__(32),_reduxForm2=_interopRequireDefault(__webpack_require__(2219)),_Field2=_interopRequireDefault(__webpack_require__(2326)),_toccoUi=(_interopRequireDefault(__webpack_require__(2176)),__webpack_require__(73));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}var FullTextSearchForm=function(_React$Component){function FullTextSearchForm(){var _ref,_temp,_this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FullTextSearchForm);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=FullTextSearchForm.__proto__||Object.getPrototypeOf(FullTextSearchForm)).call.apply(_ref,[this].concat(args))),_this.handleSubmit=function(e){e.preventDefault(),e.stopPropagation(),_this.props.submitSearchForm()},_this.msg=function(id){return _this.props.intl.formatMessage({id:id})},_this.field=function(props){return _react2.default.createElement(_toccoUi.SearchBox,{value:props.input.value,liveSearch:!0,onSearch:function(value){return props.input.onChange(value)},placeholder:_this.msg("client.entity-list.fullTextPlaceholder")})},_possibleConstructorReturn(_this,_temp)}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(FullTextSearchForm,_react2.default.Component),_createClass(FullTextSearchForm,[{key:"render",value:function(){return _react2.default.createElement("form",{style:{padding:"10px"},onSubmit:this.handleSubmit,className:"form-horizontal"},_react2.default.createElement(_Field2.default,{name:"txtFulltext",component:this.field}))}}]),FullTextSearchForm}();FullTextSearchForm.propTypes={intl:_reactIntl.intlShape.isRequired,submitSearchForm:_propTypes2.default.func.isRequired},exports.default=(0,_reduxForm2.default)({form:"searchForm",destroyOnUnmount:!1})(FullTextSearchForm),FullTextSearchForm.__docgenInfo={description:"",methods:[{name:"handleSubmit",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"msg",docblock:null,modifiers:[],params:[{name:"id",type:null}],returns:null},{name:"field",docblock:null,modifiers:[],params:[{name:"props",type:null}],returns:null}],displayName:"FullTextSearchForm",props:{intl:{type:{name:"custom",raw:"intlShape.isRequired"},required:!1,description:""},submitSearchForm:{type:{name:"func"},required:!0,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/entity-list/src/components/FullTextSearchForm/FullTextSearchForm.js"]={name:"FullTextSearchForm",docgenInfo:FullTextSearchForm.__docgenInfo,path:"packages/entity-list/src/components/FullTextSearchForm/FullTextSearchForm.js"})},2480:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_reactRedux=__webpack_require__(110),_reactIntl=__webpack_require__(32),_ListView=__webpack_require__(2481),_ListView2=(obj=_ListView)&&obj.__esModule?obj:{default:obj};var mapActionCreators={initialize:__webpack_require__(2204).initialize};exports.default=(0,_reactRedux.connect)(function(state,props){return{formDefinition:state.list.formDefinition,selection:state.list.selection,currentPageIds:state.list.entities.map(function(e){return e.__key}),entityName:state.entityList.entityName,parent:state.entityList.parent}},mapActionCreators)((0,_reactIntl.injectIntl)(_ListView2.default))},2481:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_ListView=__webpack_require__(2482),_ListView2=(obj=_ListView)&&obj.__esModule?obj:{default:obj};exports.default=_ListView2.default},2482:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes2=_interopRequireDefault(__webpack_require__(2174)),_react2=_interopRequireDefault(__webpack_require__(0)),_reactIntl=__webpack_require__(32),_actions2=_interopRequireDefault(__webpack_require__(2185)),_form2=_interopRequireDefault(__webpack_require__(2176)),_toccoUi=__webpack_require__(73),_forms=__webpack_require__(2246),_TableContainer2=_interopRequireDefault(__webpack_require__(2483));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}var ListView=function(_React$Component){function ListView(){var _ref,_temp,_this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ListView);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=ListView.__proto__||Object.getPrototypeOf(ListView)).call.apply(_ref,[this].concat(args))),_this.componentWillMount=function(){_this.props.initialize()},_this.msg=function(id){var values=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _this.props.intl.formatMessage({id:id},values)},_possibleConstructorReturn(_this,_temp)}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ListView,_react2.default.Component),_createClass(ListView,[{key:"render",value:function(){var _this2=this,props=this.props,selectedRecordsCurrentPage=this.props.currentPageIds.filter(function(id){return _this2.props.selection.includes(id)});return _react2.default.createElement("div",{className:"list-view"},_react2.default.createElement(_toccoUi.LoadMask,{required:[props.formDefinition],loadingText:this.msg("client.entity-list.loadingText")},this.props.formDefinition&&this.props.formDefinition.children.map(function(child,idx){return child.componentType===_form2.default.componentTypes.TABLE?_react2.default.createElement(_TableContainer2.default,{key:idx,columnDefinitions:(0,_forms.getColumnDefinition)(child)}):_actions2.default.isAction(child.componentType)?_react2.default.createElement(_actions2.default.Action,{key:"listAction"+idx,definition:child,ids:selectedRecordsCurrentPage,entity:props.entityName,parent:props.parent}):void 0})))}}]),ListView}();ListView.propTypes={intl:_reactIntl.intlShape.isRequired,initialize:_propTypes2.default.func.isRequired,formDefinition:_propTypes2.default.shape({children:_propTypes2.default.array}),selection:_propTypes2.default.arrayOf(_propTypes2.default.string),currentPageIds:_propTypes2.default.arrayOf(_propTypes2.default.string),parent:_propTypes2.default.shape({key:_propTypes2.default.string.isRequired,model:_propTypes2.default.string.isRequired,reverseRelationName:_propTypes2.default.string})},exports.default=ListView,ListView.__docgenInfo={description:"",methods:[{name:"componentWillMount",docblock:null,modifiers:[],params:[],returns:null},{name:"msg",docblock:null,modifiers:[],params:[{name:"id",type:null},{name:"values",type:null}],returns:null}],displayName:"ListView",props:{intl:{type:{name:"custom",raw:"intlShape.isRequired"},required:!1,description:""},initialize:{type:{name:"func"},required:!0,description:""},formDefinition:{type:{name:"shape",value:{children:{name:"array",required:!1}}},required:!1,description:""},selection:{type:{name:"arrayOf",value:{name:"string"}},required:!1,description:""},currentPageIds:{type:{name:"arrayOf",value:{name:"string"}},required:!1,description:""},parent:{type:{name:"shape",value:{key:{name:"string",required:!0},model:{name:"string",required:!0},reverseRelationName:{name:"string",required:!1}}},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/entity-list/src/components/ListView/ListView.js"]={name:"ListView",docgenInfo:ListView.__docgenInfo,path:"packages/entity-list/src/components/ListView/ListView.js"})},2483:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_reactRedux=__webpack_require__(110),_reactIntl=__webpack_require__(32),_Table=__webpack_require__(2484),_Table2=(obj=_Table)&&obj.__esModule?obj:{default:obj},_actions=__webpack_require__(2204);var mapActionCreators={initialize:_actions.initialize,changePage:_actions.changePage,setSorting:_actions.setSorting,onRowClick:_actions.onRowClick,setSelectable:_actions.setSelectable,onSelectChange:_actions.onSelectChange,setSelection:_actions.setSelection,refresh:_actions.refresh};exports.default=(0,_reactRedux.connect)(function(state,props){return{currentPage:state.list.currentPage,sorting:state.list.sorting,entities:state.list.entities,entityCount:state.list.entityCount,limit:state.list.limit,inProgress:state.list.inProgress,selectionStyle:state.input.selectionStyle,selectable:state.list.selectable,selection:state.list.selection,parent:state.entityList.parent}},mapActionCreators)((0,_reactIntl.injectIntl)(_Table2.default))},2484:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_Table=__webpack_require__(2485),_Table2=(obj=_Table)&&obj.__esModule?obj:{default:obj};exports.default=_Table2.default},2485:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_react2=_interopRequireDefault(__webpack_require__(0)),_propTypes2=_interopRequireDefault(__webpack_require__(2174)),_reactIntl=__webpack_require__(32),_reactBootstrapTable=__webpack_require__(2486),_cellRenderer2=_interopRequireDefault(__webpack_require__(2525));__webpack_require__(2527);var _selectionStyles=__webpack_require__(2247),_selectionStyles2=_interopRequireDefault(_selectionStyles),_StyledTable2=_interopRequireDefault(__webpack_require__(2529));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var RIGHT_ALIGNED_TYPES=["moneyamount","counter","integer","long"],Table=function(props,context){var wrapValue,msg=function(id){var values=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return props.intl.formatMessage({id:id},values)},selectRow=_extends({},(wrapValue=function(mode){return{mode:mode}},props.selectionStyle?props.selectionStyle===_selectionStyles2.default.MULTI?wrapValue("checkbox"):props.selectionStyle===_selectionStyles2.default.SINGLE?wrapValue("radio"):{}:!0===props.selectable?wrapValue("checkbox"):{}),{onSelect:function(row,isSelected){props.onSelectChange&&props.onSelectChange([row.__key],isSelected)},onSelectAll:function(isSelected,rows){var keys=rows.map(function(r){return r.__key});props.onSelectChange&&props.onSelectChange(keys,isSelected)},selected:props.selection?props.selection:[],className:"selected"}),tableOption=_extends({onSortChange:function(field,order){props.setSorting([{field:field,order:order}])},sizePerPage:props.limit,onPageChange:function(page){props.changePage(page)},page:props.currentPage,paginationShowsTotal:function(start,to,total){return 0===total?_react2.default.createElement("span",null):_react2.default.createElement("span",null,msg("client.entity-list.total",{start:start,to:to,total:total}))},paginationSize:3,hideSizePerPage:!0,onRowClick:function(entity){props.onRowClick&&props.onRowClick(entity.__key)},noDataText:props.inProgress?msg("client.entity-list.dataLoading"):msg("client.entity-list.noData"),nextPageTitle:msg("client.entity-list.nextPageTitle"),prePageTitle:msg("client.entity-list.prePageTitle"),firstPageTitle:msg("client.entity-list.firstPageTitle"),lastPageTitle:msg("client.entity-list.lastPageTitle"),prePage:"",nextPage:"",firstPage:"",lastPage:""},Array.isArray(props.sorting)&&props.sorting.length>=1?{sortName:props.sorting[0].field,sortOrder:props.sorting[0].order}:{}),showPagination=props.entityCount-props.limit>0&&!props.inProgress,cellFormatter=function(column,idx){return function(cell,entity){return _react2.default.createElement("span",{key:idx},column.children.map(function(child){return(0,_cellRenderer2.default)(child,entity,props.parent,{refresh:props.refresh},context.intl)}))}};return _react2.default.createElement(_StyledTable2.default,null,props.sorting&&_react2.default.createElement(_reactBootstrapTable.BootstrapTable,{remote:!0,data:props.inProgress?[]:props.entities,pagination:showPagination,fetchInfo:{dataTotalSize:props.entityCount},options:tableOption,trClassName:"break-word pointer",striped:!0,hover:!0,bordered:!1,selectRow:selectRow},_react2.default.createElement(_reactBootstrapTable.TableHeaderColumn,{dataField:"__key",isKey:!0,hidden:!0},"Key"),props.columnDefinitions.map(function(column,idx){var field=column.children[0];return _react2.default.createElement(_reactBootstrapTable.TableHeaderColumn,_extends({key:idx,dataFormat:cellFormatter(column,idx),dataSort:column.sortable,dataField:field.path||field.id},RIGHT_ALIGNED_TYPES.includes(field.dataType)&&{dataAlign:"right"}),column.label)})))};Table.contextTypes={intl:_reactIntl.intlShape},Table.propTypes={intl:_reactIntl.intlShape.isRequired,columnDefinitions:_propTypes2.default.arrayOf(_propTypes2.default.shape({values:_propTypes2.default.arrayOf(_propTypes2.default.shape({name:_propTypes2.default.string})),label:_propTypes2.default.string,order:_propTypes2.default.int,sortable:_propTypes2.default.bool})).isRequired,entities:_propTypes2.default.array.isRequired,entityCount:_propTypes2.default.number,inProgress:_propTypes2.default.bool,sorting:_propTypes2.default.arrayOf(_propTypes2.default.shape({field:_propTypes2.default.string,order:_propTypes2.default.string})),currentPage:_propTypes2.default.number,limit:_propTypes2.default.number,onRowClick:_propTypes2.default.func,setSorting:_propTypes2.default.func,changePage:_propTypes2.default.func.isRequired,selectionStyle:_selectionStyles.selectionStylePropType,selectable:_propTypes2.default.bool,onSelectChange:_propTypes2.default.func,refresh:_propTypes2.default.func,selection:_propTypes2.default.arrayOf(_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number])),parent:_propTypes2.default.shape({key:_propTypes2.default.string.isRequired,model:_propTypes2.default.string.isRequired,reverseRelationName:_propTypes2.default.string})},exports.default=Table,Table.__docgenInfo={description:"",methods:[],displayName:"Table",props:{intl:{type:{name:"custom",raw:"intlShape.isRequired"},required:!1,description:""},columnDefinitions:{type:{name:"arrayOf",value:{name:"shape",value:{values:{name:"arrayOf",value:{name:"shape",value:{name:{name:"string",required:!1}}},required:!1},label:{name:"string",required:!1},order:{name:"custom",raw:"PropTypes.int",required:!1},sortable:{name:"bool",required:!1}}}},required:!0,description:""},entities:{type:{name:"array"},required:!0,description:""},entityCount:{type:{name:"number"},required:!1,description:""},inProgress:{type:{name:"bool"},required:!1,description:""},sorting:{type:{name:"arrayOf",value:{name:"shape",value:{field:{name:"string",required:!1},order:{name:"string",required:!1}}}},required:!1,description:""},currentPage:{type:{name:"number"},required:!1,description:""},limit:{type:{name:"number"},required:!1,description:""},onRowClick:{type:{name:"func"},required:!1,description:""},setSorting:{type:{name:"func"},required:!1,description:""},changePage:{type:{name:"func"},required:!0,description:""},selectionStyle:{type:{name:"custom",raw:"selectionStylePropType"},required:!1,description:""},selectable:{type:{name:"bool"},required:!1,description:""},onSelectChange:{type:{name:"func"},required:!1,description:""},refresh:{type:{name:"func"},required:!1,description:""},selection:{type:{name:"arrayOf",value:{name:"union",value:[{name:"string"},{name:"number"}]}},required:!1,description:""},parent:{type:{name:"shape",value:{key:{name:"string",required:!0},model:{name:"string",required:!0},reverseRelationName:{name:"string",required:!1}}},required:!1,description:""}},context:{intl:{type:{name:"custom",raw:"intlShape"},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/entity-list/src/components/Table/Table.js"]={name:"Table",docgenInfo:Table.__docgenInfo,path:"packages/entity-list/src/components/Table/Table.js"})},2525:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _react2=_interopRequireDefault(__webpack_require__(0)),_actions2=_interopRequireDefault(__webpack_require__(2185)),_form2=_interopRequireDefault(__webpack_require__(2176)),_toccoUi=__webpack_require__(73),_formattedValueFactory2=_interopRequireDefault(__webpack_require__(2526));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(field,entity,parent,cb,intl){var componentType=field.componentType;return _actions2.default.isAction(componentType)?getAction(field,entity,parent,cb):componentType===_form2.default.componentTypes.FIELD?(0,_formattedValueFactory2.default)(field,entity,intl):componentType===_form2.default.componentTypes.DISPLAY?getDisplayExpression(field,entity,cb):void 0};var getDisplayExpression=function(field,entity){return _react2.default.createElement("span",{key:field.id},_react2.default.createElement(_toccoUi.FormattedValue,{type:"html",value:entity[field.id].value}))},getAction=function(field,entity,parent,cb){return _react2.default.createElement(_actions2.default.Action,{key:"tableAction"+field.id,definition:field,ids:[entity.__key],entity:entity.__model,callback:function(result){return cb.refresh()},parent:parent})}},2526:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MultiSeparator=void 0;var obj,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_react=__webpack_require__(0),_react2=(obj=_react)&&obj.__esModule?obj:{default:obj},_toccoUi=__webpack_require__(73);var customTypeMap={document:"document-compact",binary:"document-compact"},MultiSeparator=exports.MultiSeparator=function(){return", "};exports.default=function(fieldDefinition,entity,intl){var id=fieldDefinition.id,value=entity[fieldDefinition.path||id],contents=Array.isArray(value)?value:[value];return contents.length>0?_react2.default.createElement("span",{key:id,style:{marginRight:"2px"}},contents.map(function(content,idx){var type=content.type,value=content.value,mappedType=function(type){return customTypeMap[type]?customTypeMap[type]:type}(type),options=function(type,intl){switch(type){case"document-compact":return{downloadTitle:intl.formatMessage({id:"client.component.upload.downloadTitle"})}}return null}(mappedType,intl);return _react2.default.createElement(_toccoUi.FormattedValue,_extends({key:idx,type:mappedType,value:value},options?{options:options}:{}))}).reduce(function(prev,curr,idx){return[prev,_react2.default.createElement(MultiSeparator,{key:"ms-"+idx}),curr]})):null}},2529:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var strings,raw,obj,_templateObject=(strings=["\n  && {\n    .react-bs-table {\n      .table {\n        margin-bottom: 0;\n      }\n\n      td[ tabindex ] {\n        outline: none;\n      }\n    }\n\n    .break-word {\n      > td {\n        white-space: normal;\n        word-wrap: break-word;\n      }\n    }\n\n    .pointer {\n      cursor: pointer;\n    }\n  }\n"],raw=["\n  && {\n    .react-bs-table {\n      .table {\n        margin-bottom: 0;\n      }\n\n      td[ tabindex ] {\n        outline: none;\n      }\n    }\n\n    .break-word {\n      > td {\n        white-space: normal;\n        word-wrap: break-word;\n      }\n    }\n\n    .pointer {\n      cursor: pointer;\n    }\n  }\n"],Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))),_styledComponents=__webpack_require__(5);var StyledTable=((obj=_styledComponents)&&obj.__esModule?obj:{default:obj}).default.div(_templateObject);exports.default=StyledTable},2530:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDispatchActions=void 0;var _actions=__webpack_require__(2203),_actions2=__webpack_require__(2189),_actions3=__webpack_require__(2204);exports.getDispatchActions=function(input,init){return actionSettings.reduce(function(acc,actionSetting){return null!=input[actionSetting.name]?acc.push(actionSetting.action.apply(actionSetting,function(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}(actionSetting.argsFactory(input)))):init&&actionSetting.defaultInitalValue&&acc.push(actionSetting.action(actionSetting.defaultInitalValue)),acc},[])};var actionSettings=[{name:"entityName",action:_actions.setEntityName,argsFactory:function(input){return[input.entityName]}},{name:"formBase",action:_actions3.setListFormName,argsFactory:function(input){return[input.formBase+"_list"]}},{name:"formBase",action:_actions2.setSearchFormName,argsFactory:function(input){return[input.formBase+"_search"]}},{name:"limit",action:_actions3.setLimit,argsFactory:function(input){return[input.limit]}},{name:"searchFilters",action:_actions3.setSearchFilters,argsFactory:function(input){return[input.searchFilters]}},{name:"showSearchForm",action:_actions.setShowSearchForm,argsFactory:function(input){return[input.showSearchForm]}},{name:"showCreateButton",action:_actions.setShowCreateButton,argsFactory:function(input){return[input.showCreateButton]}},{name:"disableSimpleSearch",action:_actions2.setDisableSimpleSearch,argsFactory:function(input){return[input.disableSimpleSearch]}},{name:"simpleSearchFields",action:_actions2.setSimpleSearchFields,argsFactory:function(input){return[input.simpleSearchFields]}},{name:"selection",type:"boolean",action:_actions3.setSelection,argsFactory:function(input){return[input.selection]}},{name:"parent",action:_actions.setParent,argsFactory:function(input){return[input.parent]}}]}}]);
//# sourceMappingURL=1.4fac1aec3e4c9bec66ed.bundle.js.map